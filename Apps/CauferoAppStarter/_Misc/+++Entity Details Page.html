<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Agent Playbook - Doc-First Workflow</title>
<link rel="icon" type="image/png" href="https://caufero.github.io/projects/Apps/CarePort/Screenshots/caufero_logo.png">
</head>
<body>
  <div class="page" data-theme="auto">
    <div class="bg" aria-hidden="true"></div>

    <header class="topbar" role="banner">
      <div class="topbar-inner">
        <div class="topbar-left">
          <a class="brand" href="https://caufero.github.io/projects/_Misc/_/_Stuff.html#">
            <img src="https://caufero.github.io/projects/Apps/CarePort/Screenshots/caufero_logo.png" alt="4KPAINT" style="width:37px;height:37px;object-fit:cover;margin-right:-3px;" />
            <div class="brand-text">
              <div class="brand-name">Caufero Workspace</div>
              <div class="brand-sub">Your control room for apps, prompts, chats, and modular blocks</div>
            </div>
          </a>
        </div>

        <div class="topbar-center">
          <div class="page-chip">
            <span class="page-chip-dot" aria-hidden="true"></span>
            <span class="page-chip-text">Documentation › Generating a Details Page (CauferoAppStarter)</span>
          </div>
        </div>

        <div class="topbar-right">
          

          <a class="icon-btn"
            href="#"
            onclick="openInVSCode(); return false;"
            title="Beautify Markdown Pages" aria-label="Beautify Markdown Pages">
            <svg viewBox="0 0 24 24" class="ico" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
              <polyline points="14 2 14 8 20 8" />
              <polyline points="12 18 15 15 12 12" />
              <line x1="9" y1="15" x2="15" y2="15" />
            </svg>
            <span class="icon-btn-text">Go To File</span>
          </a>

          <a class="icon-btn"
            href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Beautify%20Markdown%20File.html#"
            title="Beautify Markdown Pages" aria-label="Beautify Markdown Pages">
            <svg viewBox="0 0 24 24" class="ico" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M12 3l2.2 6.8H21l-5.6 4.1L17.6 21 12 16.9 6.4 21l2.2-7.1L3 9.8h6.8L12 3z" />
            </svg>
            <span class="icon-btn-text">Beautify</span>
          </a>

          <a class="icon-btn brand"
            href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/How%20To%20Go%20About%20Some%20Development%20Task.html#"
            title="How To Do Stuff In Caufero" aria-label="How To Do Stuff In Caufero">
            <svg viewBox="0 0 24 24" class="ico" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
              <path d="M14 2v6h6" />
              <path d="M8 13h8" />
              <path d="M8 17h8" />
              <path d="M8 9h2" />
            </svg>
            <span class="icon-btn-text">How To</span>
          </a>

          <button class="icon-btn ghost" id="btnTheme" type="button" title="Toggle theme" aria-label="Toggle theme">
            <svg viewBox="0 0 24 24" class="ico" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M21 12.8A9 9 0 1 1 11.2 3 7 7 0 0 0 21 12.8z" />
            </svg>
            <span class="icon-btn-text">Theme</span>
          </button>

          <button class="icon-btn ghost" id="btnMenu" type="button" title="Toggle menu" aria-label="Toggle menu">
            <svg viewBox="0 0 24 24" class="ico" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M4 6h16" />
              <path d="M4 12h16" />
              <path d="M4 18h16" />
            </svg>
            <span class="icon-btn-text">Menu</span>
          </button>
        </div>
      </div>
    </header>

    <div class="shell" id="shell">
      <aside class="rail rail-left" id="railLeft" aria-label="Side menu">
        <div class="rail-top">
          <div class="rail-title">Navigation</div>
          <div class="rail-sub">Search to jump fast</div>

          <div class="rail-search">
            <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <circle cx="11" cy="11" r="7"></circle>
              <path d="M21 21l-4.3-4.3"></path>
            </svg>
            <input id="navSearch" type="search" placeholder="Search links..." autocomplete="off" />
            <button class="xbtn" id="navClear" type="button" title="Clear" aria-label="Clear">
              <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M18 6L6 18"></path>
                <path d="M6 6l12 12"></path>
              </svg>
            </button>
          </div>

          <div class="rail-hint" id="navHint">Tip: type "invoice", "kooltool", "xml", "careport"</div>
        </div>

        <nav class="rail-body" id="navTree">
          <a class="nav-item" href="https://caufero.github.io/projects/_Misc/_/_Stuff.html#" data-label="Home">
            <span class="nav-ico" aria-hidden="true">
              <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 10.5L12 3l9 7.5"></path>
                <path d="M5 10v11h14V10"></path>
              </svg>
            </span>
            <span class="nav-text">Home</span>
          </a>

          <div class="nav-group" data-label="Apps">
            <button class="nav-group-head" type="button" data-toggle="group">
              <span class="nav-ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M4 7h16"></path>
                  <path d="M4 12h16"></path>
                  <path d="M4 17h16"></path>
                </svg>
              </span>
              <span class="nav-text">Apps</span>
              <span class="chev" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 18l6-6-6-6"></path>
                </svg>
              </span>
            </button>
            <div class="nav-group-body">
              <a class="nav-item sub" href="https://caufero.github.io/projects/Apps/4KPAINT/_NewAdditions.html"
                data-label="Apps 4KPAINT"><span class="dot" aria-hidden="true"></span><span
                  class="nav-text">4KPAINT</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Apps/CarePort/_NewAdditions.html"
                data-label="Apps CarePort"><span class="dot" aria-hidden="true"></span><span
                  class="nav-text">CarePort</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Apps/Elimes%20Outfit/_NewAdditions.html"
                data-label="Apps Elimes Outfit"><span class="dot" aria-hidden="true"></span><span
                  class="nav-text">Elimes Outfit</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Apps/Giftera/_NewAdditions.html"
                data-label="Apps Giftera"><span class="dot" aria-hidden="true"></span><span
                  class="nav-text">Giftera</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Apps/I2D/_NewAdditions.html"
                data-label="Apps I2D"><span class="dot" aria-hidden="true"></span><span class="nav-text">I2D</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Apps/KoolTool/_NewAdditions.html"
                data-label="Apps KoolTool"><span class="dot" aria-hidden="true"></span><span
                  class="nav-text">KoolTool</span></a>
            </div>
          </div>

          <div class="nav-group" data-label="Temp Text Files">
            <button class="nav-group-head" type="button" data-toggle="group">
              <span class="nav-ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                  <path d="M14 2v6h6"></path>
                </svg>
              </span>
              <span class="nav-text">Temp Text Files</span>
              <span class="chev" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 18l6-6-6-6"></path>
                </svg>
              </span>
            </button>
            <div class="nav-group-body">
              <a class="nav-item sub danger"
                href="vscode://file/Users/cyril/Documents/Caufero%20Apps/Projects/_Misc/_/Temp1.html"
                data-label="Temp Text Files Temp 1" target="_blank" rel="noopener"><span class="dot"></span><span class="nav-text">Temp 1</span></a>
              <a class="nav-item sub"
                href="vscode://file/Users/cyril/Documents/Caufero%20Apps/Projects/_Misc/_/Temp2.html"
                data-label="Temp Text Files Temp 2" target="_blank" rel="noopener"><span class="dot"></span><span class="nav-text">Temp 2</span></a>
              <a class="nav-item sub"
                href="vscode://file/Users/cyril/Documents/Caufero%20Apps/Projects/_Misc/_/Temp3.html"
                data-label="Temp Text Files Temp 3" target="_blank" rel="noopener"><span class="dot"></span><span class="nav-text">Temp 3</span></a>
              <a class="nav-item sub"
                href="vscode://file/Users/cyril/Documents/Caufero%20Apps/Projects/_Misc/_/Temp4.html"
                data-label="Temp Text Files Temp 4" target="_blank" rel="noopener"><span class="dot"></span><span class="nav-text">Temp 4</span></a>
              <a class="nav-item sub"
                href="vscode://file/Users/cyril/Documents/Caufero%20Apps/Projects/_Misc/_/Temp5.html"
                data-label="Temp Text Files Temp 5" target="_blank" rel="noopener"><span class="dot"></span><span class="nav-text">Temp 5</span></a>
              <a class="nav-item sub"
                href="vscode://file/Users/cyril/Documents/Caufero%20Apps/Projects/_Misc/_/Temp6.html"
                data-label="Temp Text Files Temp 6" target="_blank" rel="noopener"><span class="dot"></span><span class="nav-text">Temp 6</span></a>
              <a class="nav-item sub"
                href="vscode://file/Users/cyril/Documents/Caufero%20Apps/Projects/_Misc/_/Temp7.html"
                data-label="Temp Text Files Temp 7" target="_blank" rel="noopener"><span class="dot"></span><span class="nav-text">Temp 7</span></a>
              <a class="nav-item sub"
                href="vscode://file/Users/cyril/Documents/Caufero%20Apps/Projects/_Misc/_/Temp8.html"
                data-label="Temp Text Files Temp 8" target="_blank" rel="noopener"><span class="dot"></span><span class="nav-text">Temp 8</span></a>
              <a class="nav-item sub"
                href="vscode://file/Users/cyril/Documents/Caufero%20Apps/Projects/_Misc/_/Temp9.html"
                data-label="Temp Text Files Temp 9" target="_blank" rel="noopener"><span class="dot"></span><span class="nav-text">Temp 9</span></a>
              <a class="nav-item sub danger"
                href="vscode://file/Users/cyril/Documents/Caufero%20Apps/Projects/_Misc/_/Temp10.html"
                data-label="Temp Text Files Temp 10" target="_blank" rel="noopener"><span class="dot"></span><span class="nav-text">Temp 10</span></a>
            </div>
          </div>

          <div class="nav-group open" data-label="AI Prompts">
            <button class="nav-group-head" type="button" data-toggle="group">
              <span class="nav-ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path
                    d="M12 2a4 4 0 0 0-4 4v1H7a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h1v1a4 4 0 1 0 8 0v-1h1a3 3 0 0 0 3-3V10a3 3 0 0 0-3-3h-1V6a4 4 0 0 0-4-4z">
                  </path>
                  <path d="M9 12h6"></path>
                  <path d="M12 9v6"></path>
                </svg>
              </span>
              <span class="nav-text">AI Prompts</span>
              <span class="chev" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 18l6-6-6-6"></path>
                </svg>
              </span>
            </button>

            <div class="nav-group-body">
              <div class="nav-subgroup" data-label="AI Prompts CSS">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill">CSS</span>
                  <span class="nav-text">CSS</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Convert%20Current%20CSS%20To%20Tailwind%20CSS.html"
                    data-label="AI Prompts CSS Convert Current CSS to Tailwind CSS"><span class="dot"></span><span
                      class="nav-text">Convert Current CSS to Tailwind CSS</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/CSS_Theme_Mapper_Prompt.html"
                    data-label="AI Prompts CSS Map CSS To Some Theme"><span class="dot"></span><span
                      class="nav-text">Map CSS To Some Theme</span></a>
                </div>
              </div>

              <div class="nav-subgroup open" data-label="AI Prompts Development">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill violet">DEV</span>
                  <span class="nav-text">Development</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/PopulateAvailableLinks.html"
                    data-label="AI Prompts Development Add Link To Menu"><span class="dot"></span><span
                      class="nav-text">Add Link To Menu</span></a>

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/Build%20Apps%20With%20CauferoAppStarter.html"
                    data-label="AI Prompts Development Build App In CauferoAppStarter"><span class="dot"></span><span
                      class="nav-text">Build App In CauferoAppStarter</span></a>

                  <a class="nav-item sub active"
                    href="https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/+++Entity%20Details%20Page.html"
                    data-label="AI Prompts Development Build Details Page"><span class="dot"></span><span
                      class="nav-text">Build Details Page</span></a>

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/_Entity%20Filter%20Page.html"
                    data-label="AI Prompts Development Build List Filter Page"><span class="dot"></span><span
                      class="nav-text">Build List Filter Page</span></a>

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/+++Entity%20List%20Page.html"
                    data-label="AI Prompts Development Build List Page"><span class="dot"></span><span
                      class="nav-text">Build List Page</span></a>

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/+++Entity%20Modal%20Page.html"
                    data-label="AI Prompts Development Build Modal Page"><span class="dot"></span><span
                      class="nav-text">Build Modal Page</span></a>

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/+++ Report%20Filter%20Page.html"
                    data-label="AI Prompts Development Build Report Filter Page"><span class="dot"></span><span
                      class="nav-text">Build Report Filter Page</span></a>

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Build%20Totally%20New%20Page.html"
                    data-label="AI Prompts Development Build Totally New Page"><span class="dot"></span><span
                      class="nav-text">Build Totally New Page</span></a>

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Do%20Changes%20In%20Solution%20Based%20On%20Development%20Documentation.html"
                    data-label="AI Prompts Development Do Changes In Solution Based On Development Documentation"><span
                      class="dot"></span><span class="nav-text">Do Changes In Solution Based On Development
                      Documentation</span></a>

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/Get%20Value%20List.html"
                    data-label="AI Prompts Development Implement Value List"><span class="dot"></span><span
                      class="nav-text">Implement Value List</span></a>

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/How%20To%20Go%20About%20Some%20Development%20Task.html"
                    data-label="AI Prompts Development How To Go About Some Development Task"><span
                      class="dot"></span><span class="nav-text">How To Go About Some Development Task</span></a>

                  <div class="nav-subgroup" data-label="AI Prompts Development Make Page Generation Better">
                    <button class="nav-subgroup-head inner" type="button" data-toggle="subgroup">
                      <span class="mini-pill teal">GEN</span>
                      <span class="nav-text">Make Page Generation Better</span>
                      <span class="chev" aria-hidden="true">
                        <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                          stroke-linecap="round" stroke-linejoin="round">
                          <path d="M9 18l6-6-6-6"></path>
                        </svg>
                      </span>
                    </button>
                    <div class="nav-subgroup-body">
                      <a class="nav-item sub"
                        href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Make%20A%20Page%20ChatGPT%20Generated%20Become%20Better/Format%20JS%20Of%20Working%20FM%20Script%20Into%20Preferred%20Components.html"
                        data-label="AI Prompts Development Make Page Generation Better Format JS Of Working FM Script Into Preferred Components"><span
                          class="dot"></span><span class="nav-text">Format JS Of Working FM Script Into Preferred
                          Components</span></a>
                      <a class="nav-item sub"
                        href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Make%20A%20Page%20ChatGPT%20Generated%20Become%20Better/Make%20A%20Page%20ChatGPT%20Generated%20Become%20Better.html"
                        data-label="AI Prompts Development Make Page Generation Better Make A Page ChatGPT Generated Become Better"><span
                          class="dot"></span><span class="nav-text">Make A Page ChatGPT Generated Become
                          Better</span></a>
                    </div>
                  </div>

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Mimic%20Caufero%20Workspace%20Page.html"
                    data-label="AI Prompts Development Mimic Caufero Workspace Page"><span class="dot"></span><span
                      class="nav-text">Mimic Caufero Workspace Page</span></a>

                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Update%20ExecuteSQL%20Query.html"
                    data-label="AI Prompts Development Update ExecuteSQL Query"><span class="dot"></span><span
                      class="nav-text">Update ExecuteSQL Query</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="AI Prompts Documents">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill amber">DOC</span>
                  <span class="nav-text">Documents</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Generate%20Contract.html"
                    data-label="AI Prompts Documents Software Contract"><span class="dot"></span><span
                      class="nav-text">Software Contract</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Generate%20Software%20Features%20Document%20_%20Based%20On%20DDR%20_n_%20Sample%20Features%20Doc.html"
                    data-label="AI Prompts Documents Software Features Document"><span class="dot"></span><span
                      class="nav-text">Software Features Document</span></a>
                  <a class="nav-item sub muted"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Generate%20Invoice.html"
                    data-label="AI Prompts Documents Invoice"><span class="dot"></span><span class="nav-text">⏳
                      Invoice</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Generate%20Software%20Proposal.html"
                    data-label="AI Prompts Documents Software Proposal"><span class="dot"></span><span
                      class="nav-text">Software Proposal</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="AI Prompts FM Script <-> XML">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill slate">XML</span>
                  <span class="nav-text">FM Script &lt;-&gt; XML</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/XML:FM%20Scripts%20Convertions/Convert%20FM%20Script%20To%20XML.html"
                    data-label="AI Prompts FM Script XML FM Script To XML"><span class="dot"></span><span
                      class="nav-text">FM Script To XML</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/XML:FM%20Scripts%20Convertions/Convert%20XML%20To%20FM%20Script.html"
                    data-label="AI Prompts FM Script XML XML To FM Script"><span class="dot"></span><span
                      class="nav-text">XML To FM Script</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="AI Prompts Docs">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill teal">DOCS</span>
                  <span class="nav-text">Docs</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Generate%20Documentations/AI_AgentTraining.html"
                    data-label="AI Prompts Docs Documentation To Train Agent To Do Something"><span
                      class="dot"></span><span class="nav-text">Documentation To Train Agent To Do Something</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/Generate%20Documentations/FM%20App%20Documentation.html"
                    data-label="AI Prompts Docs Documentation For A FileMaker Application"><span
                      class="dot"></span><span class="nav-text">Documentation For A FileMaker Application</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="AI Prompts Explain">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill rose">WHY</span>
                  <span class="nav-text">Explain</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/What%20Is%20It%20Doing/What%20Is%20This%20FM%20App%20Doing.html"
                    data-label="AI Prompts Explain What Is This FileMaker Application Doing"><span
                      class="dot"></span><span class="nav-text">What Is This FileMaker Application Doing?</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/What%20Is%20It%20Doing/What%20Is%20This%20FM%20Script%20Doing.html"
                    data-label="AI Prompts Explain What Is This FileMaker Script Doing"><span class="dot"></span><span
                      class="nav-text">What Is This FileMaker Script Doing?</span></a>
                </div>
              </div>
            </div>
          </div>

          <div class="nav-group" data-label="Modular Solutions">
            <button class="nav-group-head" type="button" data-toggle="group">
              <span class="nav-ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M4 4h7v7H4z"></path>
                  <path d="M13 4h7v7h-7z"></path>
                  <path d="M4 13h7v7H4z"></path>
                  <path d="M13 13h7v7h-7z"></path>
                </svg>
              </span>
              <span class="nav-text">Modular Solutions</span>
              <span class="chev" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 18l6-6-6-6"></path>
                </svg>
              </span>
            </button>

            <div class="nav-group-body">
              <div class="nav-subgroup" data-label="Modular Solutions Blue Collar">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill">BC</span>
                  <span class="nav-text">Blue Collar</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/barcode_test.html"
                    data-label="Modular Solutions Blue Collar barcode_test"><span class="dot"></span><span
                      class="nav-text">barcode_test</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/Coffee%20Break.html"
                    data-label="Modular Solutions Blue Collar Coffee Break"><span class="dot"></span><span
                      class="nav-text">Coffee Break</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/ModularSolutions/Item%20Collection.html"
                    data-label="Modular Solutions Blue Collar Item Collection"><span class="dot"></span><span
                      class="nav-text">Item Collection</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/Time_Picker.html"
                    data-label="Modular Solutions Blue Collar Time_Picker"><span class="dot"></span><span
                      class="nav-text">Time_Picker</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="Modular Solutions PerformanceBTS">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill amber">PB</span>
                  <span class="nav-text">PerformanceBTS</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/ActionTrack_R1.html"
                    data-label="Modular Solutions PerformanceBTS ActionTrack_R1"><span class="dot"></span><span
                      class="nav-text">ActionTrack_R1</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/BCS_d1.html"
                    data-label="Modular Solutions PerformanceBTS BCS_d1"><span class="dot"></span><span
                      class="nav-text">BCS_d1</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/ModularSolutions/BCS_StyleSheetTheme.html"
                    data-label="Modular Solutions PerformanceBTS BCS_StyleSheetTheme"><span class="dot"></span><span
                      class="nav-text">BCS_StyleSheetTheme</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/ModularSolutions/FM%20Virtual%20Menu%20List.html"
                    data-label="Modular Solutions PerformanceBTS FM Virtual Menu List"><span class="dot"></span><span
                      class="nav-text">FM Virtual Menu List</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/ModularSolutions/InfoTools%20Helper.html"
                    data-label="Modular Solutions PerformanceBTS InfoTools Helper"><span class="dot"></span><span
                      class="nav-text">InfoTools Helper</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/Task_List.html"
                    data-label="Modular Solutions PerformanceBTS Task_List"><span class="dot"></span><span
                      class="nav-text">Task_List</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="Modular Solutions Geist">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill violet">G</span>
                  <span class="nav-text">Geist</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/FMSVGInator.html"
                    data-label="Modular Solutions Geist FMSVGInator"><span class="dot"></span><span
                      class="nav-text">FMSVGInator</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/LedgerLink.html"
                    data-label="Modular Solutions Geist LedgerLink"><span class="dot"></span><span
                      class="nav-text">LedgerLink</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/ModLog.html"
                    data-label="Modular Solutions Geist ModLog"><span class="dot"></span><span
                      class="nav-text">ModLog</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/OttoDeploy.html"
                    data-label="Modular Solutions Geist OttoDeploy"><span class="dot"></span><span
                      class="nav-text">OttoDeploy</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/OttoFMS.html"
                    data-label="Modular Solutions Geist OttoFMS"><span class="dot"></span><span
                      class="nav-text">OttoFMS</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/ProofChat.html"
                    data-label="Modular Solutions Geist ProofChat"><span class="dot"></span><span
                      class="nav-text">ProofChat</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/Raycast.html"
                    data-label="Modular Solutions Geist Raycast"><span class="dot"></span><span
                      class="nav-text">Raycast</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/SimpleQ.html"
                    data-label="Modular Solutions Geist SimpleQ"><span class="dot"></span><span
                      class="nav-text">SimpleQ</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="Modular Solutions Monkeybread">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill slate">MB</span>
                  <span class="nav-text">Monkeybread</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/CodeSnips.html"
                    data-label="Modular Solutions Monkeybread CodeSnips"><span class="dot"></span><span
                      class="nav-text">CodeSnips</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="Modular Solutions Others">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill teal">+</span>
                  <span class="nav-text">Others</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/ModularSolutions/JSONQuery%202.1.html"
                    data-label="Modular Solutions Others JSONQuery 2.1"><span class="dot"></span><span
                      class="nav-text">JSONQuery 2.1</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/ModularSolutions/OData%20Examples.html"
                    data-label="Modular Solutions Others OData Examples"><span class="dot"></span><span
                      class="nav-text">OData Examples</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/ModularSolutions/TaskControl.html"
                    data-label="Modular Solutions Others TaskControl"><span class="dot"></span><span
                      class="nav-text">TaskControl</span></a>
                </div>
              </div>
            </div>
          </div>

          <div class="nav-group" data-label="Tailwind-Designed Websites">
            <button class="nav-group-head" type="button" data-toggle="group">
              <span class="nav-ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M4 12c2-6 6-6 8 0s6 6 8 0"></path>
                  <path d="M4 18c2-6 6-6 8 0s6 6 8 0"></path>
                </svg>
              </span>
              <span class="nav-text">Tailwind-Designed Websites</span>
              <span class="chev" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 18l6-6-6-6"></path>
                </svg>
              </span>
            </button>
            <div class="nav-group-body">
              <a class="nav-item sub"
                href="https://caufero.github.io/projects/_Misc/_/_Stuff.html#tailwind-designed-websites"
                data-label="Tailwind-Designed Websites Jump To Section"><span class="dot"></span><span
                  class="nav-text">Jump to Sites section</span></a>
              <div class="nav-subgroup" data-label="Tailwind-Designed Websites AI Agents and Automation">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill teal">AI</span>
                  <span class="nav-text">AI Agents &amp; Automation</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/AgentMail.html"
                    data-label="Tailwind-Designed Websites AI AgentMail"><span class="dot"
                      aria-hidden="true"></span><span class="nav-text">AgentMail</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/AI%20Agents%20Hub.html"
                    data-label="Tailwind-Designed Websites AI AI Agents Hub"><span class="dot"></span><span
                      class="nav-text">AI Agents Hub</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/AI%20Agents%20List.html"
                    data-label="Tailwind-Designed Websites AI AI Agents List"><span class="dot"></span><span
                      class="nav-text">AI Agents List</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/AllGPTs.html"
                    data-label="Tailwind-Designed Websites AI AllGPTs"><span class="dot"></span><span
                      class="nav-text">AllGPTs</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/AutoGPT.html"
                    data-label="Tailwind-Designed Websites AI AutoGPT"><span class="dot"></span><span
                      class="nav-text">AutoGPT</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Best%20AI%20Agents.html"
                    data-label="Tailwind-Designed Websites AI Best AI Agents"><span class="dot"></span><span
                      class="nav-text">Best AI Agents</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Browser%20Use.html"
                    data-label="Tailwind-Designed Websites AI Browser Use"><span class="dot"></span><span
                      class="nav-text">Browser Use</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Composio.html"
                    data-label="Tailwind-Designed Websites AI Composio"><span class="dot"></span><span
                      class="nav-text">Composio</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Continuum.html"
                    data-label="Tailwind-Designed Websites AI Continuum"><span class="dot"></span><span
                      class="nav-text">Continuum</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Cranston%20AI.html"
                    data-label="Tailwind-Designed Websites AI Cranston AI"><span class="dot"></span><span
                      class="nav-text">Cranston AI</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/CrewAI.html"
                    data-label="Tailwind-Designed Websites AI CrewAI"><span class="dot"></span><span
                      class="nav-text">CrewAI</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Dify.html"
                    data-label="Tailwind-Designed Websites AI Dify"><span class="dot"></span><span
                      class="nav-text">Dify</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Flowise.html"
                    data-label="Tailwind-Designed Websites AI Flowise"><span class="dot"></span><span
                      class="nav-text">Flowise</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/LlamaIndex.html"
                    data-label="Tailwind-Designed Websites AI LlamaIndex"><span class="dot"></span><span
                      class="nav-text">LlamaIndex</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Subconscious.html"
                    data-label="Tailwind-Designed Websites AI Subconscious"><span class="dot"></span><span
                      class="nav-text">Subconscious</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Tavily.html"
                    data-label="Tailwind-Designed Websites AI Tavily"><span class="dot"></span><span
                      class="nav-text">Tavily</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/TaskMaster.html"
                    data-label="Tailwind-Designed Websites AI TaskMaster"><span class="dot"></span><span
                      class="nav-text">TaskMaster</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="Tailwind-Designed Websites Builders and Platforms">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill violet">BLD</span>
                  <span class="nav-text">Builders &amp; Platforms</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Bolt.new.html"
                    data-label="Tailwind-Designed Websites Builders Bolt.new"><span class="dot"></span><span
                      class="nav-text">Bolt.new</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Botpress.html"
                    data-label="Tailwind-Designed Websites Dev Botpress"><span class="dot"></span><span
                      class="nav-text">Botpress</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Cofondr.html"
                    data-label="Tailwind-Designed Websites Builders Cofondr"><span class="dot"></span><span
                      class="nav-text">Cofondr</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Factory.html"
                    data-label="Tailwind-Designed Websites Builders Factory"><span class="dot"></span><span
                      class="nav-text">Factory</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Lovable.html"
                    data-label="Tailwind-Designed Websites Builders Lovable"><span class="dot"></span><span
                      class="nav-text">Lovable</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/MarsX.html"
                    data-label="Tailwind-Designed Websites Builders MarsX"><span class="dot"></span><span
                      class="nav-text">MarsX</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Unicorn%20Platform.html"
                    data-label="Tailwind-Designed Websites Builders Unicorn Platform"><span class="dot"></span><span
                      class="nav-text">Unicorn Platform</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Zuludesk.html"
                    data-label="Tailwind-Designed Websites Builders Zuludesk"><span class="dot"></span><span
                      class="nav-text">Zuludesk</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="Tailwind-Designed Websites Dev Tools and Docs">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill">DEV</span>
                  <span class="nav-text">Dev Tools &amp; Docs</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Decipher%20AI.html"
                    data-label="Tailwind-Designed Websites Dev Decipher AI"><span class="dot"></span><span
                      class="nav-text">Decipher AI</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Dev%20Hunt.html"
                    data-label="Tailwind-Designed Websites Dev Dev Hunt"><span class="dot"></span><span
                      class="nav-text">Dev Hunt</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Graphed.html"
                    data-label="Tailwind-Designed Websites Dev Graphed"><span class="dot"></span><span
                      class="nav-text">Graphed</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Gravity.html"
                    data-label="Tailwind-Designed Websites Dev Gravity"><span class="dot"></span><span
                      class="nav-text">Gravity</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Make.html"
                    data-label="Tailwind-Designed Websites Dev Make"><span class="dot"></span><span
                      class="nav-text">Make</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/Sites/NextJs%20Starters%20&%20Boilerplates.html"
                    data-label="Tailwind-Designed Websites Dev NextJs Starters & Boilerplates"><span
                      class="dot"></span><span class="nav-text">NextJs Starters &amp; Boilerplates</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/Sites/Open%20Source%20Software.html"
                    data-label="Tailwind-Designed Websites Dev Open Source Software"><span class="dot"></span><span
                      class="nav-text">Open Source Software</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Tailwind%20CSS.html"
                    data-label="Tailwind-Designed Websites Dev Tailwind CSS"><span class="dot"></span><span
                      class="nav-text">Tailwind CSS</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/UI%20Generator.html"
                    data-label="Tailwind-Designed Websites Dev UI Generator"><span class="dot"></span><span
                      class="nav-text">UI Generator</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="Tailwind-Designed Websites Marketing and Growth">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill amber">GRW</span>
                  <span class="nav-text">Marketing &amp; Growth</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">

                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/CountVisits.html"
                    data-label="Tailwind-Designed Websites Marketing CountVisits"><span class="dot"></span><span
                      class="nav-text">CountVisits</span></a>
                  <a class="nav-item sub"
                    href="https://caufero.github.io/projects/_Misc/Sites/Fast%20Search%20Engine%20Indexing.html"
                    data-label="Tailwind-Designed Websites Marketing Fast Search Engine Indexing"><span
                      class="dot"></span><span class="nav-text">Fast Search Engine Indexing</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/InboxBott.html"
                    data-label="Tailwind-Designed Websites Marketing InboxBott"><span class="dot"></span><span
                      class="nav-text">InboxBott</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/ListingBott.html"
                    data-label="Tailwind-Designed Websites Marketing ListingBott"><span class="dot"></span><span
                      class="nav-text">ListingBott</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Marketsy.ai.html"
                    data-label="Tailwind-Designed Websites Marketing Marketsy.ai"><span class="dot"></span><span
                      class="nav-text">Marketsy.ai</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Saas%20Emailer.html"
                    data-label="Tailwind-Designed Websites Marketing Saas Emailer"><span class="dot"></span><span
                      class="nav-text">Saas Emailer</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Secondly.html"
                    data-label="Tailwind-Designed Websites Marketing Secondly"><span class="dot"></span><span
                      class="nav-text">Secondly</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/SEObot.html"
                    data-label="Tailwind-Designed Websites Marketing SEObot"><span class="dot"></span><span
                      class="nav-text">SEObot</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/StartClaw.html"
                    data-label="Tailwind-Designed Websites Marketing StartClaw"><span class="dot"></span><span
                      class="nav-text">StartClaw</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Startups%20Tools.html"
                    data-label="Tailwind-Designed Websites Marketing Startups Tools"><span class="dot"></span><span
                      class="nav-text">Startups Tools</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/TinyAdz.html"
                    data-label="Tailwind-Designed Websites Marketing TinyAdz"><span class="dot"></span><span
                      class="nav-text">TinyAdz</span></a>
                </div>
              </div>

              <div class="nav-subgroup" data-label="Tailwind-Designed Websites Misc and Reference">
                <button class="nav-subgroup-head" type="button" data-toggle="subgroup">
                  <span class="mini-pill slate">MISC</span>
                  <span class="nav-text">Misc &amp; Reference</span>
                  <span class="chev" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                      stroke-linecap="round" stroke-linejoin="round">
                      <path d="M9 18l6-6-6-6"></path>
                    </svg>
                  </span>
                </button>
                <div class="nav-subgroup-body">
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Butter.html"
                    data-label="Tailwind-Designed Websites Misc Butter"><span class="dot"></span><span
                      class="nav-text">Butter</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Filmgrail.html"
                    data-label="Tailwind-Designed Websites Misc Filmgrail"><span class="dot"></span><span
                      class="nav-text">Filmgrail</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Jack&Jill.html"
                    data-label="Tailwind-Designed Websites Misc Jack&Jill"><span class="dot"></span><span
                      class="nav-text">Jack&amp;Jill</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/John%20Rush.html"
                    data-label="Tailwind-Designed Websites Misc John Rush"><span class="dot"></span><span
                      class="nav-text">John Rush</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Kortix.html"
                    data-label="Tailwind-Designed Websites Misc Kortix"><span class="dot"></span><span
                      class="nav-text">Kortix</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Lorem.space.html"
                    data-label="Tailwind-Designed Websites Misc Lorem.space"><span class="dot"></span><span
                      class="nav-text">Lorem.space</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Mem0.html"
                    data-label="Tailwind-Designed Websites Misc Mem0"><span class="dot"></span><span
                      class="nav-text">Mem0</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/MyMeet.html"
                    data-label="Tailwind-Designed Websites Misc MyMeet"><span class="dot"></span><span
                      class="nav-text">MyMeet</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Naologic.html"
                    data-label="Tailwind-Designed Websites Misc Naologic"><span class="dot"></span><span
                      class="nav-text">Naologic</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Pally.html"
                    data-label="Tailwind-Designed Websites Misc Pally"><span class="dot"></span><span
                      class="nav-text">Pally</span></a>
                  <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/Sites/Qurrent.html"
                    data-label="Tailwind-Designed Websites Misc Qurrent"><span class="dot"></span><span
                      class="nav-text">Qurrent</span></a>
                </div>
              </div>
            </div>
          </div>

          <div class="nav-group" data-label="Chats">
            <button class="nav-group-head" type="button" data-toggle="group">
              <span class="nav-ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"></path>
                </svg>
              </span>
              <span class="nav-text">Chats</span>
              <span class="chev" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 18l6-6-6-6"></path>
                </svg>
              </span>
            </button>
            <div class="nav-group-body">
              <a class="nav-item sub" href="https://caufero.github.io/projects/_Misc/_/_Stuff.html"
                data-label="Chats Jump To Panel"><span class="dot"></span><span class="nav-text">Jump to Chats
                  panel</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/_To%20Dos%20From%20Chats.html"
                data-label="Chats _To Dos From Chats"><span class="dot"></span><span class="nav-text">_To Dos From
                  Chats</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/4K.html"
                data-label="Chats 4K"><span class="dot"></span><span class="nav-text">4K</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/AI.html"
                data-label="Chats AI"><span class="dot"></span><span class="nav-text">AI</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/APIs%20&%20Webhooks.html"
                data-label="Chats APIs & Webhooks"><span class="dot"></span><span class="nav-text">APIs &amp;
                  Webhooks</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Caufero%20.html"
                data-label="Chats Caufero"><span class="dot"></span><span class="nav-text">Caufero</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Deployment.html"
                data-label="Chats Deployment"><span class="dot"></span><span class="nav-text">Deployment</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Design%20UI_UX.html"
                data-label="Chats Design UI_UX"><span class="dot"></span><span class="nav-text">Design UI_UX</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/DEV.html"
                data-label="Chats DEV"><span class="dot"></span><span class="nav-text">DEV</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Discussion.html"
                data-label="Chats Discussion"><span class="dot"></span><span class="nav-text">Discussion</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Files%20Shared.html"
                data-label="Chats Files Shared"><span class="dot"></span><span class="nav-text">Files Shared</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/General.html"
                data-label="Chats General"><span class="dot"></span><span class="nav-text">General</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Goodies%204U.html"
                data-label="Chats Goodies 4U"><span class="dot"></span><span class="nav-text">Goodies 4U</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Javascript%20in%20FileMaker.html"
                data-label="Chats Javascript in FileMaker"><span class="dot"></span><span class="nav-text">Javascript in
                  FileMaker</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/JSON.html"
                data-label="Chats JSON"><span class="dot"></span><span class="nav-text">JSON</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/JS%20In%20FM.html"
                data-label="Chats JS In FM"><span class="dot"></span><span class="nav-text">JS In FM</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Mobile.html"
                data-label="Chats Mobile"><span class="dot"></span><span class="nav-text">Mobile</span></a>
              <a class="nav-item sub"
                href="https://caufero.github.io/projects/Chats/Model%20Context%20Protocol%20(MCP).html"
                data-label="Chats Model Context Protocol (MCP)"><span class="dot"></span><span class="nav-text">Model
                  Context Protocol (MCP)</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/ModularFM.html"
                data-label="Chats ModularFM"><span class="dot"></span><span class="nav-text">ModularFM</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/OData.html"
                data-label="Chats OData"><span class="dot"></span><span class="nav-text">OData</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/OTTO.html"
                data-label="Chats OTTO"><span class="dot"></span><span class="nav-text">OTTO</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Performance.html"
                data-label="Chats Performance"><span class="dot"></span><span class="nav-text">Performance</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Raycast.html"
                data-label="Chats Raycast"><span class="dot"></span><span class="nav-text">Raycast</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/ScriptsCalcs.html"
                data-label="Chats ScriptsCalcs"><span class="dot"></span><span class="nav-text">ScriptsCalcs</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Security%20Items.html"
                data-label="Chats Security Items"><span class="dot"></span><span class="nav-text">Security
                  Items</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Server.html"
                data-label="Chats Server"><span class="dot"></span><span class="nav-text">Server</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/SQL.html"
                data-label="Chats SQL"><span class="dot"></span><span class="nav-text">SQL</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Team%20Meetings.html"
                data-label="Chats Team Meetings"><span class="dot"></span><span class="nav-text">Team
                  Meetings</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/TipsTricksTraps.html"
                data-label="Chats TipsTricksTraps"><span class="dot"></span><span
                  class="nav-text">TipsTricksTraps</span></a>
              <a class="nav-item sub" href="https://caufero.github.io/projects/Chats/Tools.html"
                data-label="Chats Tools"><span class="dot"></span><span class="nav-text">Tools</span></a>
            </div>
          </div>

          <div class="nav-group" data-label="Actions To Automate">
            <button class="nav-group-head" type="button" data-toggle="group">
              <span class="nav-ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 18h6"></path>
                  <path d="M10 22h4"></path>
                  <path d="M12 2a7 7 0 0 0-4 12c.6.5 1 1.2 1.1 2h5.8c.1-.8.5-1.5 1.1-2A7 7 0 0 0 12 2z"></path>
                </svg>
              </span>
              <span class="nav-text">Actions To Automate</span>
              <span class="chev" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 18l6-6-6-6"></path>
                </svg>
              </span>
            </button>
            <div class="nav-group-body">
              <a class="nav-item sub" href="#actions" data-label="Actions To Automate Jump To Panel"><span
                  class="dot"></span><span class="nav-text">Jump to Actions panel</span></a>
            </div>
          </div>

          <div class="nav-group" data-label="YouTube">
            <button class="nav-group-head" type="button" data-toggle="group">
              <span class="nav-ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M10 15l5-3-5-3z"></path>
                  <rect x="3" y="6" width="18" height="12" rx="2"></rect>
                </svg>
              </span>
              <span class="nav-text">YouTube</span>
              <span class="chev" aria-hidden="true">
                <svg viewBox="0 0 24 24" class="ico sm" fill="none" stroke="currentColor" stroke-width="2"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path d="M9 18l6-6-6-6"></path>
                </svg>
              </span>
            </button>
            <div class="nav-group-body">
              <a class="nav-item sub" href="#youtube" data-label="YouTube Jump To Panel"><span class="dot"></span><span
                  class="nav-text">Jump to YouTube panel</span></a>
              <a class="nav-item sub" href="#yt-ghana" data-label="YouTube Ghana Anchors"><span class="dot"></span><span
                  class="nav-text">Open Ghana list</span></a>
              <a class="nav-item sub" href="#yt-sports" data-label="YouTube Sports Anchors"><span
                  class="dot"></span><span class="nav-text">Open Sports list</span></a>
              <a class="nav-item sub" href="#yt-babies" data-label="YouTube Babies Anchors"><span
                  class="dot"></span><span class="nav-text">Open Babies &amp; Animals list</span></a>
              <a class="nav-item sub" href="#yt-tea" data-label="YouTube Streamer Tea Anchors"><span
                  class="dot"></span><span class="nav-text">Open Streamer Tea list</span></a>
              <a class="nav-item sub" href="#yt-politics" data-label="YouTube Politics Anchors"><span
                  class="dot"></span><span class="nav-text">Open Politics list</span></a>
            </div>
          </div>

        </nav>

        <div class="rail-bottom">
          <div class="rail-foot">
            <span class="rail-foot-dot" aria-hidden="true"></span>
            <span>Fixed menu • scroll inside</span>
          </div>
        </div>
      </aside>

      <main class="content" id="content">
        <div class="content-inner">
          <section class="hero">
            <div class="hero-glow"></div>
            <div class="hero-inner">
              <div class="hero-top">
                <div class="hero-title">Generating a Details Page (CauferoAppStarter)</div>
                <div class="hero-sub">Complete reference for building a Details Page script in CauferoAppStarter — CSS skeleton, canonical script order, record creation contract, save logic, all field types, and UI controls that belong in a details page.</div>
              </div>
              <div class="hero-meta">
                <span class="chip">FileMaker</span>
                <span class="chip violet">WebViewer UI</span>
                <span class="chip amber">Details Page Script</span>
                <span class="chip teal">Field Types</span>
                <span class="chip copper">Save Logic</span>
              </div>
            </div>
          </section>

          <section class="card section" id="dp-theme-arch">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">⚠️</span>
                <span>CSS &amp; Theme Architecture — How It Works in Every Details Page</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Key Rule: The Details Page Script Never Writes Its Own CSS</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ &lt;Entity&gt; Details Page</code> script <strong style="font-weight:600;color:#0f172a;">never contains its own CSS</strong>. It always delegates CSS generation to a dedicated FileMaker script and receives the result back as a variable.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is a hard architectural rule across CauferoAppStarter. Every details page follows the same pattern:</p>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">The CSS Delegation Call (Always Present)</h3>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ "🖌️ Use Details CSS" ]
Set Variable [ $styles ; Value: Get ( ScriptResult ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This call appears in the CSS Generation step (Step 4) of every details page script, without exception. After this call, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$styles</code> holds the full CSS string for the page. The details page then injects it directly into the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;style&gt;</code> block of the HTML document it is building.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">What <code style="font-size:inherit;">🖌️ Use Details CSS</code> Does</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">🖌️ Use Details CSS</code> is a dedicated FileMaker script that:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Reads the global variable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Theme</code>, which holds the name of the currently active app theme (e.g. <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">"Blue Classic"</code>).</li>
<li style="margin-bottom:8px;padding-left:8px;">Branches on <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Theme</code> using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">If / Else If / End If</code> — each branch holds the full canonical CSS skeleton for that theme with its own values.</li>
<li style="margin-bottom:8px;padding-left:8px;">Sets <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$styles</code> to the matching full CSS string.</li>
<li style="margin-bottom:8px;padding-left:8px;">Exits with: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Exit Script [ Text Result: $styles ]</code></li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The calling details page script never needs to know which theme is active — it simply receives the correct CSS and moves on.</p>

<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);"># Inside 🖌️ Use Details CSS:

If [ $$Theme = "Blue Classic" ]
  Set Variable [ $styles ; Value: "/* full CSS for Blue Classic */" ]
Else If [ $$Theme = "Dark Pro" ]
  Set Variable [ $styles ; Value: "/* full CSS for Dark Pro */" ]
Else If [ $$Theme = "Soft Green" ]
  Set Variable [ $styles ; Value: "/* full CSS for Soft Green */" ]
End If

Exit Script [ Text Result: $styles ]</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">The <code style="font-size:inherit;">$$Theme</code> Global Variable</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Theme</code> is a session-level global set once during app startup (by the <strong style="font-weight:600;color:#0f172a;">Startup</strong> script) and held for the entire user session. It is never set inside a details page script.</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Set by:</strong> The Startup script, based on the app's configured theme preference.</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Consumed by:</strong> <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">🖌️ Use Details CSS</code> (and the equivalent scripts for List Pages, Modal Pages, etc.).</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Scope:</strong> Because it is a <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$</code> global, it is available to every script in the solution without being passed as a parameter.</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Effect:</strong> Every details page rendered in a session automatically uses the same selected theme — the visual identity is consistent across the entire app.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">One Theme Per App Session — All Details Pages Look the Same</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Because every details page calls <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">🖌️ Use Details CSS</code> and all calls read the same <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Theme</code> value, <strong style="font-weight:600;color:#0f172a;">every single details page in a running session is styled identically</strong>. Changing the theme in one place (the Startup script or a settings screen) changes all pages automatically — no individual page script needs to be touched.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This design means:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The CSS skeleton is defined once per theme, in one script.</li>
<li style="margin-bottom:8px;padding-left:8px;">Individual details page scripts are theme-agnostic — they just inject whatever <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( ScriptResult )</code> returns.</li>
<li style="margin-bottom:8px;padding-left:8px;">Adding a new theme only requires adding a new <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Else If</code> branch in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">🖌️ Use Details CSS</code> — no changes to any page script.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Optional: Appending Extra CSS After the Base</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A details page can append extra CSS after the base call, for page-specific widget needs (charts, dashboard card overrides, etc.):</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ "🖌️ Use Details CSS" ]
Set Variable [ $styles ; Value: Get ( ScriptResult ) ]

# Append page-specific overrides:
Set Variable [ $styles ; Value:
  $styles &
  "
    #chart-container { width: 100%; height: 200px; padding: 10px; box-sizing: border-box; }
    canvas { width: 100% !important; height: 100% !important; }
  "
]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The base theme CSS always comes first. Page-specific rules are appended after. This keeps the canonical skeleton intact and the theme in control of all core visual identity.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Summary: The Relationship Between Scripts</h3>
<table style="width:100%;border-collapse:collapse;margin:16px 0;font-size:14px;">
  <thead>
    <tr style="background-color:#f8fafc;">
      <th style="padding:10px 14px;text-align:left;border:1px solid #e5e7eb;font-weight:600;color:#0f172a;">Script</th>
      <th style="padding:10px 14px;text-align:left;border:1px solid #e5e7eb;font-weight:600;color:#0f172a;">Responsibility</th>
      <th style="padding:10px 14px;text-align:left;border:1px solid #e5e7eb;font-weight:600;color:#0f172a;">Knows About Theme?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="padding:10px 14px;border:1px solid #e5e7eb;font-family:ui-monospace,monospace;font-size:12px;color:#0f172a;">Startup</td>
      <td style="padding:10px 14px;border:1px solid #e5e7eb;color:#374151;">Sets <code style="background-color:#f1f5f9;padding:1px 6px;border-radius:3px;font-family:ui-monospace,monospace;font-size:12px;">$$Theme</code> once at session start</td>
      <td style="padding:10px 14px;border:1px solid #e5e7eb;color:#374151;font-weight:600;">✅ Yes — it sets it</td>
    </tr>
    <tr style="background-color:#f8fafc;">
      <td style="padding:10px 14px;border:1px solid #e5e7eb;font-family:ui-monospace,monospace;font-size:12px;color:#0f172a;">🖌️ Use Details CSS</td>
      <td style="padding:10px 14px;border:1px solid #e5e7eb;color:#374151;">Branches on <code style="background-color:#f1f5f9;padding:1px 6px;border-radius:3px;font-family:ui-monospace,monospace;font-size:12px;">$$Theme</code>, returns full CSS string</td>
      <td style="padding:10px 14px;border:1px solid #e5e7eb;color:#374151;font-weight:600;">✅ Yes — it reads it</td>
    </tr>
    <tr>
      <td style="padding:10px 14px;border:1px solid #e5e7eb;font-family:ui-monospace,monospace;font-size:12px;color:#0f172a;">+++ &lt;Entity&gt; Details Page</td>
      <td style="padding:10px 14px;border:1px solid #e5e7eb;color:#374151;">Calls <code style="background-color:#f1f5f9;padding:1px 6px;border-radius:3px;font-family:ui-monospace,monospace;font-size:12px;">🖌️ Use Details CSS</code>, injects <code style="background-color:#f1f5f9;padding:1px 6px;border-radius:3px;font-family:ui-monospace,monospace;font-size:12px;">$styles</code> into HTML</td>
      <td style="padding:10px 14px;border:1px solid #e5e7eb;color:#374151;">❌ No — theme-agnostic</td>
    </tr>
  </tbody>
</table>

            </div>
          </section>

          <section class="card section" id="dp-css">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">🎨</span>
                <span>Details Pages CSS Generator (CauferoAppStarter)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Purpose</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This document defines the canonical CSS skeleton for Details Pages in CauferoAppStarter.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A “Details Page” is any WebViewer page that shows one selected record, plus:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A left summary column (image, status, key fields, buttons)</li>
<li style="margin-bottom:8px;padding-left:8px;">A right content column (tabs, forms, subtables, widgets)</li>
<li style="margin-bottom:8px;padding-left:8px;">Optional components like wizards, master-detail panels, hierarchical scoring tables, reports, vitals grids, and empty states</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI agent must generate new Details Page themes by changing CSS values only, while keeping the same selectors and the same property names.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Script Context</h3>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Input: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Theme</code> (or your theme selector variable)</li>
<li style="margin-bottom:8px;padding-left:8px;">Output: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$styles</code> (full CSS stylesheet string)</li>
<li style="margin-bottom:8px;padding-left:8px;">Script ends with: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Exit Script [ Text Result: $styles ]</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Hard Rules (CSS Contract)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When creating a new Details Page theme:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Keep the exact same selectors.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Keep the exact same property names under each selector.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Change values only.
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Never:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">add selectors</li>
<li style="margin-bottom:8px;padding-left:8px;">remove selectors</li>
<li style="margin-bottom:8px;padding-left:8px;">rename selectors</li>
<li style="margin-bottom:8px;padding-left:8px;">add properties</li>
<li style="margin-bottom:8px;padding-left:8px;">remove properties</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a requested visual change would require new selectors or new properties, do not implement it. Achieve the best possible result using value changes only.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Details Page Layout Model</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The page is built around a fixed, full-viewport container split into two columns:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Left: Summary Section (25%)</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-section</code> + <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-card</code></li>
<li style="margin-bottom:4px;">Status badge, image, key fields, QR code</li>
<li style="margin-bottom:4px;">Buttons at the bottom (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">save</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">cancel</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">third</code>, and color variants)</li>
<li style="margin-bottom:4px;">Optional “summary cards” above buttons</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Right: Content Section (75%)</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.content-section</code> + <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.tabs</code> + <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.content</code></li>
<li style="margin-bottom:4px;">Form grids (1–4 columns)</li>
<li style="margin-bottom:4px;">Inputs, selects, textarea, checkbox group</li>
<li style="margin-bottom:4px;">Subtables, accordions, alerts, breadcrumbs</li>
<li style="margin-bottom:4px;">Optional components (wizard, report layout, master-details, hierarchical scoring table, vitals grid)</li>
<li style="margin-bottom:4px;">Optional empty-state message container</li>
</ul>
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">All scrolling must be internal (inside cards or content blocks). The viewport must not scroll.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Canonical Details Page CSS Skeleton (Source Of Truth)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI must copy this skeleton exactly for every theme and change values only.</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">/* General reset and body styling */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
}

body {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #f3f4f6;
  height: 100vh;
  padding: 20px;
  overflow: hidden;
}

/* ===== Theming tokens (updated for theme) ===== */
:root {
  --accent: #007bff;
  --accent-light: #66b2ff;
  --accent-strong: #0056b3;
  --row-hover-bg: #e9eef2;
  --row-selected-bg: #d1e7ff;
}

/* Main container styling */
.container {
  width: auto;
  height: auto;
  position: fixed;
  inset: 0;
  margin: 20px !important;
  display: flex;
  padding: 20px;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

/* Left section styling (Summary) */
.summary-section {
  width: 25%;
  padding-right: 20px;
  border-right: 1px solid #e0e0e0;
}

.summary-card {
  background: #edf7ff;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
}

.summary-content {
  overflow-y: auto;
  padding-right: 10px;
  height: calc(100% - 120px);
}

.summary-card h2 {
  font-size: 18px;
  color: #333;
  text-align: center;
  margin-bottom: 20px;
}

.summary-info {
  font-size: 13px;
  color: #333;
  line-height: 1.4;
}

.summary-info p {
  margin: 5px 0;
}

.summary-info strong {
  color: #007BB0;
  font-weight: 600;
}

.summary-image {
  width: 100%;
  height: 200px;
  object-fit: contain;
  background: black;
  margin-bottom: 15px;
  display: block;
  border-radius: 8px;
  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
}

/* Status Badge Styling */
.status-badge {
  display: inline-block;
  margin: auto;
  margin-top: 0px;
  margin-bottom: 5px;
  padding: 5px 10px;
  font-size: 12px;
  font-weight: bold;
  color: white;
  border-radius: 12px;
  text-align: center;
  width: fit-content;
}

.status-badge.gray { background-color: #6c757d; }
.status-badge.yellow { background-color: #007BFF; }
.status-badge.green { background-color: #28a745; }
.status-badge.red { background-color: #dc3545; }

.qr-code {
  width: 80px;
  height: auto;
  margin: 15px auto;
  display: block;
}

.section-title {
  font-size: 16px;
  margin-top: 15px;
  font-weight: bold;
}

/* Line styling */
hr {
  border: none;
  border-top: 1px solid #ddd;
  margin-top: auto;
  margin-bottom: 10px;
}

/* Button styling */
.button-container {
  margin-top: 10px;
  display: flex;
  justify-content: center;
  gap: 10px;
}

.save-button,
.cancel-button,
.third-button,
.button_red,
.button_green,
.button_blue,
.button_yellow,
.button_purple {
  padding: 10px 15px;
  font-size: 13px;
  font-weight: 500;
  width: 50%;
  height: 40px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  color: white;
  transition: background-color 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
}

.save-button { background-color: #28a745; }
.save-button:hover { background-color: #218838; }

.cancel-button { background-color: #dc3545; }
.cancel-button:hover { background-color: #c82333; }

/* Third Button Styling */
.third-button {
  background-color: #007BFF;
  width: 100%;
  margin-top: 10px;
}
.third-button:hover { background-color: #0056b3; }

/* Add Another Item Button */
.add-another-item-button {
  background-color: #007bff;
  color: white;
  padding: 10px 15px;
  font-size: 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.3s;
  margin-top: 15px;
  width: fit-content;
  display: flex;
  align-items: center;
  gap: 5px;
}
.add-another-item-button:hover { background-color: #0056b3; }

.button1 {
  background-color: #FF9800;
  color: #fff;
  padding: 10px 15px;
  font-size: 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.3s;
  margin-top: 15px;
  width: fit-content;
  display: flex;
  align-items: center;
  gap: 5px;
}
.button1:hover { background-color: #F57C00; }

.button_red { background-color: #FF4C4C; }
.button_red:hover { background-color: #D43A3A; }

.button_green { background-color: #33CC99; }
.button_green:hover { background-color: #29A87C; }

.button_blue { background-color: #6699FF; }
.button_blue:hover { background-color: #4C7AD6; }

.button_yellow { background-color: #FFD700; }
.button_yellow:hover { background-color: #D4B200; }

.button_purple { background-color: #B266FF; }
.button_purple:hover { background-color: #8A4CD6; }

.save-button_,
.cancel-button_,
.third-button_,
.button_red_,
.button_green_,
.button_blue_,
.button_yellow_,
.button_purple_ {
  padding: 10px 15px;
  font-size: 13px;
  font-weight: 500;
  width: 50%;
  height: 40px;
  border-radius: 6px;
  cursor: pointer;
  background-color: transparent;
  border: 2px solid;
  color: inherit;
  transition: color 0.3s, border-color 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
}

/* Outline variants */
.save-button_ { color: #28a745; border-color: #28a745; }
.save-button_:hover { color: #218838; border-color: #218838; }

.cancel-button_ { color: #dc3545; border-color: #dc3545; }
.cancel-button_:hover { color: #c82333; border-color: #c82333; }

.third-button_ {
  color: #007BFF;
  border-color: #007BFF;
  width: 100%;
  margin-top: 10px;
}
.third-button_:hover { color: #0056b3; border-color: #0056b3; }

.button_red_ { color: #FF4C4C; border-color: #FF4C4C; }
.button_red_:hover { color: #D43A3A; border-color: #D43A3A; }

.button_green_ { color: #33CC99; border-color: #33CC99; }
.button_green_:hover { color: #29A87C; border-color: #29A87C; }

.button_blue_ { color: #6699FF; border-color: #6699FF; }
.button_blue_:hover { color: #4C7AD6; border-color: #4C7AD6; }

.button_yellow_ { color: #FFD700; border-color: #FFD700; }
.button_yellow_:hover { color: #D4B200; border-color: #D4B200; }

.button_purple_ { color: #B266FF; border-color: #B266FF; }
.button_purple_:hover { color: #8A4CD6; border-color: #8A4CD6; }

/* Right section styling (Tabs and content) */
.content-section {
  width: 75%;
  padding-left: 20px;
  display: flex;
  flex-direction: column;
  overflow-y: hidden;
  height: 100%;
}

.tabs {
  display: flex;
  border-bottom: 2px solid #e0e0e0;
  margin-bottom: 10px;
}

.tab {
  padding: 10px 20px;
  font-size: 14px;
  color: #555;
  cursor: pointer;
  border-bottom: 3px solid transparent;
  position: relative;
  transition: color 0.2s ease, border-bottom 0.2s ease;
}

.tab.active {
  color: #1e293b;
  font-weight: 600;
  border-bottom-color: #1e293b;
}

/* Badge styling */
.tab.badge-tab::after {
  content: &#x27;5&#x27;;
  position: absolute;
  top: -5px;
  right: 5px;
  background-color: #dc3545;
  color: white;
  font-size: 12px;
  font-weight: bold;
  padding: 3px 6px;
  border-radius: 50%;
  box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.2);
}

.content {
  padding: 10px 0;
  display: none;
  overflow-y: auto;
  max-height: 100%;
}

.content h3 {
  font-size: 16px;
  font-weight: 500;
  color: #333;
  margin-bottom: 5px;
}

.content p {
  color: #666;
  font-size: 14px;
  line-height: 1.5;
  margin-bottom: 15px;
}

.form-grid1 { display: grid; grid-template-columns: repeat(1, 1fr); gap: 15px; }
.form-grid2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
.form-grid3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
.form-grid4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }

.form-group { margin-bottom: 15px; }
.form-group-2 { margin-bottom: 15px; padding: 0 20px; }

/* Instruction Styling */
.instructions1 {
  background: #e3f2fd;
  padding: 10px;
  padding-left: 30px;
  padding-right: 30px;
  border-left: 5px solid #007BFF;
  margin-bottom: 15px;
  border-radius: 5px;
  position: relative;
  font-size: 14px;
}
.instructions2 {
  background: #f3e5f5;
  padding: 10px;
  padding-left: 30px;
  padding-right: 30px;
  border-left: 5px solid #8E24AA;
  margin-bottom: 15px;
  border-radius: 5px;
  position: relative;
  font-size: 14px;
}
.instructions3 {
  background: #e8f5e9;
  padding: 10px;
  padding-left: 30px;
  padding-right: 30px;
  border-left: 5px solid #28a745;
  margin-bottom: 15px;
  border-radius: 5px;
  position: relative;
  font-size: 14px;
}

.instructions1 h2,
.instructions2 h2,
.instructions3 h2 {
  color: #333;
  font-size: 15px;
  margin-bottom: 5px;
}

label {
  font-size: 14px;
  font-weight: 500;
  color: #333;
  display: block;
  margin-bottom: 5px;
}

input[type=&#x27;text&#x27;]:not(.combined-inputs-input),
input[type=&#x27;file&#x27;]:not(.combined-inputs-input),
input[type=&#x27;number&#x27;]:not(.combined-inputs-input),
input[type=&#x27;email&#x27;]:not(.combined-inputs-input),
input[type=&#x27;date&#x27;]:not(.combined-inputs-input),
textarea {
  width: 100%;
  height: 38px;
  padding: 10px;
  font-size: 14px;
  color: #333;
  border: 1px solid #ddd;
  border-radius: 5px;
  outline: none;
  background-color: #f9f9f9;
}

textarea {
  height: 150px;
  resize: none;
}

/* Dropdown Styling */
select:not(.combined-inputs-dropdown) {
  width: 100%;
  height: 38px;
  padding: 10px;
  font-size: 14px;
  color: #333;
  border: 1px solid #ddd;
  border-radius: 5px;
  outline: none;
  appearance: none;
  background-image: url(&#x27;https://img.playbook.com/EiJ_h1h3ku1Tk5o2UUdY2GR36EdGRYp_FFrAGJtJ9BA/Z3M6Ly9wbGF5Ym9v/ay1hc3NldHMtcHVi/bGljLzU5ZmU3Zjk4/LTliMWEtNDZjYy1h/MTA4LWQ5ODI4YmJl/ZDZlZQ&#x27;);
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 10px;
}

/* Container for the Checkbox Group */
.checkbox-group {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(30px, 1fr));
  padding: 15px;
  border: 1px solid #E0E0E0;
  border-radius: 8px;
  background-color: #F9FAFB;
  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);
  margin-top: 10px;
  font-family: Arial, sans-serif;
}

.sub-table-container {
  border: 1px solid #ddd;
  border-radius: 0px;
  overflow-y: auto;
}

/* Another Item Table */
.sub-table { width: 100%; border-collapse: collapse; }
.sub-table th,
.sub-table td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: left;
  font-size: 12px;
}
.sub-table th { background-color: #f2f2f2; font-weight: bold; }
.sub-table tr:nth-child(even) { background-color: #f9f9f9; }

/* Specific column widths */
.sub-table-column-style1 { width: 30%; }
.sub-table-column-style2 { width: 15%; }
.sub-table-column-style3 { width: 10%; }
.sub-table-column-style4 { width: 5%; }

.sub_table_footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 10px;
}

/* Sub Table Footer Styling */
.sub_table_footer .total {
  font-size: 18px;
  font-weight: bold;
  color: #dc3545;
}

.sub-table td img {
  width: 50px;
  height: 50px;
  object-fit: cover;
}

.icon-group {
  display: flex;
  gap: 15px;
  justify-content: center;
  align-items: center;
}

.view-icon {
  color: #007BFF;
  font-size: 16px;
  cursor: pointer;
  transition: color 0.3s;
}
.view-icon:hover { color: #0056b3; }

.edit-icon, .delete-icon {
  font-size: 16px;
  cursor: pointer;
  transition: color 0.3s;
}

.edit-icon { color: #8E24AA; }
.edit-icon:hover { color: #6A1B9A; }

.delete-icon { color: #dc3545; }
.delete-icon:hover { color: #c82333; }

/* Accordion */
.accordion-container { margin-top: 10px; }
.accordion { border: 1px solid #ddd; border-radius: 5px; margin-bottom: 10px; }
.accordion-header {
  padding: 10px;
  background: #f2f2f2;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 500;
}
.accordion-header:hover { background: #e0e0e0; }
.accordion-content { padding: 10px; display: none; background: #fafafa; }

/* Improved Inline Alert */
.alert {
  padding: 15px 20px;
  background-color: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
  border-radius: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
  font-weight: 500;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  margin-bottom: 15px;
}
.alert-title { font-weight: bold; margin-right: 10px; }
.alert i { cursor: pointer; color: #721c24; }
.alert i:hover { color: #491116; }

/* Breadcrumbs Styles */
.breadcrumbs {
  display: flex;
  align-items: center;
  padding: 10px 20px;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
  position: relative;
  margin-bottom: 20px;
}
.breadcrumbs::before {
  content: &#x27;&#x27;;
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 8px;
  background: linear-gradient(135deg, #4a90e2, #50e3c2);
  border-radius: 10px 10px 0 0;
  z-index: -1;
}
.breadcrumbs a {
  text-decoration: none;
  color: #4a90e2;
  padding: 10px 15px;
  border-radius: 5px;
  position: relative;
  transition: background-color 0.3s, color 0.3s;
  display: flex;
  align-items: center;
}
.breadcrumbs a:hover { background-color: rgba(74, 144, 226, 0.1); color: #007BFF; }
.breadcrumbs a::after {
  content: &#x27;&gt;&#x27;;
  margin-left: 10px;
  margin-right: 10px;
  color: #aaa;
  font-weight: bold;
}
.breadcrumbs a:last-child::after { content: &#x27;&#x27;; }
.current {
  color: #555;
  font-weight: bold;
  pointer-events: none;
  position: relative;
  z-index: 1;
}
.icon { margin-right: 5px; font-size: 18px; transition: transform 0.3s; }
.breadcrumbs a:hover .icon { transform: scale(1.2); }

/* Example icon styles - using Font Awesome */
.fa-home:before { content: &#x27;\f015&#x27;; }
.fa-folder:before { content: &#x27;\f07b&#x27;; }
.fa-file:before { content: &#x27;\f15b&#x27;; }
.fa-chevron-right:before { content: &#x27;\f054&#x27;; }

/* Custom Sign-Up Button for Tab 4 */
.big_button {
  display: flex;
  align-items: center;
  background-color: #4A90E2;
  color: white;
  font-size: 16px;
  font-weight: bold;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  margin-top: 15px;
}
.big_button span { margin-right: 10px; }
.divider { height: 24px; width: 1px; background-color: white; margin: 0 10px; }
.checkmark { font-size: 16px; }

/* Basic styling for the iframe container */
.map-container {
  display: flex;
  justify-content: center;
  align-items: top;
  align-items: left;
}
iframe {
  width: 100%;
  height: 100%;
  border: none;
  border-radius: 8px;
  box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
}

/* Gallery Styles */
.gallery-container { width: 45%; margin-left: 30px; }
.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 10px;
}
.gallery-item {
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}
.gallery-item img {
  width: 100%;
  height: 100px;
  object-fit: cover;
  transition: transform 0.3s ease;
}
.gallery-item:hover img { transform: scale(1.05); }
.gallery-item .caption {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  background: rgba(0, 0, 0, 0.6);
  color: white;
  text-align: center;
  padding: 5px 0;
  font-size: 12px;
  display: none;
}
.gallery-item:hover .caption { display: block; }

/* Message container */
.message-container {
  text-align: center;
  padding: 50px 60px;
  animation: fadeIn 0.8s ease-out forwards;
  width: 700px;
  max-width: 100%;
  color: var(--accent-strong, #0056b3);
  background: #ffffff;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  border-radius: 16px;
  margin: auto;
}

/* Headline */
.message-container h1 {
  font-size: 20px;
  color: #333;
  margin-bottom: 10px;
  animation: slideInDown 0.8s ease-out;
}

/* Paragraph */
.message-container p {
  font-size: 14px;
  color: #555;
  margin-bottom: 20px;
  animation: slideInUp 1s ease-out;
}

/* SVG icon */
.message-container .svg-icon {
  width: 100px;
  height: 100px;
  margin-bottom: 40px;
  display: block;
  margin-left: auto;
  margin-right: auto;
  fill: currentColor;
  stroke: currentColor;
  color: var(--accent, #007bff) !Important;
  animation: fadeInZoom 1s ease-out;
  transition: color 0.3s ease, transform 0.2s ease;
}
.message-container .svg-icon:hover { color: var(--accent-strong, #0056b3); transform: scale(1.04); }

/* Button */
.cta-btn {
  display: inline-block;
  margin-top: 20px;
  padding: 14px 30px;
  font-size: 16px;
  font-weight: 600;
  color: #ffffff;
  background: linear-gradient(135deg, var(--accent, #007bff), var(--accent-strong, #0056b3));
  border: none;
  border-radius: 8px;
  cursor: pointer;
  text-decoration: none;
  transition: background 0.3s ease, transform 0.2s ease;
}
.cta-btn:hover {
  background: linear-gradient(135deg, var(--accent-strong, #0056b3), var(--accent, #007bff));
  transform: translateY(-2px);
}

@keyframes fadeIn {
  0% { opacity: 0; transform: translateY(20px); }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes fadeInZoom {
  0% { opacity: 0; transform: scale(0.8); }
  100% { opacity: 1; transform: scale(1); }
}
@keyframes slideInDown {
  0% { opacity: 0; transform: translateY(-20px); }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes slideInUp {
  0% { opacity: 0; transform: translateY(20px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* Row and Card Styling */
.cards_row { display: flex; gap: 20px; margin-top: 10px; }
.note-card {
  flex: 1;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
  background-color: #e0f7fa;
  display: flex;
  flex-direction: column;
}
.note-header {
  font-weight: bold;
  margin-bottom: 10px;
  font-size: 16px;
  display: flex;
  justify-content: space-between;
}
.note-content { flex-grow: 1; overflow-y: auto; max-height: 300px; }
.note-content ul { list-style-type: none; padding: 0; margin: 0; }
.note-content li {
  padding: 10px;
  margin: 10px 0;
  background-color: #ffffff;
  border-radius: 6px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s;
}
.note-content li:hover { transform: scale(1.02); }
.note-content button {
  background: transparent;
  border: none;
  font-size: 18px;
  color: #007bff;
  cursor: pointer;
}
.note-content button:hover { color: #0056b3; }

/* Rating */
.rating {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 5px;
  direction: rtl;
}
.rating input { display: none; }
.rating label {
  font-size: 30px;
  color: #ddd;
  cursor: pointer;
  transition: color 0.3s;
}
.rating label:hover,
.rating label:hover ~ label { color: #ffc107; }
.rating input:checked ~ label { color: #ffc107; }
.rating input:checked + label:hover,
.rating input:checked + label:hover ~ label { color: #ffab00; }
.rating label:hover ~ label { color: #ddd; }

/* Wizard */
.wizard-container {
  width: 100%;
  display: flex;
  flex-direction: column;
  background-color: #fff;
  border-radius: 12px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}
.stepper {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 30px;
  background: linear-gradient(135deg, #007bff, #4c9fff);
  color: #fff;
  position: relative;
}
.step { text-align: center; flex: 1; position: relative; margin-bottom: -25px; }
.step .icon {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background-color: #e0e0e0;
  color: #007bff;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 18px;
  font-weight: bold;
  margin: 0 auto 8px;
  transition: background-color 0.3s ease, color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}
.step.active .icon {
  background-color: #fff;
  color: #007bff;
  border: 2px solid #007bff;
  transform: scale(1.2);
  box-shadow: 0 0 10px 3px rgba(0, 123, 255, 0.6);
}
.step .line {
  position: absolute;
  top: 25px;
  left: 50%;
  width: 100%;
  height: 4px;
  background-color: #e0e0e0;
  z-index: -1;
  transition: background-color 0.3s ease;
}
.step.active + .line { background-color: #fff; }
.step p { font-size: 14px; font-weight: bold; margin-top: 8px; color: #fff; }

.step-wizard_content { display: none; }
.step-wizard_content.active { display: block; }

.wizard_content {
  padding: 20px;
  animation: fadeIn 0.3s ease;
  flex: 1;
  overflow-y: auto;
}
.wizard_content &gt; .step-wizard_content &gt; div.table-top-legend { display: flex !important; }
.wizard_content div.active { display: block; }

.wizard_buttons {
  display: flex;
  justify-content: space-between;
  padding: 20px;
  background-color: #f9f9f9;
}
.wizard_button {
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  background-color: #007bff;
  color: #fff;
  cursor: pointer;
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
}
.wizard_button:hover {
  background-color: #0056b3;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}
.wizard_button:disabled {
  background-color: #ccc;
  cursor: not-allowed;
  box-shadow: none;
}

/* Toggles */
.toggle-container { display: flex; align-items: center; gap: 10px; font-size: 16px; color: #333; }
.toggle-switch { display: inline-block; width: 50px; height: 25px; position: relative; }
.toggle-switch input { opacity: 0; width: 0; height: 0; }
.slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: #ccc;
  border-radius: 25px;
  transition: background-color 0.3s;
}
.slider::before {
  content: &#x27;&#x27;;
  position: absolute;
  height: 21px; width: 21px;
  left: 2px; bottom: 2px;
  background-color: white;
  border-radius: 50%;
  transition: transform 0.3s;
}
input:checked + .slider { background-color: #4caf50; }
input:checked + .slider::before { transform: translateX(25px); }
.status { font-weight: bold; }

/* Segmented Control */
.segmented-control {
  display: flex;
  background-color: #ddd;
  border-radius: 5px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  width: 100%;
  height: 38px;
}
.segmented-control button {
  flex: 1;
  padding: 10px 20px;
  background-color: transparent;
  border: none;
  outline: none;
  cursor: pointer;
  font-size: 16px;
  color: #333;
  transition: background-color 0.3s, color 0.3s;
}
.segmented-control button.active { background-color: #4caf50; color: white; }
.segmented-control button:not(:last-child) { border-right: 1px solid #ccc; }
.segmented-control button:hover { background-color: #bfbfbf; }

/* Report */
.report_header {
  border-bottom: 2px solid #d6d6d6;
  padding-bottom: 15px;
  margin-bottom: 25px;
  text-align: center;
  font-family: Arial, sans-serif;
}
.report_header .company-info { font-size: 14px; color: #555; margin-bottom: 10px; }
.report_header .title { font-size: 20px; font-weight: bold; color: #1e293b; text-transform: uppercase; }
.report_header .date { font-size: 14px; color: #666; }

.report_table {
  width: 100%;
  border-collapse: collapse;
  margin: 15px 0;
  font-size: 13px;
  color: #333;
}
.report_table th,
.report_table td {
  border: 1px solid #e0e0e0;
  padding: 8px 12px;
  text-align: left;
}
.report_table th {
  background-color: #edf7ff;
  font-weight: bold;
  color: #2c3e50;
  text-transform: uppercase;
  font-size: 13px;
}
.report_cell_highlight { font-weight: bold; color: #2c3e50; }
.report_table_footer { text-align: right; margin-top: 25px; font-size: 16px; font-weight: bold; color: #444; }
.report_table_footer span { color: #28a745; }

.report_footer {
  text-align: center;
  font-size: 13px;
  color: #555;
  padding: 20px 0;
  background-color: #f7f9f9;
  border-top: 1px solid #e0e0e0;
}
.report_footer p { margin: 0px 0; }
.report_footer a { color: #007BFF; text-decoration: none; font-weight: bold; }
.report_footer a:hover { text-decoration: underline; }

/* Grid Numbers */
.grid-numbers-container {
  display: grid;
  margin-top: 20px;
  gap: 10px;
  justify-content: center;
  align-items: center;
}
.grid-number {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #007BFF;
  color: #fff;
  font-size: 1.5rem;
  height: 60px;
  width: 60px;
  border-radius: 6px;
  border: 1px solid #0056B3;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s ease, transform 0.2s ease;
}
.grid-number:hover { background-color: #0056B3; transform: scale(1.05); }

/* Image + Text Grid */
.imagetext-grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(25%, 1fr));
  gap: 20px;
  padding: 20px;
  width: 100%;
  max-width: 100%;
}
.imagetext-grid-item {
  display: flex;
  align-items: center;
  padding: 8px;
  border-radius: 6px;
  background: linear-gradient(135deg, #ffffff, #e9ebef);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  cursor: pointer;
}
.imagetext-grid-item:hover { box-shadow: 0 6px 10px rgba(0, 0, 0, 0.1); }
.imagetext-grid-photo {
  flex-shrink: 0;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  overflow: hidden;
  margin-right: 10px;
  border: 2px solid #007bff;
}
.imagetext-grid-photo img { width: 100%; height: 100%; object-fit: cover; }
.imagetext-grid-info { display: flex; flex-direction: column; gap: 2px; }
.imagetext-grid-info1 { font-size: 0.85rem; font-weight: bold; color: #1e293b; }
.imagetext-grid-info2 { font-size: 0.75rem; color: #4b5563; }
.imagetext-grid-info3 { font-size: 0.7rem; color: #374151; }
.email {
  font-size: 0.75rem;
  color: #2563eb;
  text-decoration: none;
  transition: color 0.2s ease;
  word-break: break-word;
}
.email:hover { color: #1d4ed8; text-decoration: underline; }

/* Combined Inputs */
.combined-inputs-container {
  width: 100%;
  height: 38px;
  padding: 10px;
  font-size: 14px;
  color: #333;
  border: 1px solid #ddd;
  border-radius: 5px;
  outline: none;
  background-color: #f9f9f9;
  display: flex;
  align-items: center;
  box-sizing: border-box;
}
.combined-inputs-input {
  border: none;
  outline: none;
  text-align: center;
  font-size: 14px;
  background-color: transparent;
  color: #333;
}
.combined-inputs-dropdown {
  padding: 10px;
  border: none;
  outline: none;
  font-size: 12px;
  text-align: center;
  color: #333;
  background-color: transparent;
  appearance: none;
}

/* Flatpickr Top Banner Styling */
.flatpickr-months { display: flex; align-items: center; justify-content: center; padding: 8px 0; gap: 12px; }
.flatpickr-current-month { display: flex; align-items: center; justify-content: center; gap: 12px; line-height: 1.2; }
.flatpickr-monthDropdown-months {
  width: 120px;
  height: 36px;
  padding: 4px 8px;
  text-align: center;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  font-size: 14px;
  line-height: 1.5;
}
.flatpickr-yearDropdown-years {
  position: relative;
  width: 90px;
  height: 36px;
  text-align: center;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  font-size: 14px;
  line-height: 1.5;
  display: flex;
  align-items: center;
  justify-content: center;
}
.flatpickr-current-month input.cur-year {
  width: 100%;
  height: 100%;
  text-align: center;
  font-size: 14px;
  border: none;
  box-sizing: border-box;
  -moz-appearance: textfield;
}
.flatpickr-current-month input.cur-year::-webkit-inner-spin-button,
.flatpickr-current-month input.cur-year::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.flatpickr-yearDropdown-years::after {
  content: &#x27;▲&#x27;;
  position: absolute;
  right: 4px;
  top: 4px;
  font-size: 10px;
  cursor: pointer;
  pointer-events: all;
}
.flatpickr-yearDropdown-years::before {
  content: &#x27;▼&#x27;;
  position: absolute;
  right: 4px;
  bottom: 4px;
  font-size: 10px;
  cursor: pointer;
  pointer-events: all;
}
.flatpickr-prev-month,
.flatpickr-next-month {
  font-size: 18px;
  cursor: pointer;
  padding: 4px;
  line-height: 1;
}
.flatpickr-prev-month { margin-right: 8px; }
.flatpickr-next-month { margin-left: 8px; }
.flatpickr-monthDropdown-months,
.flatpickr-yearDropdown-years,
.flatpickr-current-month input.cur-year {
  display: flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
}
.flatpickr-calendar {
  margin: 0;
  padding: 0;
  border-radius: 8px;
  overflow: hidden;
}

/* Master Details */
.master-details-container { display: flex; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; }
.master { background: #f7f9fc; border-right: 1px solid #ddd; overflow-y: auto; }
.master-item {
  display: flex;
  align-items: center;
  padding: 5px 5px;
  border-bottom: 1px solid #ececec;
  cursor: pointer;
  transition: background-color 0.3s ease, border-left 0.3s ease;
  border-left: 4px solid transparent;
}
.master-item:hover { background-color: #f1f7ff; }
.master-item.selected {
  background-color: #e8f0fe;
  border-left: 4px solid #007BFF;
  font-weight: 600;
}
.master-item img {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  margin-right: 10px;
  object-fit: cover;
  border: 1px solid #ccc;
}
.master-item-text { display: flex; flex-direction: column; }
.master-item-text1 { font-weight: 600; font-size: 0.85em; color: #2c3e50; }
.master-item-text2 { font-size: 0.75em; color: #666; }

.details { padding: 20px; background-color: #fff; overflow-y: auto; }
.details h2 { margin-top: 0; font-size: 1.2em; color: #2c3e50; }
.details p { font-size: 0.8em; line-height: 1.5; color: #444; }
.details img { max-width: 100%; border-radius: 3px; border: 1px solid #ddd; }

/* Responsive Design */
@media (max-width: 768px) {
  .container { flex-direction: column; }
  .master, .details { width: 100%; height: 50%; }
}

/* Master Header Styling */
.master-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px;
  border-bottom: 1px solid #ececec;
  background-color: #f7f9fc;
}
.master-header-search-field {
  padding: 8px 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

/* Score Labels */
.table-top-legend {
  display: flex;
  justify-content: space-between;
  margin: 10px auto;
  width: 100%;
  font-size: 0.9em;
  text-align: center;
  gap: 12px;
  flex-wrap: wrap;
}
.table-top-legend div {
  padding: 10px 15px;
  border-radius: 6px;
  flex: 1;
  margin: 5px;
  background-color: #f9fafc;
  color: #333;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}
.table-top-legend .score-1 { background: #f8d7da; color: #721c24; }
.table-top-legend .score-2 { background: #fff3cd; color: #856404; }
.table-top-legend .score-3 { background: #d4edda; color: #155724; }
.table-top-legend .score-4 { background: #d1ecf1; color: #0c5460; }
.table-top-legend .score-5 { background: #f5e6fe; color: #6f42c1; }

/* Checkmark Radio Buttons */
.radio-cell { text-align: center; position: relative; }
.radio-cell input[type=&#x27;radio&#x27;] { display: none; }
.radio-cell label {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 35px;
  height: 35px;
  border: 2px solid #007BFF;
  border-radius: 50%;
  cursor: pointer;
  font-size: 14px;
  font-weight: bold;
  color: #fff;
  text-align: center;
  box-sizing: border-box;
  transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}
.radio-cell input[type=&#x27;radio&#x27;]:checked + label {
  background-color: #007BFF;
  border-color: #0056b3;
  box-shadow: 0 0 8px rgba(0, 123, 255, 0.3);
}
.radio-cell label::after {
  content: &#x27;&#x27;;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: white;
  opacity: 0;
  transform: scale(0.5);
  transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
  font-family: &#x27;Font Awesome 6 Free&#x27;;
  font-weight: 900;
  position: absolute;
  width: 100%;
  height: 100%;
}
.radio-cell input[type=&#x27;radio&#x27;]:checked + label::after {
  content: &#x27;\f00c&#x27;;
  color: white;
  opacity: 1;
  transform: scale(1);
}
.radio-cell label:hover {
  background-color: #0056b3;
  border-color: #0056b3;
  box-shadow: 0 0 10px rgba(0, 86, 179, 0.4);
}

/* Hierarchical Table Container */
.hierarchical_table_container {
  width: 100%;
  overflow-y: auto;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  background: #fff;
  position: relative;
}
.hierarchical_table { width: 100%; border-collapse: collapse; }
.hierarchical_table thead {
  position: sticky;
  top: 0;
  background-color: #007BFF;
  z-index: 10;
}
.hierarchical_table th {
  background-color: #007BFF;
  color: #fff;
  text-align: center;
  padding: 12px;
  font-size: 14px;
  font-weight: bold;
}
.hierarchical_table td {
  padding: 12px;
  border-bottom: 1px solid #f1f1f1;
  text-align: center;
  vertical-align: middle;
  font-size: 13px;
}
.hierarchical_table_record_category {
  font-weight: bold;
  text-align: left;
  padding: 15px;
  color: #6A1B9A;
  background-color: #f9fafc;
  font-size: 14px;
  border-left: 5px solid #8E24AA;
}
.hierarchical_table_row { background-color: #ffffff; }
.hierarchical_table_record { text-align: left; padding: 12px; font-size: 13px; }
.hierarchical_table_record_title {
  font-weight: bold;
  font-size: 13px;
  color: #333;
  display: block;
  margin-bottom: 4px;
}
.hierarchical_table_record_description { font-size: 12px; color: #7f8c8d; }
.left-align { text-align: left !important; }
.hierarchical_table_action_icons {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 10px;
  margin-right: 5%;
}
.hierarchical_table_action_icons button {
  border: none;
  cursor: pointer;
  font-size: 1.2em;
  color: #007BFF;
  background: none;
  transition: color 0.3s ease;
}
.hierarchical_table_action_icons button:hover { color: #0056b3; }
.hierarchical_table tr:hover { background-color: #f0f8ff; transition: background-color 0.3s ease; }

/* Summary Cards Above Buttons */
.summary-cards { display: flex; flex-direction: column; gap: 15px; margin: 5px 0; }
.summary-card-item {
  background: #f9f9f9;
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.summary-card-item:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}
.summary-card-item h3 {
  font-size: 16px;
  font-weight: 600;
  color: #007BFF;
  margin-bottom: 8px;
}
.summary-card-item p { font-size: 14px; color: #555; margin: 0; }
.summary-card-item strong { font-size: 18px; color: #333; }
.summary-section hr {
  margin: 20px 0;
  border: none;
  border-top: 1px solid #ddd;
}

/* Status Chip Styling */
.status { display: inline-block; padding: 5px 10px; border-radius: 12px; font-size: 12px; font-weight: 500; }
.status.gray { background-color: #6c757d; color: #fff; }
.status.yellow { background-color: #f0ad4e; color: #fff; }
.status.green { background-color: #5cb85c; color: #fff; }
.status.red { background-color: #dc3545; color: #fff; }

/* List Container */
.list-container {
  background: #F9FAFB;
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  height: 100%;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}
.list-item {
  display: flex;
  align-items: flex-start;
  padding: 12px 16px;
  border-bottom: 1px solid #E0E0E0;
  transition: background-color 0.3s, box-shadow 0.3s;
  cursor: pointer;
}
.list-item:last-child { border-bottom: none; }
.list-item:hover {
  background: #EDF7FF;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}
.list-item.selected {
  background: #E8F5E9;
  box-shadow: inset 0 0 5px rgba(40, 167, 69, 0.2);
}

/* Checkbox Styling */
.list-checkbox { margin-top: 15px; margin-right: 12px; }
.list-checkbox input { visibility: hidden; position: absolute; }
.list-checkbox .checkbox-label {
  width: 20px;
  height: 20px;
  border: 2px solid #D1D5DB;
  border-radius: 4px;
  display: inline-block;
  position: relative;
  transition: all 0.3s ease;
}
.list-checkbox input:checked + .checkbox-label {
  background: #4A90E2;
  border-color: #4A90E2;
}
.list-checkbox .checkbox-label::after {
  content: &#x27;&#x27;;
  position: absolute;
  top: 0px;
  left: 4px;
  width: 5px;
  height: 10px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg) scale(0);
  transition: transform 0.2s ease;
}
.list-checkbox input:checked + .checkbox-label::after {
  transform: rotate(45deg) scale(1);
}

/* Record Details Styling */
.item-details { flex-grow: 1; }
.item-title { font-size: 16px; font-weight: bold; margin-bottom: 4px; color: #333; }
.item-subtitle { font-size: 14px; color: #555; }
.item-description { font-size: 12px; color: #888; margin-top: 4px; }

/* Footer */
.list-footer {
  margin-top: auto;
  text-align: center;
  padding: 12px;
  font-size: 14px;
  background: #FFFFFF;
  color: #666;
  border-top: 1px solid #E0E0E0;
  border-radius: 0 0 8px 8px;
}
.list-footer-highlight { color: #28A745; font-weight: bold; }

/* Grid Layout */
.vitals_grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; justify-content: center; }
@media (max-width: 1024px) { .vitals_grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 768px) { .vitals_grid { grid-template-columns: repeat(1, 1fr); } }

/* Vital Card Styling */
.vital_card {
  background: #fff;
  border-radius: 8px;
  padding: 16px;
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.vital_card:hover { box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.12); }

.vital-input {
  background: transparent;
  border: none;
  outline: none;
  font-size: 1.8rem;
  font-weight: bold;
  width: 75px;
  text-align: center;
  color: #007BFF;
  transition: color 0.3s ease-in-out;
}
.vital-label { font-size: 0.9rem; font-weight: 600; color: #333; }
.vital-unit { font-size: 0.8rem; color: #666; }

.vital_card input[type=&#x27;number&#x27;],
.vital_card input[type=&#x27;text&#x27;] {
  border: none !important;
  background: transparent !important;
  box-shadow: none !important;
  padding: 0 !important;
  font-size: 1.8rem !important;
  font-weight: bold !important;
  text-align: center !important;
  color: #007BFF !important;
  width: 100px !important;
}

.vital_card .bp-slash {
  font-size: 1.8rem;
  font-weight: bold;
  color: #007BFF;
  padding: 0 4px;
}

.vital_icon { font-size: 3rem; padding: 8px; border-radius: 8px; }
.height-icon { color: #007BFF; background-color: #E3F2FD; }
.weight-icon { color: #28A745; background-color: #E8F5E9; }
.bmi-icon { color: #8E44AD; background-color: #F3E5F5; }
.temp-icon { color: #E74C3C; background-color: #FDECEA; }
.bp-icon { color: #D35400; background-color: #FBE7DC; }
.pulse-icon { color: #F39C12; background-color: #FDF3D9; }
.resp-icon { color: #16A085; background-color: #E0F5F5; }
.oxygen-icon { color: #3498DB; background-color: #E4F0FA; }
.glucose-icon { color: #E67E22; background-color: #FDF2E0; }</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Contract Manifest (Selectors and Property Names)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When generating a new theme, the AI must ensure every selector below exists and keeps the same property names.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">1) Global Base</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">*</code>: box-sizing, margin, padding, font-family</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">body</code>: display, justify-content, align-items, background-color, height, padding, overflow</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">:root</code>: --accent, --accent-light, --accent-strong, --row-hover-bg, --row-selected-bg</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2) Container + Two-Column Layout</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.container</code>: width, height, position, inset, margin, display, padding, background, border-radius, box-shadow, overflow</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-section</code>: width, padding-right, border-right</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.content-section</code>: width, padding-left, display, flex-direction, overflow-y, height</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3) Summary Card</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-card</code>: background, padding, border-radius, box-shadow, height, display, flex-direction, overflow, position</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-content</code>: overflow-y, padding-right, height</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-card h2</code>: font-size, color, text-align, margin-bottom</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-info</code>: font-size, color, line-height</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-info p</code>: margin</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-info strong</code>: color, font-weight</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-image</code>: width, height, object-fit, background, margin-bottom, display, border-radius, box-shadow</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4) Status Badge + QR + Divider</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.status-badge</code>: display, margin, margin-top, margin-bottom, padding, font-size, font-weight, color, border-radius, text-align, width</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.status-badge.gray/.yellow/.green/.red</code>: background-color</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.qr-code</code>: width, height, margin, display</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.section-title</code>: font-size, margin-top, font-weight</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">hr</code>: border, border-top, margin-top, margin-bottom</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5) Buttons</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.button-container</code>: margin-top, display, justify-content, gap</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.save-button, .cancel-button, .third-button, .button_red, .button_green, .button_blue, .button_yellow, .button_purple</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - padding, font-size, font-weight, width, height, border, border-radius, cursor, color, transition, display, align-items, justify-content, gap</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Each filled button + hover selector keeps background-color changes</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.add-another-item-button</code>: background-color, color, padding, font-size, border, border-radius, cursor, transition, margin-top, width, display, align-items, gap</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.button1</code>: background-color, color, padding, font-size, border, border-radius, cursor, transition, margin-top, width, display, align-items, gap</li>
<li style="margin-bottom:8px;padding-left:8px;">Outline button group: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.save-button_ ... .button_purple_</code> with their color/border-color + hover</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6) Tabs + Content Scroll</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.tabs</code>: display, border-bottom, margin-bottom</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.tab</code>: padding, font-size, color, cursor, border-bottom, position, transition</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.tab.active</code>: color, font-weight, border-bottom-color</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.tab.badge-tab::after</code>: content, position, top, right, background-color, color, font-size, font-weight, padding, border-radius, box-shadow</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.content</code>: padding, display, overflow-y, max-height</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.content h3</code>: font-size, font-weight, color, margin-bottom</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.content p</code>: color, font-size, line-height, margin-bottom</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7) Form Grid + Inputs</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-grid1/2/3/4</code>: display, grid-template-columns, gap</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-group</code>: margin-bottom</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-group-2</code>: margin-bottom, padding</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.instructions1/2/3</code>: background, padding, padding-left, padding-right, border-left, margin-bottom, border-radius, position, font-size</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.instructions1 h2, .instructions2 h2, .instructions3 h2</code>: color, font-size, margin-bottom</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">label</code>: font-size, font-weight, color, display, margin-bottom</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">input[type=...]:not(.combined-inputs-input), textarea</code>: width, height, padding, font-size, color, border, border-radius, outline, background-color</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">textarea</code>: height, resize</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">select:not(.combined-inputs-dropdown)</code>: width, height, padding, font-size, color, border, border-radius, outline, appearance, background-image, background-repeat, background-position, background-size</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.checkbox-group</code>: display, grid-template-columns, padding, border, border-radius, background-color, box-shadow, margin-top, font-family</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8) Subtables + Action Icons</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.sub-table-container</code>: border, border-radius, overflow-y</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.sub-table</code>: width, border-collapse</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.sub-table th, .sub-table td</code>: border, padding, text-align, font-size</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.sub-table th</code>: background-color, font-weight</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.sub-table tr:nth-child(even)</code>: background-color</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.sub-table-column-style1/2/3/4</code>: width</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.sub_table_footer</code>: display, justify-content, align-items, margin-top</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.sub_table_footer .total</code>: font-size, font-weight, color</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.sub-table td img</code>: width, height, object-fit</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.icon-group</code>: display, gap, justify-content, align-items</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.view-icon</code> + hover: color, font-size, cursor, transition</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.edit-icon</code> + hover: font-size, cursor, transition, color</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.delete-icon</code> + hover: font-size, cursor, transition, color</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9) Accordions + Alerts + Breadcrumbs</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.accordion-container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.accordion</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.accordion-header</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.accordion-content</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.alert</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.alert-title</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.alert i</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.breadcrumbs</code> plus pseudo-element and link styling</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.current</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.icon</code>, Font Awesome <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">:before</code> rules</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10) Media / Gallery / Empty State</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.map-container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">iframe</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.gallery-container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.gallery</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.gallery-item</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.gallery-item img</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.caption</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.message-container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.message-container h1</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.message-container p</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.message-container .svg-icon</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.cta-btn</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">@keyframes fadeIn</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">fadeInZoom</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">slideInDown</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">slideInUp</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11) Cards, Rating, Wizard, Toggles, Segments</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.cards_row</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.note-card</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.note-header</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.note-content</code> and list items</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.rating</code> group (inputs, labels, hover and checked behavior)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.wizard-container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.stepper</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.step</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.step .icon</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.step.active .icon</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.step .line</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.step.active + .line</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.wizard_content</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.wizard_buttons</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.wizard_button</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Toggle group: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.toggle-container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.toggle-switch</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.slider</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.slider::before</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">input:checked + .slider</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.segmented-control</code> and its buttons</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12) Reports + Grid Numbers + ImageText Grid</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.report_header</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.report_table</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.report_footer</code>, and sub-elements</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.grid-numbers-container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.grid-number</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.imagetext-grid-container</code> and its parts</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.combined-inputs-*</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13) Flatpickr Styling</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.flatpickr-months</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.flatpickr-current-month</code>, month/year dropdown classes, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">::before/::after</code> arrows, nav arrows, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.flatpickr-calendar</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">14) Master-Details + Score Legend + Radio Checkmarks</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.master-details-container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.master</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.master-item</code> and states, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.details</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.master-header</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.master-header-search-field</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.table-top-legend</code> + <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.score-1..5</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.radio-cell</code> group + checkmark animation</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">15) Hierarchical Table</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.hierarchical_table_container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.hierarchical_table</code>, sticky header, category row, record title/description, action icons, hover</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">16) List Selector Panel</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.list-container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.list-item</code> and selected, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.list-checkbox</code> + label, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.item-*</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.list-footer</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">17) Vitals Grid</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.vitals_grid</code> + media queries</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.vital_card</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.vital-input</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.vital-label</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.vital-unit</code>, overrides for inputs, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.vital_icon</code> and icon color classes</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Theme Creation Procedure</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When creating a new Details Page theme:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Choose a unique theme name (Title Case).
</li>
<li style="margin-bottom:8px;padding-left:8px;">Copy the canonical Details Page CSS skeleton exactly.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Adjust values in this order:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">:root</code> tokens first (accent family and selection/hover washes)</li>
<li style="margin-bottom:4px;">Base surfaces (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">body</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-card</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.content-section</code>)</li>
<li style="margin-bottom:4px;">Buttons (filled and outline variants)</li>
<li style="margin-bottom:4px;">Tabs (active border and text)</li>
<li style="margin-bottom:4px;">Form controls (input/select backgrounds, borders, focus feel if any)</li>
<li style="margin-bottom:4px;">Tables and cards (subtables, hierarchical table, wizard header gradient)</li>
<li style="margin-bottom:4px;">Special components (breadcrumbs gradient, empty state, vitals icon colors)</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Ensure:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">readability is strong</li>
<li style="margin-bottom:4px;">hover and selection are obvious</li>
<li style="margin-bottom:4px;">internal scrolling works (content areas scroll, viewport does not)</li>
<li style="margin-bottom:4px;">spacing and alignment stay clean in both summary and content columns</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">FileMaker Script Branch Template</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Add a new branch in the Details Page CSS generator:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Else If [ $$Theme = &quot;New Details Theme Name&quot; ]
  Set Variable [ $styles ; Value: &quot;PASTE FULL UPDATED DETAILS CSS STRING HERE&quot; ]
End If</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">AI Request Template</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Create a new Details Page theme using the canonical Details Page CSS in this document.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Theme Name: &lt;New Theme Name&gt;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Mode: &lt;Light or Dark&gt;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Vibe Keywords: &lt;example: premium, calm, modern, sharp&gt;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Rules:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Copy the canonical Details Page CSS exactly.</li>
<li style="margin-bottom:8px;padding-left:8px;">Change values only.</li>
<li style="margin-bottom:8px;padding-left:8px;">Do not add, remove, or rename selectors.</li>
<li style="margin-bottom:8px;padding-left:8px;">Do not add or remove properties.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Deliver:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Full updated CSS string
</li>
<li style="margin-bottom:8px;padding-left:8px;">Full FileMaker <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Else If</code> branch for the new theme
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-main">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Generating a Details Page (Entity Details UI in WebViewer)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Generating a Details Page (Entity Details UI in WebViewer)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation trains an AI Agent to generate FileMaker scripts that build <strong style="font-weight:600;color:#0f172a;">details pages</strong> in the CauferoAppStarter style.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A details page is a WebViewer-driven page that:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Receives a selected record ID (and optional context parameters)</li>
<li style="margin-bottom:8px;padding-left:8px;">Fetches record data (usually via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ExecuteSQL</code>)</li>
<li style="margin-bottom:8px;padding-left:8px;">Optionally fetches dropdown data and related subtables</li>
<li style="margin-bottom:8px;padding-left:8px;">Builds CSS, HTML, and JavaScript as strings</li>
<li style="margin-bottom:8px;padding-left:8px;">Writes a complete HTML document to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Page</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Uses buttons and UI actions that call FileMaker scripts via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript(...)</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This doc focuses on <strong style="font-weight:600;color:#0f172a;">how the page is structured and generated</strong>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Other docs will cover:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Specific HTML objects (maps, KPI cards, graphs, accordions, segmented buttons, subtables)</li>
<li style="margin-bottom:8px;padding-left:8px;">Reusable JavaScript utilities and widgets</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) Core Outcomes the AI Agent Must Produce</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to create a new details page script, the AI Agent must generate a FileMaker script that:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Sets global navigation context
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$App Section</code></li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Selected Record ID</code></li>
<li style="margin-bottom:4px;">Entity-specific globals like <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Department ID</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Staff ID</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Leave Request ID</code></li>
<li style="margin-bottom:4px;">Optional globals like <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Search Item</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Tab To Show</code></li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Defines FileMaker scripts to be called from the page
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Save script name</li>
<li style="margin-bottom:4px;">Cancel script name</li>
<li style="margin-bottom:4px;">Other action scripts (modals, insert image, view related record, add document, fetch attendance, etc.)</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Fetches entity data
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Prefer <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ExecuteSQL</code> with a clear SELECT list</li>
<li style="margin-bottom:4px;">Parse the SQL result into variables</li>
<li style="margin-bottom:4px;">Apply defaults when record does not exist (new record cases)</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Fetches dropdown data (value lists)
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ &quot;Get Value List&quot; ; Parameter: ... ]</code></li>
<li style="margin-bottom:4px;">Store <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( ScriptResult )</code> into a variable used inside HTML or JS</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Fetches related lists (subtables)
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ &quot;+++ Display Subtable HTML&quot; ; Parameter: ... ]</code> and store HTML</li>
<li style="margin-bottom:4px;">For documents: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ Display Documents Subtable HTML</code> where required</li>
<li style="margin-bottom:4px;">Insert subtable HTML into tabs or sections</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Builds the page
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">CSS: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ &quot;🖌️ Use Details CSS&quot; ]</code> then optionally append extra CSS</li>
<li style="margin-bottom:4px;">HTML sections:</li>
<li style="margin-bottom:4px;">Summary section (left column feel)</li>
<li style="margin-bottom:4px;">Content section (tabs + tab bodies, or single body)</li>
<li style="margin-bottom:4px;">JavaScript functions:</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">showContent</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">cancelAction</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">saveItemInfo</code></li>
<li style="margin-bottom:4px;">Support functions for widgets used in page (toggle, segmented control, datepicker, modal open, etc.)</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Produces full HTML document and assigns to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Page</code>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Full <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;!DOCTYPE html&gt; ... &lt;/html&gt;</code></li>
<li style="margin-bottom:4px;">Includes Font Awesome</li>
<li style="margin-bottom:4px;">Includes Flatpickr when datepickers are used</li>
<li style="margin-bottom:4px;">Includes Chart.js when charts are used</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ends with standard refresh behavior
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ &quot;WebDirect Pause&quot; ]</code></li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Refresh Window [ Flush cached join results ; Flush cached external data ]</code></li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) Details Page Script Layout (Canonical Order)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A CauferoAppStarter details page script must follow this order.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.1) Page identity and primary record selection</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Required at the top:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $$App Section ; Value: &quot;&lt;Human-readable page title&gt;&quot; ]
Set Variable [ $$Selected Record ID ; Value: GetValue ( GetScriptParameters ; 1 ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then entity-specific globals:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $$&lt;Entity&gt; ID ; Value: GetValue ( GetScriptParameters ; 1 ) ]
Set Variable [ $$Search Item ; Value: GetValue ( GetScriptParameters ; 2 ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Notes:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Parameter 1 is the selected record ID for almost every details page.</li>
<li style="margin-bottom:8px;padding-left:8px;">Parameter 2 is frequently used as a search context value when returning to list pages.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Optional additional parameters:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Date range filters</li>
<li style="margin-bottom:8px;padding-left:8px;">Tab to show</li>
<li style="margin-bottom:8px;padding-left:8px;">Related record IDs for modal detail pages</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example pattern (Staff page):</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $From Date ; Value: DefaultIfEmpty ( GetValue ( GetScriptParameters ; 3 ) ; Get ( CurrentDate ) ) ]
Set Variable [ $To Date ; Value: DefaultIfEmpty ( GetValue ( GetScriptParameters ; 4 ) ; Get ( CurrentDate ) ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.2) Define FileMaker scripts called by the page</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every major button or row action in the HTML must map to a FileMaker script name via a variable.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Typical set:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Save Record Script ; Value: &quot;Save &lt;Entity&gt;&quot; ]
Set Variable [ $Cancel Script ; Value: &quot;+++ &lt;Entity&gt; List Page&quot; ]
Set Variable [ $Delete Record Script ; Value: &quot;&quot; ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Optional additional action scripts (examples from samples):</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Insert image script</li>
<li style="margin-bottom:8px;padding-left:8px;">Open modal script</li>
<li style="margin-bottom:8px;padding-left:8px;">View child record modal script</li>
<li style="margin-bottom:8px;padding-left:8px;">Add document</li>
<li style="margin-bottom:8px;padding-left:8px;">Get attendance</li>
<li style="margin-bottom:8px;padding-left:8px;">Grant system access</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Important rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The JS functions must call <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript(&#x27;&lt;script name&gt;&#x27;, parameters)</code> using these variables.</li>
<li style="margin-bottom:8px;padding-left:8px;">Script variables should be defined even if empty to avoid referencing undefined variables.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.3) Fetch the entity record data (usually via ExecuteSQL)</h4>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">2.3.1) SQL construction standard</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Preferred approach:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Build a SQL string with explicit field list</li>
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">?</code> placeholder(s) for parameters</li>
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ExecuteSQL ( sql ; fieldseparator ; rowseparator ; id )</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Standard separators:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">fieldseparator = &quot;|&quot;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">rowseparator = &quot;¶&quot;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $List ; Value:
Let (
[
  sql = &quot;SELECT t1.\&quot;Name\&quot;, t1.\&quot;Description\&quot; FROM \&quot;Departments\&quot; t1 WHERE t1.ID = ?&quot; ;
  fieldseparator = &quot;|&quot; ;
  rowseparator = &quot;¶&quot; ;
  id = $$Department ID ;
  result = ExecuteSQL ( sql ; fieldseparator ; rowseparator ; id )
] ;
result
)
]</pre>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">2.3.2) Parsing pattern</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">After <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ExecuteSQL</code>, parse like this:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Total ; Value: ValueCount ( $List ) ]

If [ $Total &gt; 0 ]
  Loop
    Set Variable [ $i ; Value: $i + 1 ]
    Set Variable [ $Link Record ; Value: GetValue ( $List ; $i ) ]
    Set Variable [ $Link Record As List ; Value: Substitute ( $Link Record ; &quot;|&quot; ; ¶ ) ]

    Set Variable [ $Field1 ; Value: GetValue ( $Link Record As List ; 1 ) ]
    Set Variable [ $Field2 ; Value: GetValue ( $Link Record As List ; 2 ) ]

    Exit Loop If [ $i ≥ $Total ]
  End Loop
Else
  /* defaults for new record case */
End If</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Notes:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Even when a single row is expected, the scripts still use a loop. Keep that style.</li>
<li style="margin-bottom:8px;padding-left:8px;">Long text fields should normalize line breaks:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ConvertLineBreakMarkersToReturns ( GetValue ( ... ) )</code></p>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">2.3.3) Defaults logic</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If no record found:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Set smart defaults that allow creating a new record</li>
<li style="margin-bottom:8px;padding-left:8px;">Or leave blank if your design does not support &quot;new record from details page&quot;</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Staff: default nationality and status</li>
<li style="margin-bottom:8px;padding-left:8px;">Leave request: default dates, staff identity, duration, status</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must implement defaults only if the page supports creating new records.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.4) Fetch value lists (dropdowns and JS dictionaries)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use the dedicated value list script.</p>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">2.4.1) Dropdown HTML options</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ “Get Value List” ; Parameter: &quot;Dropdown|&lt;List Name&gt;|&quot; &amp; &lt;SelectedValueOrID&gt; ]
Set Variable [ $&lt;ListVarName&gt; Dropdown ; Value: Get ( ScriptResult ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Dropdown|Leave Types|&quot; &amp; $Leave Type ID</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Dropdown|Staff|&quot; &amp; $HOD Staff ID</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Dropdown|Nationalities|&quot; &amp; $Nationality</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The returned ScriptResult is HTML that can be inserted directly inside <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt; ... &lt;/select&gt;</code>.</p>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">2.4.2) JS dictionary data for dependent dropdowns</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ “Get Value List” ; Parameter: &quot;JS|&lt;List Name&gt;|&quot; &amp; &lt;SelectedValue&gt; ]
Set Variable [ $&lt;ListVarName&gt; JS ; Value: Get ( ScriptResult ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In Staff page, these JS datasets drive cascading dropdowns:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Departments</li>
<li style="margin-bottom:8px;padding-left:8px;">Job Titles</li>
<li style="margin-bottom:8px;padding-left:8px;">Notches</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The JS is later injected like:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const departments = { &lt;ScriptResult&gt; };</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) Related Lists: Subtables (Embedded Related Data)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Details pages often include related lists such as:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Job Titles in a department</li>
<li style="margin-bottom:8px;padding-left:8px;">Staff in a department</li>
<li style="margin-bottom:8px;padding-left:8px;">Emergency contacts for a staff member</li>
<li style="margin-bottom:8px;padding-left:8px;">Education, payroll, attendance, KPIs, documents</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These are rendered as a reusable component that returns HTML.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.1) Subtable generation: Required parameters</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Before calling the subtable script, set a block of variables.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Minimum required:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$SQL</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$SQL Condition</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Column Headers</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Column Widths</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Table ID</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Sub Table Name</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Sub Table Width</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Sub Table Height</code></li>
<li style="margin-bottom:8px;padding-left:8px;">No-record icon path, title, body</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Often used optional parameters:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Status Column</code> (index of status column)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Date Columns</code> (indexes)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Number Columns</code> (indexes)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Inputs</code> (input field configuration)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Row Action JS Script</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Row Action Icon Class</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Add New Record Button Label</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Add New Record JS Script Name</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Two Decimal Columns</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Timestamp Columns</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then call:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ “+++ Display Subtable HTML” ; Parameter:
  $SQL &amp; ¶ &amp;
  $SQL Condition &amp; ¶ &amp;
  $Column Headers &amp; ¶ &amp;
  $Column Widths &amp; ¶ &amp;
  $Status Column &amp; ¶ &amp;
  $Date Columns &amp; ¶ &amp;
  $Number Columns &amp; ¶ &amp;
  $Inputs &amp; ¶ &amp;
  $Row Action JS Script &amp; ¶ &amp;
  $Row Action Icon Class &amp; ¶ &amp;
  $Table ID &amp; ¶ &amp;
  $Two Decimal Columns &amp; ¶ &amp;
  $Timestamp Columns &amp; ¶ &amp;
  $Sub Table Name &amp; ¶ &amp;
  $Sub Table Width &amp; ¶ &amp;
  $Sub Table Height &amp; ¶ &amp;
  $Add New Record Button Label &amp; ¶ &amp;
  $Add New Record JS Script Name &amp; ¶ &amp;
  $No Record Found Icon SVG Path &amp; ¶ &amp;
  $No Record Found Message Title &amp; ¶ &amp;
  $No Record Found Message Body
]
Set Variable [ $&lt;SubTableVarName&gt; ; Value: Get ( ScriptResult ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.2) Documents subtable</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">For documents, your pattern uses:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Script: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ Display Documents Subtable HTML</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The parameter list is the same shape as the normal subtable, but the renderer is specialized for documents.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.3) Inserting subtables into the page</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Subtable HTML is inserted in a tab body or content block like:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div id=&#x27;tab3&#x27; class=&#x27;content&#x27;&gt;
  &quot; &amp; $Education Sub Table HTML &amp; &quot;
&lt;/div&gt;</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) CSS Generation</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1) Details CSS is the base for all details pages</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Always call:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ “🖌️ Use Details CSS” ]
Set Variable [ $styles ; Value: Get ( ScriptResult ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2) Optional: Append extra CSS</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Some pages add extra rules for special widgets (charts, dashboard cards):</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $styles ; Value:
  $styles &amp;
  &quot;
    #chart-container { width: 100%; height: 200px; padding: 10px; box-sizing: border-box; }
    canvas { width: 100% !important; height: 100% !important; }
  &quot;
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.3) Optional: Merge multiple CSS packs</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example: Details CSS + Dashboard CSS</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ “🖌️ Use Dashboard CSS” ]
Set Variable [ $Dashboard Styles ; Value: Get ( ScriptResult ) ]

Set Variable [ $styles ; Value:
&quot;
&lt;style&gt; &quot; &amp;
  $styles &amp; &quot; &quot; &amp; $Dashboard Styles &amp;
&quot; &lt;/style&gt;
&quot;
]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Important:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Decide whether <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$styles</code> should hold raw CSS only, or a <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;style&gt;...&lt;/style&gt;</code> wrapper.</li>
<li style="margin-bottom:8px;padding-left:8px;">Be consistent within one script. If you wrap with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;style&gt;</code>, do not wrap again in the final HTML head.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) HTML Generation: The Standard Page Structure</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">All details pages follow this high-level structure:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;container&#x27;&gt;
  &lt;div class=&#x27;summary-section&#x27;&gt; ... &lt;/div&gt;
  &lt;div class=&#x27;content-section&#x27;&gt;
    &lt;!-- tabs optional --&gt;
    &lt;!-- tab bodies or single content --&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1) Summary section</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The summary section is built as <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Summary Section HTML</code> and usually includes:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Title <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;h2&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Summary metrics via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;p&gt;&lt;strong&gt;Label:&lt;/strong&gt; value&lt;/p&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Optional photo block</li>
<li style="margin-bottom:8px;padding-left:8px;">Divider <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;hr /&gt;</code> blocks</li>
<li style="margin-bottom:8px;padding-left:8px;">Button container with save/cancel or other actions</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Common patterns:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Phone link: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;a href=&#x27;tel:...&#x27;&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Email link: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;a href=&#x27;mailto:...&#x27;&gt;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Summary Section HTML ; Value:
&quot;
&lt;div class=&#x27;summary-section&#x27;&gt;
 &lt;div class=&#x27;summary-card&#x27;&gt;
  &lt;h2&gt;&quot; &amp; If ( not IsEmpty ( $Name ) ; $Name ; &quot;Entity Information&quot; ) &amp; &quot;&lt;/h2&gt;
  &lt;div class=&#x27;summary-content&#x27;&gt;
   &lt;div class=&#x27;summary-info&#x27;&gt;
     &lt;p&gt;&lt;strong&gt;Field:&lt;/strong&gt; &quot; &amp; $Value &amp; &quot;&lt;/p&gt;
   &lt;/div&gt;
  &lt;/div&gt;
  &lt;hr /&gt;
  &lt;div class=&#x27;button-container&#x27;&gt;
    &lt;button class=&#x27;save-button&#x27; onclick=\&quot;saveItemInfo()\&quot;&gt;&lt;i class=&#x27;fas fa-save&#x27;&gt;&lt;/i&gt; Save&lt;/button&gt;
    &lt;button class=&#x27;cancel-button&#x27; onclick=\&quot;cancelAction()\&quot;&gt;&lt;i class=&#x27;fas fa-times-circle&#x27;&gt;&lt;/i&gt; Cancel&lt;/button&gt;
  &lt;/div&gt;
 &lt;/div&gt;
&lt;/div&gt;
&quot;
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2) Tabs block (optional)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Tabs exist when the entity has multiple sub-sections.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The tabs HTML must:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.tabs</code> wrapper</li>
<li style="margin-bottom:8px;padding-left:8px;">Each tab uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.tab</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Active tab uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.active</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Each tab calls <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">showContent(&#x27;tabX&#x27;, this)</code></li>
</ul>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Tabs HTML ; Value:
&quot;
&lt;div class=&#x27;tabs&#x27;&gt;
 &lt;div class=&#x27;tab&quot; &amp; If ( $$Tab To Show = 1 ; &quot; active&quot; ) &amp; &quot;&#x27; onclick=\&quot;showContent(&#x27;tab1&#x27;, this)\&quot;&gt;Details&lt;/div&gt;
 &lt;div class=&#x27;tab&quot; &amp; If ( $$Tab To Show = 2 ; &quot; active&quot; ) &amp; &quot;&#x27; onclick=\&quot;showContent(&#x27;tab2&#x27;, this)\&quot;&gt;Other&lt;/div&gt;
&lt;/div&gt;
&quot;
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.3) Tab body blocks (or single content block)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Each tab body:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;div id=&#x27;tabX&#x27; class=&#x27;content&#x27;&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Shows only the selected tab on load</li>
<li style="margin-bottom:8px;padding-left:8px;">The default show condition uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Tab To Show</code></li>
</ul>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Tab1 HTML ; Value:
&quot;
&lt;div id=&#x27;tab1&#x27; class=&#x27;content&#x27;&quot; &amp; If ( $$Tab To Show = 1 ; &quot; style=&#x27;display: block;&#x27;&quot; ) &amp; &quot;&gt;
 ...
&lt;/div&gt;
&quot;
]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If no tabs:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">You can skip the tabs HTML and place only one content block inside <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.content-section</code>.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.4) Form layout conventions</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your pages consistently use grid classes such as:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-grid1</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-grid2</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-grid3</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-group</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-group-2</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Common input patterns:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;text&#x27; id=&#x27;field_id&#x27; value=&#x27;...&#x27;&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;textarea id=&#x27;field_id&#x27;&gt;...&lt;/textarea&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select id=&#x27;field_id&#x27;&gt; ...options... &lt;/select&gt;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Line break policy:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Textareas should receive line-break normalized text from FileMaker via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ConvertLineBreakMarkersToReturns(...)</code>.</li>
<li style="margin-bottom:8px;padding-left:8px;">When sending textareas back to FileMaker, JS should encode: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent(...)</code>.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.5) Reusable UI objects seen across scripts</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These show up repeatedly:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save button and Cancel button in the summary section</li>
<li style="margin-bottom:8px;padding-left:8px;">Tabs + <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">showContent</code> function</li>
<li style="margin-bottom:8px;padding-left:8px;">Toggle switch (checkbox + slider) with a status text element</li>
<li style="margin-bottom:8px;padding-left:8px;">Segmented control buttons</li>
<li style="margin-bottom:8px;padding-left:8px;">Date inputs with calendar icon using Flatpickr</li>
<li style="margin-bottom:8px;padding-left:8px;">Subtable HTML blocks inserted in tabs</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Other objects appear in specific pages (photo modal, KPI cards, charts). Mention them at the layout level only in this doc.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) JavaScript Generation: Required Functions and Assembly</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1) JS functions are built as strings in FileMaker variables</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Cancel Action Script ; Value:
&quot;function cancelAction() {
  FileMaker.PerformScript(&#x27;&quot; &amp; $Cancel Script &amp; &quot;&#x27;);
}&quot;
]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then assemble:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Scripts ; Value:
&quot;&lt;script&gt; &quot; &amp;
  $Show Content Script &amp; &quot;¶¶&quot; &amp;
  $Cancel Action Script &amp; &quot;¶¶&quot; &amp;
  $Save Item Info Script &amp;
&quot; &lt;/script&gt; &quot;
]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Important:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">¶¶</code> to separate blocks for readability.</li>
<li style="margin-bottom:8px;padding-left:8px;">Only include scripts that are defined or guaranteed to exist.</li>
<li style="margin-bottom:8px;padding-left:8px;">If you keep a standard library of scripts like <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Wizard Script</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Toggle Accordion Script</code>, define them or confirm they exist globally.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2) Required baseline functions</h4>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">6.2.1) showContent (tabs)</h5>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function showContent(contentId, tabElement) {
  const contentSections = document.querySelectorAll(&#x27;.content&#x27;);
  contentSections.forEach((section) =&gt; (section.style.display = &#x27;none&#x27;));
  document.getElementById(contentId).style.display = &#x27;block&#x27;;

  const tabs = document.querySelectorAll(&#x27;.tab&#x27;);
  tabs.forEach((tab) =&gt; tab.classList.remove(&#x27;active&#x27;));
  tabElement.classList.add(&#x27;active&#x27;);
}</pre>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">6.2.2) cancelAction</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Calls the list page (or previous page) script:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function cancelAction() {
  FileMaker.PerformScript(&#x27;&lt;Cancel Script Name&gt;&#x27;);
}</pre>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">6.2.3) saveItemInfo</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Collect values from DOM, build pipe-separated parameter string, call save script.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Rules:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent</code> for textareas and any free-text that may contain line breaks or pipes.</li>
<li style="margin-bottom:8px;padding-left:8px;">Keep the order of parameters consistent with the save script expectation.</li>
<li style="margin-bottom:8px;padding-left:8px;">Validate required fields before calling FileMaker.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example shape:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function saveItemInfo() {
  const name = document.getElementById(&#x27;name&#x27;).value;
  const description = encodeURIComponent(document.getElementById(&#x27;description&#x27;).value);

  const parameters = [ name, description ].join(&#x27;|&#x27;);
  FileMaker.PerformScript(&#x27;&lt;Save Script Name&gt;&#x27;, parameters);
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.3) Common supporting functions (include only if used by the page)</h4>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">6.3.1) Toggle switch</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Used to show and change a status label.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">DOM expectations:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Checkbox: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id=&#x27;toggle&#x27;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Label span: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id=&#x27;status&#x27;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Typical behavior:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">preselectToggle(...)</code> called on load</li>
<li style="margin-bottom:8px;padding-left:8px;">A <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggle()</code> that updates the status text</li>
</ul>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">6.3.2) Segmented control</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Used for binary or small options like gender.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">DOM expectations:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.segmented-control button</code></li>
<li style="margin-bottom:8px;padding-left:8px;">The clicked button becomes <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.active</code></li>
</ul>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">6.3.3) Datepicker (Flatpickr)</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When the page has date fields:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Include Flatpickr CSS and JS in the HTML head</li>
<li style="margin-bottom:8px;padding-left:8px;">Convert MySQL date strings to readable strings for display</li>
<li style="margin-bottom:8px;padding-left:8px;">Provide helper <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">getMySQLFormattedDate(fieldId)</code> for saving</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Core idea:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Display: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">l, j F, Y</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Save: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Y-m-d</code></li>
</ul>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">6.3.4) Modal open and close (image modal)</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the summary section shows a photo:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Provide <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">openImageModal()</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">closeImageModal()</code></li>
<li style="margin-bottom:8px;padding-left:8px;">The modal uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">display: flex</code> and closes when clicking outside the image</li>
</ul>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">6.3.5) Related record viewers</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Subtables often need row actions like &quot;viewEducation&quot;, &quot;viewDocument&quot;, &quot;viewEmergencyContactDetails&quot;.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These functions take a parameter from the row and call a FileMaker script.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example shape:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function viewDocument(parameters) {
  FileMaker.PerformScript(&#x27;&lt;View Document Script&gt;&#x27;, parameters);
}</pre>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">6.3.6) Dynamic cascading dropdowns</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When one dropdown depends on another (department -&gt; job titles -&gt; notches):</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Fetch JS dictionaries via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Get Value List&quot;</code> with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">JS|...</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Build dropdown options in JS on DOMContentLoaded</li>
<li style="margin-bottom:8px;padding-left:8px;">Preselect based on existing IDs</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Full Page Assembly into $$Page</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1) HTML head includes</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Minimum:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">meta charset, viewport</li>
<li style="margin-bottom:8px;padding-left:8px;">Font Awesome CSS</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;style&gt; ... &lt;/style&gt;</code> containing your <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$styles</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Optional:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Flatpickr CSS + JS if datepickers exist</li>
<li style="margin-bottom:8px;padding-left:8px;">Chart.js script if charts exist</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example shape:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $$Page ; Value:
&quot;&lt;!DOCTYPE html&gt;
&lt;html lang=&#x27;en&#x27;&gt;
&lt;head&gt;
  &lt;meta charset=&#x27;UTF-8&#x27;&gt;
  &lt;meta name=&#x27;viewport&#x27; content=&#x27;width=device-width, initial-scale=1.0&#x27;&gt;
  &lt;title&gt;Item Management&lt;/title&gt;
  &lt;link rel=&#x27;stylesheet&#x27; href=&#x27;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css&#x27;&gt;
  &lt;link rel=&#x27;stylesheet&#x27; href=&#x27;https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css&#x27;&gt;
  &lt;script src=&#x27;https://cdn.jsdelivr.net/npm/flatpickr&#x27;&gt;&lt;/script&gt;
  &lt;style&gt; &quot; &amp; $styles &amp; &quot; &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt; &quot; &amp; $HTML &amp; &quot;¶¶&quot; &amp; $Scripts &amp; &quot; &lt;/body&gt;
&lt;/html&gt;&quot;
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2) HTML body uses your container block</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Always set <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$HTML</code> first:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $HTML ; Value:
&quot;
&lt;div class=&#x27;container&#x27;&gt;
  &quot; &amp; $Summary Section HTML &amp; &quot;
  &lt;div class=&#x27;content-section&#x27;&gt;
    &quot; &amp; $Tabs HTML &amp; &quot;
    &quot; &amp; $Tab1 HTML &amp; &quot;
    &quot; &amp; $Tab2 HTML &amp; &quot;
  &lt;/div&gt;
&lt;/div&gt;
&quot;
]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Notes:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">If some tabs do not exist, keep their variables empty. FileMaker concatenation should safely ignore empty strings if variables are set to &quot;&quot;.</li>
<li style="margin-bottom:8px;padding-left:8px;">If you reference <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Tab4 HTML</code> etc, ensure they exist and are defined as empty when unused.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Page Actions and Parameter Conventions</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1) Parameter passing convention</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">All actions that call FileMaker scripts use a single parameter string:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Values joined by <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Encoded where needed</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Rules:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent</code> for:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Textareas</li>
<li style="margin-bottom:4px;">Any value that can contain line breaks</li>
<li style="margin-bottom:4px;">Any value that can contain the pipe character</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Keep the ordering fixed and documented
</li>
<li style="margin-bottom:8px;padding-left:8px;">Save scripts must parse using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetValue ( Substitute ( $param ; &quot;|&quot; ; &quot;¶&quot; ) ; n )</code> or an equivalent approach
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.2) Record identity and page modes</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Most pages operate in one of these modes:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Existing record mode: ID exists, fields may be editable or partially locked</li>
<li style="margin-bottom:8px;padding-left:8px;">New record mode: no record found, defaults applied, some fields enabled for entry</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your Leave Request page uses an important style:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">If an ID value is empty, treat it as a &quot;new request&quot; state.</li>
<li style="margin-bottom:8px;padding-left:8px;">In that state:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Some fields are enabled</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - The main button label becomes &quot;Submit Request&quot;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - The button action can route to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">saveItemInfo()</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must implement this behavior when the page supports creating a record.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Common HTML Element IDs and Naming Rules</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1) Element ID naming</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use snake_case IDs matching the semantic field name:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">leave_type</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">start_date</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">end_date</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">reason</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">name</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">hod</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">description</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">staff_number</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">first_name</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">last_name</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">dob</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">department</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">job_title</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2) Icon ID naming for datepickers</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">For each date input:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Input: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id=&#x27;dob&#x27;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Icon: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id=&#x27;dob_icon&#x27;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Same pattern for:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">start_date_icon</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">end_date_icon</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">from_date_icon</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">to_date_icon</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.3) Status and toggle IDs</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Toggle switch requirements:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">checkbox: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id=&#x27;toggle&#x27;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">status text: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id=&#x27;status&#x27;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Avoid creating conflicting IDs across tabs. Keep IDs unique per page.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Reusable Script Includes Commonly Referenced</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Across your samples, the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Scripts</code> assembly references scripts that are not shown inside the snippet, for example:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Toggle Accordion Script</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Add Another Item Script</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Close Alert Script</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Move Item Script</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Wizard Script</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Choose File</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must follow this rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">If a details page references a script block in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Scripts</code>, it must be defined in the script or guaranteed by your app framework.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the app framework injects these as globals, the documentation for that framework must specify:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Where they come from</li>
<li style="margin-bottom:8px;padding-left:8px;">Their exact variable names</li>
<li style="margin-bottom:8px;padding-left:8px;">Whether they are always present</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Quality Checklist for the AI Agent</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Before finalizing a generated details page script, the AI Agent must verify:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.1) Variable completeness</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Every variable referenced later is set earlier.</li>
<li style="margin-bottom:8px;padding-left:8px;">If optional components exist (tabs 4 to 9), define them as empty strings if unused.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.2) SQL safety and correctness</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Correct table and field quoting with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">\&quot;Field\&quot;</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Table Name&quot;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Correct joins and group by when using aggregates</li>
<li style="margin-bottom:8px;padding-left:8px;">Parameter placeholders <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">?</code> used for IDs</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.3) UI correctness</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">All buttons have a matching JS function defined</li>
<li style="margin-bottom:8px;padding-left:8px;">All JS functions that call FileMaker use the correct script variables</li>
<li style="margin-bottom:8px;padding-left:8px;">IDs used in JS match IDs used in HTML</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.4) Encoding rules</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Textareas are encoded on save</li>
<li style="margin-bottom:8px;padding-left:8px;">Any value containing special characters that can break the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> join is encoded</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.5) Dependencies</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">If datepickers exist, include Flatpickr CSS and JS</li>
<li style="margin-bottom:8px;padding-left:8px;">If charts exist, include the chart library and the JS uses correct canvas IDs</li>
<li style="margin-bottom:8px;padding-left:8px;">If font icons used, include Font Awesome</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.6) End-of-script behavior</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">WebDirect Pause</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Refresh Window [ Flush cached join results ; Flush cached external data ]</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Known Ambiguities and Possible Contradictions Found in the Samples</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent needs clarity on the items below because they affect correctness and repeatability.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.1) Undefined script variables included in $Scripts</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In multiple scripts, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Scripts</code> concatenates variables that are not defined in the pasted script, including:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Toggle Accordion Script</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Add Another Item Script</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Close Alert Script</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Move Item Script</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Wizard Script</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Reset Account Script</code> (in Leave Request page there is a setter for it, but the variable name is used inside itself)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Choose File</code> (Department page uses it, Staff page defines it later)</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Question for you:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">1) Are these defined in a shared global script that always runs before details pages?</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">2) If yes, what is the canonical list of standard JS blocks that every details page can include safely?</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.2) Leave Request page: button style condition looks wrong</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This snippet appears inconsistent:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">... &amp; If ( not IsEmpty ( IsEmpty ( $Leave Type ID ) ) ; &quot; style=&#x27;width: 100%&#x27;&quot; ) &amp; ...</pre>
<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">IsEmpty ( IsEmpty ( $Leave Type ID ) )</code> produces a boolean inside <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">IsEmpty</code>, which is likely unintended.
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Question for you:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">What is the correct intent here?</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Is it: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">If ( IsEmpty ( $Leave Type ID ) ; &quot; style=&#x27;width: 100%&#x27;&quot; ; &quot;&quot; )</code>?</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.3) Leave Request toggle script references an element id that does not exist</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In Leave Request page JS:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const item = document.getElementById(&#x27;item&#x27;);
...
item.textContent = &#x27;Approved&#x27;;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">But the HTML uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;span class=&#x27;status&#x27; id=&#x27;status&#x27;&gt;...&lt;/span&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Question for you:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Should the JS always update <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id=&#x27;status&#x27;</code>?</li>
<li style="margin-bottom:8px;padding-left:8px;">Is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id=&#x27;item&#x27;</code> a leftover name from another page?</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.4) Staff page: toggle script references a missing FileMaker field placeholder</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This appears in the staff toggle script:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">window.onload = function() {
  preselectToggle(&#x27;&quot; &amp; &lt;Table Missing&gt;::&lt;Field Missing&gt; &amp; &quot;&#x27;);
};</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Question for you:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">What field controls staff active/inactive status for the toggle?</li>
<li style="margin-bottom:8px;padding-left:8px;">What are the correct table and field names used in the real script?</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.5) New record detection rule differs by page</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Leave Request page uses empty <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Leave Type ID</code> as a signal of a new request state.</li>
<li style="margin-bottom:8px;padding-left:8px;">Department page does not define defaults for no-record case.</li>
<li style="margin-bottom:8px;padding-left:8px;">Staff page defines defaults for some fields.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Question for you:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">What is the standard rule for &quot;new record mode&quot; across your app starter?</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Is it based on the entity ID being empty?</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Or based on <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ExecuteSQL</code> returning no rows?</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Or based on a specific field being empty?</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.6) Duration field format in Leave Request saving</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In Leave Request:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Duration input is set as <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;X Days&quot;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">The save function reads <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">duration = document.getElementById(&#x27;duration&#x27;).value;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">That value includes the word &quot;Days&quot;</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Question for you:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Should the save script expect a pure number, or <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;X Days&quot;</code> text?</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.7) Date fields: mix of stored MySQL vs displayed readable strings</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The scripts:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Store dates as MySQL <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Y-m-d</code> in variables</li>
<li style="margin-bottom:8px;padding-left:8px;">Convert to readable in Flatpickr on load</li>
<li style="margin-bottom:8px;padding-left:8px;">Convert back to MySQL via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">getMySQLFormattedDate()</code> on save</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Question for you:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Are all date fields stored in the database as MySQL date strings, or are some stored as FileMaker dates?</li>
<li style="margin-bottom:8px;padding-left:8px;">Is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FMPDateTextToMySQLDate()</code> always required before placing values into HTML?</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Implementation Template the AI Agent Should Follow</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to create a new details page script, generate it using this template flow.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.1) Script skeleton (high-level)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~filemaker</p>

            </div>
          </section>


          <section class="card section" id="dp-script-steps">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📋</span>
                <span>Details Page Script — Component Steps (1 through 10)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $$App Section ; Value: &quot;&lt;Title&gt;&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $$Selected Record ID ; Value: GetValue ( GetScriptParameters ; 1 ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $$&lt;Entity&gt; ID ; Value: GetValue ( GetScriptParameters ; 1 ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $$Search Item ; Value: GetValue ( GetScriptParameters ; 2 ) ]</p>
            </div>
          </section>

          <section class="card section" id="section-75">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>2) Action Scripts</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Save Record Script ; Value: &quot;Save &lt;Entity&gt;&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Cancel Script ; Value: &quot;+++ &lt;Entity&gt; List Page&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Delete Record Script ; Value: &quot;&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">/* add more if needed */</p>
            </div>
          </section>

          <section class="card section" id="section-76">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>3) Fetch Record Data (ExecuteSQL)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $List ; Value: Let ( [ sql=... ; fieldseparator=&quot;|&quot; ; rowseparator=&quot;¶&quot; ; id=$$&lt;Entity&gt; ID ; result=ExecuteSQL(...) ] ; result ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Total ; Value: ValueCount ( $List ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If [ $Total &gt; 0 ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Loop</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    /* parse fields into variables */</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Exit Loop If [ $i ≥ $Total ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  End Loop</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Else</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  /* defaults if needed */</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">End If</p>
            </div>
          </section>

          <section class="card section" id="section-77">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>4) Fetch Value Lists (Dropdown and JS)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Perform Script [ “Get Value List” ; Parameter: &quot;Dropdown|&lt;List&gt;|&quot; &amp; &lt;Selected&gt; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $&lt;DropdownVar&gt; ; Value: Get ( ScriptResult ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">/* more lists as needed */</p>
            </div>
          </section>

          <section class="card section" id="section-78">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>5) Generate Subtables</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $SQL ; Value: &quot;SELECT ...&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">/* set subtable meta vars */</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Perform Script [ “+++ Display Subtable HTML” ; Parameter: ... ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $&lt;SubTableVar&gt; ; Value: Get ( ScriptResult ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">/* repeat as needed */</p>
            </div>
          </section>

          <section class="card section" id="section-79">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>6) CSS</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Perform Script [ “🖌️ Use Details CSS” ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $styles ; Value: Get ( ScriptResult ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">/* optional extra CSS */</p>
            </div>
          </section>

          <section class="card section" id="section-80">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>7) HTML blocks</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Summary Section HTML ; Value: &quot;...&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Tabs HTML ; Value: &quot;...&quot; ] /* optional */</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Tab1 HTML ; Value: &quot;...&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">/* more tabs */</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $HTML ; Value: &quot;...&quot; ]</p>
            </div>
          </section>

          <section class="card section" id="section-81">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>8) JS blocks</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Show Content Script ; Value: &quot;...&quot; ] /* if tabs exist */</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Cancel Action Script ; Value: &quot;...&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Save Item Info Script ; Value: &quot;...&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">/* widget scripts as needed */</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Scripts ; Value: &quot;&lt;script&gt; &quot; &amp; ... &amp; &quot; &lt;/script&gt; &quot; ]</p>
            </div>
          </section>

          <section class="card section" id="section-82">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>9) Full document</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $$Page ; Value: &quot;&lt;!DOCTYPE html&gt;...&quot; ]</p>
            </div>
          </section>

          <section class="card section" id="section-83">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>10) End</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Perform Script [ “WebDirect Pause” ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Refresh Window [ Flush cached join results ; Flush cached external data ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />
              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">14) Minimum Deliverable: What a &quot;Complete&quot; Details Page Means</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A details page script is complete only if:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">It can load without missing variables</li>
<li style="margin-bottom:8px;padding-left:8px;">It can display existing record details accurately</li>
<li style="margin-bottom:8px;padding-left:8px;">It can save changes via the Save script</li>
<li style="margin-bottom:8px;padding-left:8px;">It can cancel back to a list page via the Cancel script</li>
<li style="margin-bottom:8px;padding-left:8px;">It can render all required dropdowns and subtables</li>
<li style="margin-bottom:8px;padding-left:8px;">It includes all required library references for widgets used</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a page supports creating new records from the details page, it is complete only if:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Defaults are set properly</li>
<li style="margin-bottom:8px;padding-left:8px;">Required fields are validated</li>
<li style="margin-bottom:8px;padding-left:8px;">Save creates the record and returns to the correct place</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">15) What the AI Agent Must Ask You When It Lacks Required Info</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the AI Agent is missing any of these, it must request clarification:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Entity table name and primary key field name used in SQL</li>
<li style="margin-bottom:8px;padding-left:8px;">The list page script name for cancel action</li>
<li style="margin-bottom:8px;padding-left:8px;">The save script name and expected parameter order</li>
<li style="margin-bottom:8px;padding-left:8px;">Which tabs exist and what each tab contains</li>
<li style="margin-bottom:8px;padding-left:8px;">Which value lists are required and whether they return Dropdown HTML or JS dictionaries</li>
<li style="margin-bottom:8px;padding-left:8px;">Which related lists (subtables) exist and their SQL plus column specs</li>
<li style="margin-bottom:8px;padding-left:8px;">Which UI widgets are required (datepickers, toggles, segmented control, charts, photo modal)</li>
<li style="margin-bottom:8px;padding-left:8px;">Whether the page supports new record creation and what defaults apply</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If you provide those, the AI Agent should be able to generate the complete script in your CauferoAppStarter style.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-modal">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">🪟</span>
                <span>Modal Page Generation in CauferoAppStarter</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation defines the exact pattern used in CauferoAppStarter to generate a modal page (a card window that pops up with details of a selected entity) using HTML, CSS, and JavaScript rendered in a FileMaker WebViewer.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The goal is to train an AI Agent to generate FileMaker scripts that match this pattern exactly.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />
              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) What a Modal Page Is in CauferoAppStarter</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A modal page in CauferoAppStarter is:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A <strong style="font-weight:600;color:#0f172a;">FileMaker script</strong> that:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Receives an entity ID or mode via Script Parameter(s)</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Pulls required data with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ExecuteSQL</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Builds an HTML string (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$HTML</code>)</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Builds JavaScript functions (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Scripts</code>)</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Gets base modal CSS from a shared script (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">🖌️ Use Modal CSS</code>)</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Assembles a full HTML document string into a global variable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Modal</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Opens a <strong style="font-weight:600;color:#0f172a;">Card</strong> window to the <strong style="font-weight:600;color:#0f172a;">Modal</strong> layout</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A <strong style="font-weight:600;color:#0f172a;">Modal layout</strong> that:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Contains a WebViewer that loads the HTML stored in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Modal</code> (the loading mechanism is part of the app shell and is not repeated inside each modal generator script)</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) Core Architecture Pattern</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every modal generator script follows this pipeline:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Read parameters</strong>
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Define the target FileMaker scripts</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Save script name</li>
<li style="margin-bottom:4px;">Cancel script name</li>
<li style="margin-bottom:4px;">Optional scripts (delete, insert image, row action, administer medication, etc.)</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Fetch data</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ExecuteSQL</code> using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">fieldseparator=&quot;|&quot;</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">rowseparator=&quot;¶&quot;</code></li>
<li style="margin-bottom:4px;">Parse the result by row and then by column</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Generate CSS</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ &quot;🖌️ Use Modal CSS&quot; ]</code></li>
<li style="margin-bottom:4px;">Optionally append extra CSS for custom controls</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Generate HTML</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">div.modal</code></li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">div.modal-header</code> (title)</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">div.modal-body</code> (form, cards, subtables, instructions)</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">div.modal-footer</code> (Save and Cancel buttons)</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Generate JavaScript</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Always includes <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">cancelUpdates()</code></li>
<li style="margin-bottom:4px;">Usually includes <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">saveUpdates()</code></li>
<li style="margin-bottom:4px;">Optionally includes helpers (date picker, segmented control, dropdown search, editor logic, BMI calc, list selection)</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Assemble full HTML page</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;!DOCTYPE html&gt; ... &lt;style&gt; ... &lt;/style&gt; ...</code></li>
<li style="margin-bottom:4px;">External libraries included only if needed (Flatpickr, Font Awesome)</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Store as <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Modal</code></strong>
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Open modal window (Card)</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Toolbars off, menu bar off, resize off, dim parent on</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) Standard Conventions and Required Variables</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.1 Script parameter handling</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Two styles exist in the samples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( ScriptParameter )</code> for a single parameter</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetValue ( GetScriptParameters ; n )</code> for multi-part parameters</li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Rule for AI Agent:</strong>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( ScriptParameter )</code> when exactly one value is passed.</li>
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetValue ( GetScriptParameters ; n )</code> when multiple values are passed.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $$Diagnosis ID ; Value: Get ( ScriptParameter ) ]
Set Variable [ $$Mode ; Value: GetValue ( GetScriptParameters ; 1 ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.2 Modal control script names</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every modal generator script defines:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A FileMaker script to save changes</li>
<li style="margin-bottom:8px;padding-left:8px;">A FileMaker script to close the modal</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Standard variable names used in the scripts:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Save Record Script</code> or <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Save Updates Script</code> (string name of FileMaker script)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Cancel Script</code> (string name of FileMaker script)</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Save Record Script ; Value: &quot;Save Diagnosis Details&quot; ]
Set Variable [ $Cancel Script ; Value: &quot;Close Window&quot; ]</pre>
<strong style="font-weight:600;color:#0f172a;">Important:</strong>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">There is a naming collision used in some scripts:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Save Updates Script</code> is first used as the FileMaker script name</li>
<li style="margin-bottom:8px;padding-left:8px;">Later reused as the JavaScript function text</li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Rule for AI Agent:</strong>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">To avoid confusion, prefer this naming internally:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$SaveFM</code> for FileMaker script name</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$CancelFM</code> for FileMaker script name</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$JS_Save</code> for JavaScript save function code</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$JS_Cancel</code> for JavaScript cancel function code</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">You can still output scripts in the legacy naming style if the target system expects it, yet keep your internal generation logic clean.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.3 Global variable for modal HTML</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">All modal pages are stored into:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Modal</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $$Modal ; Value: &quot;&lt;!DOCTYPE html&gt; ... &lt;/html&gt;&quot; ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.4 Standard delimiters</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">SQL field separator: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
<li style="margin-bottom:8px;padding-left:8px;">SQL row separator: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">¶</code></li>
<li style="margin-bottom:8px;padding-left:8px;">JS parameters to FileMaker: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> joined strings, or JSON string</li>
<li style="margin-bottom:8px;padding-left:8px;">Special delimiters used in some complex saves:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">vvvvvvvvvv</code> between row payloads in subtables</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Prefix labels like <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ITEMS:</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">TREATMENT_CHART:</code> separated by <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">¶</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const parameters = [ a, b, c ].join(&#x27;|&#x27;);
FileMaker.PerformScript(&#x27;Save Script Name&#x27;, parameters);</pre>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const tableDataString = updatedData.map(item =&gt; <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">${item.id}|${item.value}</code>).join(&#x27;vvvvvvvvvv&#x27;);
const combinedParameters = <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ITEMS:${parameters}¶TREATMENT_CHART:${tableDataString}</code>;
FileMaker.PerformScript(&#x27;Save Treatment Chart&#x27;, combinedParameters);</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) Data Retrieval Pattern (ExecuteSQL + Parsing)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 SQL select</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Typical pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $List ;
  Value:
    Let (
      [
        sql = &quot;SELECT \&quot;Field1\&quot;, \&quot;Field2\&quot;
               FROM \&quot;Table\&quot;
               WHERE \&quot;ID\&quot; = ?&quot; ;
        fieldseparator = &quot;|&quot; ;
        rowseparator = &quot;¶&quot; ;
        id = $$Some ID ;
        result = ExecuteSQL ( sql ; fieldseparator ; rowseparator ; id )
      ] ;
      result
    )
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2 Parse result rows and columns</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Typical pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Total ; Value: ValueCount ( $List ) ]

If [ $Total &gt; 0 ]
  Loop
    Set Variable [ $i ; Value: $i + 1 ]
    Set Variable [ $Row ; Value: GetValue ( $List ; $i ) ]
    Set Variable [ $RowAsList ; Value: Substitute ( $Row ; &quot;|&quot; ; ¶ ) ]

    Set Variable [ $Field1 ; Value: GetValue ( $RowAsList ; 1 ) ]
    Set Variable [ $Field2 ; Value: GetValue ( $RowAsList ; 2 ) ]

    Exit Loop If [ $i ≥ $Total ]
  End Loop
Else
  # Optional defaults
End If</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.3 Formatting and conversion helpers</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These are frequently used:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ConvertLineBreakMarkersToReturns ( ... )</code> for text stored with markers</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">RelativeDateInWords ( ... )</code> for display-friendly dates</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">MySQLDateToFMPDateText ( ... )</code> to convert date formats (custom function)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">DefaultIfEmpty ( x ; &quot;fallback&quot; )</code> (custom function)</li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Rule for AI Agent:</strong>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Display formatting is handled before HTML generation.</li>
<li style="margin-bottom:8px;padding-left:8px;">HTML receives already formatted strings except for interactive date pickers which may store MySQL dates and convert on load.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) CSS Generation Pattern</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 Base modal CSS</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every modal uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ &quot;🖌️ Use Modal CSS&quot; ]
Set Variable [ $styles ; Value: Get ( ScriptResult ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Append extra CSS when needed</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Some modals add custom controls and append CSS via:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $styles ; Value: $styles &amp; &quot; ...extra css... &quot; ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Common appended CSS blocks in the samples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Searchable dropdown styling (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.dropdown-container</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.dropdown-input</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.dropdown-list</code>)</li>
<li style="margin-bottom:8px;padding-left:8px;">Rich text editor styling (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.toolbar</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">#editor</code>)</li>
<li style="margin-bottom:8px;padding-left:8px;">Custom cards or grids (vitals cards, KPI cards, etc.)</li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Rule for AI Agent:</strong>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use base CSS always.</li>
<li style="margin-bottom:8px;padding-left:8px;">Append only the required CSS for the controls used in that modal.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) HTML Structure Standard</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 Wrapper skeleton</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">All modals use:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;modal&#x27;&gt;
  &lt;div class=&#x27;modal-header&#x27;&gt;TITLE&lt;/div&gt;

  &lt;div class=&#x27;modal-body&#x27;&gt;
    &lt;form id=&#x27;update-form&#x27;&gt;
      &lt;!-- content --&gt;
    &lt;/form&gt;
  &lt;/div&gt;

  &lt;div class=&#x27;modal-footer&#x27;&gt;
    &lt;button type=&#x27;button&#x27; class=&#x27;save-button&#x27; onclick=&quot;saveUpdates()&quot;&gt;
      &lt;i class=&#x27;fas fa-save&#x27;&gt;&lt;/i&gt;
      Save
    &lt;/button&gt;
    &lt;button type=&#x27;button&#x27; class=&#x27;cancel-button&#x27; onclick=&quot;cancelUpdates()&quot;&gt;
      &lt;i class=&#x27;fas fa-times&#x27;&gt;&lt;/i&gt;
      Cancel
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Inputs and IDs</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Inputs must have stable IDs because JS reads them by <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.getElementById(...)</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">institution</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">programme</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">result</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">start_date</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">end_date</code> and icon IDs <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">start_date_icon</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">end_date_icon</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">height</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">weight</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">bmi</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">temperature</code>, etc.</li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Rule for AI Agent:</strong>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Every field that is saved must have a deterministic <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code>.</li>
<li style="margin-bottom:8px;padding-left:8px;">JS must read those IDs and serialize values in the agreed format.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.3 Field groups</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These CSS classes appear repeatedly:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-group-2</code> for two-column grid fields</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-grid1</code> as a grid wrapper</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.instructions1</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.instructions2</code> for top info blocks</li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Rule for AI Agent:</strong>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Match the visual grouping style:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Simple details pages: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-grid1</code> with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-group-2</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Dashboard or metrics pages: cards in a grid</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Heavy editor pages: custom editor block, footer stays standard</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) JavaScript Structure Standard</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Required: cancelUpdates()</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every modal includes this exact idea:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function cancelUpdates() {
  FileMaker.PerformScript(&#x27;Close Script Name&#x27;);
}</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In FileMaker concatenation:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Cancel Updates Script ;
  Value:
&quot;function cancelUpdates() {

         FileMaker.PerformScript(&#x27;&quot; &amp; $Cancel Script &amp; &quot;&#x27;);

}&quot;
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2 Required in edit modals: saveUpdates()</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The save function:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Reads values from DOM</li>
<li style="margin-bottom:8px;padding-left:8px;">Encodes values if needed</li>
<li style="margin-bottom:8px;padding-left:8px;">Builds either:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - A pipe-delimited string for simple cases, or</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - JSON for complex structures</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Calls <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript(saveScriptName, parameters)</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Pipe example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function saveUpdates() {
  const a = document.getElementById(&#x27;a&#x27;).value;
  const b = document.getElementById(&#x27;b&#x27;).value;
  const parameters = [a, b].join(&#x27;|&#x27;);
  FileMaker.PerformScript(&#x27;Save Script Name&#x27;, parameters);
}</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JSON example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function saveUpdates() {
  const data = { items: selectedItems };
  const parameters = JSON.stringify(data);
  FileMaker.PerformScript(&#x27;Save Script Name&#x27;, parameters);
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.3 Script bundling into one script tag</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The system uses a single variable:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Scripts</code> containing <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;script&gt; ... &lt;/script&gt;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Scripts ;
  Value:
&quot;&lt;script&gt; &quot; &amp;
  $Save Updates Script &amp; &quot;¶¶&quot; &amp;
  $Cancel Updates Script &amp; &quot;¶¶&quot; &amp;
  $Some Other Script &amp;
&quot; &lt;/script&gt;&quot;
]</pre>
<strong style="font-weight:600;color:#0f172a;">Rule for AI Agent:</strong>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Build each JS function as a string.</li>
<li style="margin-bottom:8px;padding-left:8px;">Concatenate them into one <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;script&gt;</code> block.</li>
<li style="margin-bottom:8px;padding-left:8px;">Separate chunks with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">¶¶</code> for readability (it is used consistently in the sample scripts).</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Full Page Assembly Pattern</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every modal writes a full HTML document:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1 Standard head includes</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;meta charset=&#x27;UTF-8&#x27;&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;meta name=&#x27;viewport&#x27; content=&#x27;width=device-width, initial-scale=1.0&#x27;&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Font Awesome stylesheet</li>
<li style="margin-bottom:8px;padding-left:8px;">Optional Flatpickr CSS and JS when date pickers exist</li>
<li style="margin-bottom:8px;padding-left:8px;">Inline <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;style&gt;</code> with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$styles</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $$Modal ;
  Value:
&quot;&lt;!DOCTYPE html&gt;
&lt;html lang=&#x27;en&#x27;&gt;

&lt;head&gt;
   &lt;meta charset=&#x27;UTF-8&#x27;&gt;
   &lt;meta name=&#x27;viewport&#x27; content=&#x27;width=device-width, initial-scale=1.0&#x27;&gt;
   &lt;title&gt;Modal Page&lt;/title&gt;
   &lt;link rel=&#x27;stylesheet&#x27; href=&#x27;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css&#x27;&gt;
   &lt;style&gt; &quot; &amp; $styles &amp; &quot; &lt;/style&gt;
&lt;/head&gt;

&lt;body&gt; &quot; &amp; $HTML &amp; &quot;¶¶&quot; &amp; $Scripts &amp; &quot; &lt;/body&gt;

&lt;/html&gt;
&quot;
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.2 Flatpickr inclusion rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Only include Flatpickr when a datepicker is used:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;link rel=&#x27;stylesheet&#x27; href=&#x27;https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css&#x27;&gt;
&lt;script src=&#x27;https://cdn.jsdelivr.net/npm/flatpickr&#x27;&gt;&lt;/script&gt;</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Window Opening Pattern</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 Standard Card window settings</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Most modals do:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">New Window [
  Style: Card ;
  Height: 750 ;
  Width: 600 ;
  Dim parent window: On ;
  Toolbars: Off ;
  Menu Bar: Off ;
  Close: Off ;
  Minimize: Off ;
  Maximize: Off ;
  Resize: Off ;
  Layout: &quot;Modal&quot;
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 Refresh or reuse modal window variant</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Some scripts check whether a modal window already exists:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">If [ $$Window = &quot;Modal&quot; ]
  Refresh Window [ Flush cached join results ; Flush cached external data ]
Else
  New Window [ Style: Card ; ... ; Layout: &quot;Modal&quot; ]
End If</pre>
<strong style="font-weight:600;color:#0f172a;">Rule for AI Agent:</strong>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Default to opening a new Card window unless the surrounding shell expects reuse.</li>
<li style="margin-bottom:8px;padding-left:8px;">If reuse is required, follow the existing convention with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Window</code>.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Common UI Objects Used Across Modals</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation does not fully define each object implementation. It defines how they are assembled into the modal.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.1 Simple form fields</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Text inputs</li>
<li style="margin-bottom:8px;padding-left:8px;">Textareas</li>
<li style="margin-bottom:8px;padding-left:8px;">Select dropdowns</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Pattern:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;label for=&#x27;id&#x27;&gt;Label&lt;/label&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input id=&#x27;id&#x27; value=&#x27;...&#x27;&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;textarea id=&#x27;id&#x27;&gt;...&lt;/textarea&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select id=&#x27;id&#x27;&gt;...options...&lt;/select&gt;</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.2 Date fields with icon-triggered picker</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Structure:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div style=&#x27;position: relative;&#x27;&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;start_date&#x27; value=&#x27;YYYY-MM-DD&#x27;&gt;
  &lt;i class=&#x27;fas fa-calendar-alt&#x27; id=&#x27;start_date_icon&#x27; style=&#x27;position: absolute; right: 10px; top: 50%; transform: translateY(-50%); ...&#x27;&gt;&lt;/i&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS idea:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">On load, convert MySQL date to readable</li>
<li style="margin-bottom:8px;padding-left:8px;">Flatpickr attaches to input</li>
<li style="margin-bottom:8px;padding-left:8px;">Icon click opens picker</li>
<li style="margin-bottom:8px;padding-left:8px;">A helper returns MySQL format to save</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.3 Segmented control buttons</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Structure:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;segmented-control&#x27;&gt;
  &lt;button class=&#x27;active&#x27; onclick=&quot;selectSegmentedControl(this)&quot;&gt;Cash&lt;/button&gt;
  &lt;button onclick=&quot;selectSegmentedControl(this)&quot;&gt;Insurance&lt;/button&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS idea:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Toggle active class</li>
<li style="margin-bottom:8px;padding-left:8px;">Show or hide related fields based on selection</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.4 Searchable dropdown (custom)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Structure:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Visible text input for searching</li>
<li style="margin-bottom:8px;padding-left:8px;">Hidden input for UUID</li>
<li style="margin-bottom:8px;padding-left:8px;">UL list to show results</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS idea:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Load network list as JS array</li>
<li style="margin-bottom:8px;padding-left:8px;">Filter by typed text</li>
<li style="margin-bottom:8px;padding-left:8px;">Show first N results</li>
<li style="margin-bottom:8px;padding-left:8px;">Infinite scroll load more</li>
<li style="margin-bottom:8px;padding-left:8px;">Preselect default by UUID</li>
<li style="margin-bottom:8px;padding-left:8px;">Hide dropdown on outside click</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.5 Selection list with checkboxes and row highlight</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Structure comes from a Value List helper script (HTML chunk injected into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$HTML</code>).</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS idea:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Preselect rows from FileMaker-provided IDs</li>
<li style="margin-bottom:8px;padding-left:8px;">Clicking row toggles checkbox</li>
<li style="margin-bottom:8px;padding-left:8px;">Save returns JSON list of selected items</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.6 Subtable block inside modal</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Subtable HTML is generated by a helper FileMaker script and injected into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$HTML</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The generator script supplies:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">SQL</li>
<li style="margin-bottom:8px;padding-left:8px;">Column headers</li>
<li style="margin-bottom:8px;padding-left:8px;">Column widths</li>
<li style="margin-bottom:8px;padding-left:8px;">Column type hints (date columns, number columns)</li>
<li style="margin-bottom:8px;padding-left:8px;">Input-enabled columns</li>
<li style="margin-bottom:8px;padding-left:8px;">Table ID used by JS to collect changes</li>
<li style="margin-bottom:8px;padding-left:8px;">Add-new button label and JS hook name</li>
<li style="margin-bottom:8px;padding-left:8px;">Empty-state icon and message</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Save logic for subtables:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Loop all rows in tbody</li>
<li style="margin-bottom:8px;padding-left:8px;">Each row has <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">data-id</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Collect inputs per row</li>
<li style="margin-bottom:8px;padding-left:8px;">Serialize with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">vvvvvvvvvv</code> delimiter</li>
<li style="margin-bottom:8px;padding-left:8px;">Attach to a combined parameter string with a prefix label</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.7 Rich text editor block (contenteditable)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Editor HTML injected into modal:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Toolbar buttons</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;div id=&quot;editor&quot; contenteditable=&quot;true&quot;&gt;...&lt;/div&gt;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS idea:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.execCommand</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Maintains selection restore logic</li>
<li style="margin-bottom:8px;padding-left:8px;">Converts links to open in new tab</li>
<li style="margin-bottom:8px;padding-left:8px;">On save, returns HTML encoded and sanitized for delimiters</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Encoding and Safety Rules</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.1 Pipe delimiter protection</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a saved field can contain <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>, the pipe breaks the delimiter protocol.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Observed strategy in the editor script:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Replace <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> with a safe token before building parameters</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">editor = editor.replace(/\|/g, &#x27;ppippe&#x27;);</pre>
<strong style="font-weight:600;color:#0f172a;">Rule for AI Agent:</strong>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">If saving pipe-delimited parameters, sanitize any field that may contain <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>.</li>
<li style="margin-bottom:8px;padding-left:8px;">If saving large or complex text, prefer JSON over pipe delimiting.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.2 URL / text encoding</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Observed patterns:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent(text)</code> for textarea or rich content</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent(editorHTML)</code> inside JSON payload</li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Rule for AI Agent:</strong>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">If a field can contain line breaks, quotes, or special characters, encode it.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.3 Disabled mode</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Some modals disable editing based on layout context:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;textarea id=&#x27;remarks&#x27; ... disabled&gt;...&lt;/textarea&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In FileMaker concatenation:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">If ( $$Layout Name = &quot;Past Visits&quot; ; &quot;disabled&quot; )</pre>
<strong style="font-weight:600;color:#0f172a;">Rule for AI Agent:</strong>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">When modal is used for viewing historical records, disable input controls and still allow Cancel.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Modal Script Specification Template (AI Agent Must Follow)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is the standard blueprint the AI Agent should implement for any new modal page.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.1 Required Inputs (design-time specification)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">For each new modal, the AI must be given:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Modal purpose and title
</li>
<li style="margin-bottom:8px;padding-left:8px;">Entity type and primary key ID
</li>
<li style="margin-bottom:8px;padding-left:8px;">Save script name (FileMaker)
</li>
<li style="margin-bottom:8px;padding-left:8px;">Cancel script name (FileMaker)
</li>
<li style="margin-bottom:8px;padding-left:8px;">Fields:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Field label</li>
<li style="margin-bottom:4px;">DOM id</li>
<li style="margin-bottom:4px;">Input type (text, number, textarea, select, segmented, date)</li>
<li style="margin-bottom:4px;">Default value rule</li>
<li style="margin-bottom:4px;">Save encoding rule (none, encodeURIComponent, JSON)</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Data source:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Table name(s)</li>
<li style="margin-bottom:4px;">ExecuteSQL query</li>
<li style="margin-bottom:4px;">Any joins needed</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">UI objects used:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Date picker</li>
<li style="margin-bottom:4px;">Searchable dropdown</li>
<li style="margin-bottom:4px;">Selection list</li>
<li style="margin-bottom:4px;">Subtable</li>
<li style="margin-bottom:4px;">Rich editor</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Window size:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Height</li>
<li style="margin-bottom:4px;">Width</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">View-only rules (if any):
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Disable fields on certain layouts or modes</li>
</ul>
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.2 Required Output (FileMaker script code)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The generated script must contain these sections in order:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Get Script Parameter(s) into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$...</code> variables
</li>
<li style="margin-bottom:8px;padding-left:8px;">Set FileMaker script name variables
</li>
<li style="margin-bottom:8px;padding-left:8px;">Fetch data with ExecuteSQL
</li>
<li style="margin-bottom:8px;padding-left:8px;">Parse into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Field</code> variables
</li>
<li style="margin-bottom:8px;padding-left:8px;">Generate CSS
</li>
<li style="margin-bottom:8px;padding-left:8px;">Generate HTML into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$HTML</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Generate JS into:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Cancel Updates Script</code></li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Save Updates Script</code></li>
<li style="margin-bottom:4px;">plus any helper scripts</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Combine JS into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Scripts</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Combine full page into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Modal</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Open Card window to layout <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Modal</code>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Object-Specific Assembly Guides (How to Combine Parts)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.1 Simple details modal (Staff Education pattern)</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Fetch 1 record by ID</li>
<li style="margin-bottom:8px;padding-left:8px;">Show input fields in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.form-grid1</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Add flatpickr for date fields</li>
<li style="margin-bottom:8px;padding-left:8px;">Save returns a pipe-delimited list of values</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Key assembly checklist:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Flatpickr included in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;head&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">JS includes:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">getMySQLFormattedDate(fieldId)</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">saveUpdates()</code> uses it for date fields</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.2 Assign list modal (Appraisal template assignment pattern)</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Pull list HTML from <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code> helper</li>
<li style="margin-bottom:8px;padding-left:8px;">Preselect items using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Selected IDs</code> (return-separated string)</li>
<li style="margin-bottom:8px;padding-left:8px;">Save returns JSON with selected rows details</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Key assembly checklist:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Row elements must expose:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">data-id</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">input.rowCheckbox</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.item-title</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.item-subtitle</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.item-description</code></p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">JS must:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Toggle <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.selected</code> class</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Update selected count UI element if present</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.3 Conditional fields modal (Payment option pattern)</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Segmented control chooses a mode</li>
<li style="margin-bottom:8px;padding-left:8px;">JS toggles visibility of field containers</li>
<li style="margin-bottom:8px;padding-left:8px;">Some dropdowns are populated from JS objects injected from FileMaker</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Key assembly checklist:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Segmented control buttons call <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">selectSegmentedControl(this)</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">DOMContentLoaded</code> runs initial visibility setup</li>
<li style="margin-bottom:8px;padding-left:8px;">Insurer and policies dropdowns:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">const insurers = { ... }</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">const policies = { ... }</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Populate insurer options</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Populate policy options when insurer changes</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Preselect insurer and policy when IDs exist</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.4 Dashboard card modal (Vitals pattern)</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Fetch data by ID, else default to current user and time</li>
<li style="margin-bottom:8px;padding-left:8px;">Render a grid of cards with inputs</li>
<li style="margin-bottom:8px;padding-left:8px;">Some fields computed live (BMI)</li>
<li style="margin-bottom:8px;padding-left:8px;">Save returns pipe-delimited numeric values</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Key assembly checklist:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">calculateBMI()</code> runs on input events for height and weight</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">bmi</code> field is readonly</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.5 Subtable inside modal (Treatment chart pattern)</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Fetch header details (medication, dosage)</li>
<li style="margin-bottom:8px;padding-left:8px;">Generate subtable HTML via helper script <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ Display Subtable HTML</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Provide Add New Entry button that calls a FileMaker script (administer medication)</li>
<li style="margin-bottom:8px;padding-left:8px;">Save collects row updates from table inputs</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Key assembly checklist:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Subtable table has stable ID (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">treatmentChartTable</code>)</li>
<li style="margin-bottom:8px;padding-left:8px;">Each <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">tr</code> has <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">data-id</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Save builds combined parameters:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ITEMS:...</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">TREATMENT_CHART:...</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.6 Rich editor modal (Nurse note pattern)</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Modal title based on <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Mode</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Uses contenteditable editor and toolbar</li>
<li style="margin-bottom:8px;padding-left:8px;">Save returns JSON with encoded HTML</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Key assembly checklist:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Editor uses selection save and restore</li>
<li style="margin-bottom:8px;padding-left:8px;">Links open in new tab, prevent navigation inside WebViewer</li>
<li style="margin-bottom:8px;padding-left:8px;">Save replaces pipe characters and encodes HTML</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.7 Searchable dropdown modal (Diagnosis pattern)</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Data list injected as JS array of objects</li>
<li style="margin-bottom:8px;padding-left:8px;">Input filters list and writes selection into hidden field</li>
<li style="margin-bottom:8px;padding-left:8px;">Save uses hidden UUID field and encoded remarks</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Key assembly checklist:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Preselect existing UUID on load</li>
<li style="margin-bottom:8px;padding-left:8px;">Infinite scroll loads more results in chunks</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">14) Helper Scripts and External Dependencies</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This modal system assumes the existence of helper scripts that return reusable chunks:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">🖌️ Use Modal CSS</code>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Returns the base CSS for <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.modal</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.modal-header</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.modal-body</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.modal-footer</code>, buttons, grids, form groups</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Returns either:</li>
<li style="margin-bottom:4px;">HTML options for <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt;</code></li>
<li style="margin-bottom:4px;">Full HTML blocks for checklist selection list</li>
<li style="margin-bottom:4px;">JavaScript object literal strings for dynamic dropdowns</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ Display Subtable HTML</code>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Returns a fully formed HTML table widget with optional inline inputs</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">WebDirect Pause</code>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">A compatibility helper for WebDirect rendering flow</li>
</ul>
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">External libraries used in modals:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Font Awesome (icons)</li>
<li style="margin-bottom:8px;padding-left:8px;">Flatpickr (date picker)</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">15) Quality Rules the AI Agent Must Follow</h3>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Keep IDs consistent between HTML and JS.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Keep Save and Cancel behavior consistent with the pattern.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ExecuteSQL</code> with parameter binding (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">?</code>) for IDs.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Avoid injecting raw unescaped text into HTML when it can break attributes.
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">When placing values inside <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">value=&#x27;...&#x27;</code>, ensure they do not contain <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&#x27;</code>.</li>
<li style="margin-bottom:4px;">If the system does not escape, the AI must apply a safe substitution rule.</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Prefer JSON for complex payloads.
</li>
<li style="margin-bottom:8px;padding-left:8px;">If using pipe-delimited parameters, sanitize pipe characters in user-entered fields.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Include only required external dependencies in the page head.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Always store final page string in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Modal</code> before opening the modal window.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Use a Card window to the Modal layout with dim parent on.
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">16) Ambiguities, Contradictions, and Clarifications Needed</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent can generate correct scripts only if these are clarified.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">16.1 How the Modal layout loads <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Modal</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In the provided scripts, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Modal</code> is set and a new card window opens, yet there is no explicit WebViewer action shown (no <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Set Web Viewer</code> step).</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Clarification needed:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Does the Modal layout contain a WebViewer that auto-loads <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Modal</code> using a calculation like <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetAsText ( $$Modal )</code> or a data URL technique?</li>
<li style="margin-bottom:8px;padding-left:8px;">Is there an OnLayoutEnter trigger that pushes <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Modal</code> into the WebViewer?</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">16.2 Inconsistent parameter function name</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Some scripts use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetScriptParameters</code> while FileMaker standard is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( ScriptParameter )</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Clarification needed:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetScriptParameters</code> a custom function in this file?</li>
<li style="margin-bottom:8px;padding-left:8px;">If yes, what exactly does it return and how is it structured?</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">16.3 Variable naming collision: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Save Updates Script</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In multiple scripts, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Save Updates Script</code> is used as:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker script name string, and later</li>
<li style="margin-bottom:8px;padding-left:8px;">JavaScript function body string</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Clarification needed:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Is this a deliberate style choice you want preserved?</li>
<li style="margin-bottom:8px;padding-left:8px;">Or should the AI Agent always keep separate names for FM script name and JS function code?</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">16.4 Payment Option modal references <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Patient ID</code> without showing it being set</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The Payment Option modal validates a patient exists using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Patient ID</code>, yet that variable is not set in the snippet.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Clarification needed:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Where is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Patient ID</code> set for that modal flow?</li>
<li style="margin-bottom:8px;padding-left:8px;">Should every modal that depends on parent entity enforce such validation?</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">16.5 Datepicker script included where date fields are not present</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In the Payment Option script, a datepicker script block exists with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">date_scheduled</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">date_completed</code>, yet those IDs do not exist in the HTML.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Clarification needed:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Is that block a leftover template piece?</li>
<li style="margin-bottom:8px;padding-left:8px;">Should the AI Agent include datepicker blocks only when those inputs exist?</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">16.6 Escaping values inserted inside HTML attributes</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Values are inserted into:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;input value=&#x27;&quot; &amp; $Value &amp; &quot;&#x27;&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Value</code> contains a single quote, it can break HTML.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Clarification needed:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Do you already sanitize values before insertion?</li>
<li style="margin-bottom:8px;padding-left:8px;">Do you want the AI Agent to always sanitize <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&#x27;</code> into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&amp;#39;</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;</code> into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&amp;quot;</code> when injecting into attributes?</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">16.7 The dropdown naming mismatch in Diagnosis modal</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The diagnosis modal uses IDs like <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">momo_network</code> for a medical condition selector.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Clarification needed:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Is this naming intentionally reused to reduce code duplication?</li>
<li style="margin-bottom:8px;padding-left:8px;">Or should the AI Agent generate semantically correct IDs per modal?</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">16.8 Special delimiters used for subtable saves</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The treatment chart save uses:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">vvvvvvvvvv</code> as a row delimiter</li>
<li style="margin-bottom:8px;padding-left:8px;">Combined parameter string with labels</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Clarification needed:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Are these delimiters standardized across all subtables?</li>
<li style="margin-bottom:8px;padding-left:8px;">Do you want a single canonical delimiter set for all subtable modals?</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">17) Minimal Reference Implementation Blueprint (Pseudo)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This section is a compact spec the AI Agent can follow.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~text</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">INPUT:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">ModalName</li>
<li style="margin-bottom:8px;padding-left:8px;">Title</li>
<li style="margin-bottom:8px;padding-left:8px;">PrimaryIDVar (global $$...)</li>
<li style="margin-bottom:8px;padding-left:8px;">SQL query + binds</li>
<li style="margin-bottom:8px;padding-left:8px;">Field map: { label, domId, type, default, encoding }</li>
<li style="margin-bottom:8px;padding-left:8px;">SaveScriptFM, CancelScriptFM</li>
<li style="margin-bottom:8px;padding-left:8px;">Optional widgets: datepicker, segmented, dropdownSearch, selectionList, subtable, editor</li>
<li style="margin-bottom:8px;padding-left:8px;">Window size</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">OUTPUT:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker script that:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Reads parameter(s) into $$...</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Sets $SaveFM and $CancelFM</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Executes SQL, parses fields</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Calls 🖌️ Use Modal CSS and appends extras</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Builds $HTML with modal wrapper, form, footer buttons</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Builds JS functions:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    - cancelUpdates() always</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    - saveUpdates() when editable</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    - widget helpers based on usage</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Assembles $$Modal full HTML doc</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Opens Card window to Modal layout</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-addnew">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">➕</span>
                <span>Add New Entity Scripts — Naming, Contracts &amp; Examples</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Generate a FileMaker Script That Creates a New Record for Any Entity Type</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Purpose</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This document teaches an AI Agent how to generate a FileMaker script that creates a new record for any entity type in <strong style="font-weight:600;color:#0f172a;">CauferoAppStarter</strong>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This script is the standard <strong style="font-weight:600;color:#0f172a;">entry point</strong> used by a List Page button like:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Add New Department</li>
<li style="margin-bottom:8px;padding-left:8px;">Add New Material</li>
<li style="margin-bottom:8px;padding-left:8px;">Add New Job Title</li>
<li style="margin-bottom:8px;padding-left:8px;">Add New Logo File</li>
<li style="margin-bottom:8px;padding-left:8px;">Add Staff Emergency Contact</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Core Pattern Used in CauferoAppStarter</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">CauferoAppStarter uses a simple, reliable pattern:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">The Add New script does not directly create the record.</strong>
</li>
<li style="margin-bottom:8px;padding-left:8px;">It generates a brand new UUID using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( UUID )</code>.
</li>
<li style="margin-bottom:8px;padding-left:8px;">It calls the target <strong style="font-weight:600;color:#0f172a;">Details Page</strong> script (or <strong style="font-weight:600;color:#0f172a;">Modal Page</strong> script) and passes that UUID.
</li>
<li style="margin-bottom:8px;padding-left:8px;">The target page script uses the UUID to do an <strong style="font-weight:600;color:#0f172a;">Upsert-by-UUID</strong>:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">If a record with that UUID exists, it opens it.</li>
<li style="margin-bottom:4px;">If it does not exist, it creates a new record and sets its UUID to the passed value.</li>
</ul>
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This means the Add New script is extremely consistent across all entities and very easy to auto-generate.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Evidence From Existing Samples (Naming and Call Style)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your samples show this exact call style:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ Specified: From list ; &quot;+++ Department Details Page&quot; ; Parameter: Get ( UUID ) ]</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ Specified: From list ; &quot;+++ Material Details Page&quot; ; Parameter: Get ( UUID ) ]</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ Specified: From list ; &quot;+++ Job Title Details Page&quot; ; Parameter: Get ( UUID ) ]</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ Specified: From list ; &quot;+++ Logo File Details Page&quot; ; Parameter: Get ( UUID ) ]</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ Specified: From list ; &quot;+++ Staff Emergency Contacts Modal Page&quot; ; Parameter: Get ( UUID ) ]</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">So the Add New script is a consistent delegator that provides the new UUID.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>

          <section class="card section" id="section-86">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>1) What The AI Agent Must Generate</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1.1 Script Goal</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Generate a script that can be attached to an &quot;Add New &lt;Entity&gt;&quot; button on a List Page, and that will result in a new record being created for that entity type and opened on the correct UI (Details Page or Modal Page).</p>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1.2 Input</h3>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">No required script parameter.</li>
<li style="margin-bottom:8px;padding-left:8px;">The script itself generates a new UUID using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( UUID )</code>.</li>
</ul>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1.3 Output</h3>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The script navigates the user into the correct entity UI.</li>
<li style="margin-bottom:8px;padding-left:8px;">The resulting entity record will have a UUID equal to the generated UUID.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The script usually does not return anything. If your framework uses script results, the expected result is the created UUID.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>

          <section class="card section" id="section-87">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>2) Naming Rules and Conventions</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2.1 Script Name</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The Add New script name should reflect the UI button label and entity.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Recommended naming pattern:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Add New &lt;Entity&gt;</code> as the visible label</li>
<li style="margin-bottom:8px;padding-left:8px;">Script name can match label or follow internal naming, as long as it is consistent</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Add New Department</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Add New Material</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Add New Job Title</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Add New Logo File</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Add Staff Emergency Contact</code></li>
</ul>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2.2 Target Script Name</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The Add New script must call one of these target scripts:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">A) Entity Details Page Script</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Pattern:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ &lt;Entity&gt; Details Page</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ Department Details Page</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ Material Details Page</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ Job Title Details Page</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ Logo File Details Page</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">B) Entity Modal Page Script</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Pattern:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ &lt;Entity&gt; Modal Page</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ Staff Emergency Contacts Modal Page</code></li>
</ul>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2.3 Script Call Context</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use the Perform Script step exactly like your samples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Specified: From list</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Target script name must match exactly</li>
<li style="margin-bottom:8px;padding-left:8px;">Parameter must be <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( UUID )</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>

          <section class="card section" id="section-88">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>3) The Add New Script Specification</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3.1 High-Level Algorithm</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When generating the Add New script, follow these steps:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Generate a new UUID for the record.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Perform the target page script (Details Page or Modal Page).
</li>
<li style="margin-bottom:8px;padding-left:8px;">Pass the new UUID as the script parameter.
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">That is all.</p>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3.2 Script Steps Template</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is the exact pattern the AI Agent must produce.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~filemaker</p>

            </div>
          </section>

          <section class="card section" id="section-89">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Script: Add New &lt;Entity&gt;</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Perform Script [</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Specified: From list ;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    &quot;+++ &lt;Entity&gt; Details Page&quot; ;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Parameter: Get ( UUID )</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">]</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">
If the entity is shown in a modal, replace the target script:
</pre>filemaker
            </div>
          </section>

          <section class="card section" id="section-90">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Script: Add &lt;Entity&gt; (Modal)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Perform Script [</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Specified: From list ;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    &quot;+++ &lt;Entity&gt; Modal Page&quot; ;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Parameter: Get ( UUID )</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~</p>
              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3.3 Why This Works</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Because the target script receives the UUID and performs the Upsert-by-UUID logic:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Find record by UUID</li>
<li style="margin-bottom:8px;padding-left:8px;">Create if missing</li>
<li style="margin-bottom:8px;padding-left:8px;">Load the UI</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This keeps the Add New scripts uniform, fast to generate, and easy to maintain.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>

          <section class="card section" id="section-91">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>4) Target Page Script Contract (Required For Record Creation)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Even though this documentation focuses on the Add New script, the record creation only succeeds if the target page script follows this contract.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must assume this contract exists, and must flag it if it is missing.</p>
              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4.1 Contract Summary</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Target script receives <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( ScriptParameter )</code> as <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$targetUUID</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then it must:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Validate <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$targetUUID</code> is not empty.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Try to locate an existing record by UUID.
</li>
<li style="margin-bottom:8px;padding-left:8px;">If not found, create a new record and set UUID to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$targetUUID</code>.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Continue building the page or modal for that record.
</li>
</ol>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4.2 Contract Pseudocode</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~filemaker</p>

            </div>
          </section>

          <section class="card section" id="section-92">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Script: +++ &lt;Entity&gt; Details Page</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-93">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Parameter: targetUUID</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $targetUUID ; Get ( ScriptParameter ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If [ IsEmpty ( $targetUUID ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    # Handle error (dialog, exit, log)</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Exit Script [ Result: &quot;&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">End If</p>
            </div>
          </section>

          <section class="card section" id="section-94">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Attempt to find existing record by UUID</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-95">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>If found -&gt; load it</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-96">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>If not found -&gt; create it and set UUID = $targetUUID</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-97">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Continue with page rendering logic</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Exit Script [ Result: $targetUUID ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~</p>
              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4.3 Contract Concrete Skeleton (Recommended)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The exact steps will depend on your file structure, layouts, and how you manage context, but the creation portion usually follows this shape:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~filemaker</p>

            </div>
          </section>

          <section class="card section" id="section-98">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Script: +++ &lt;Entity&gt; Details Page</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-99">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Parameter: targetUUID</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Error Capture [ On ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Allow User Abort [ Off ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $targetUUID ; Get ( ScriptParameter ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If [ IsEmpty ( $targetUUID ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    # Show dialog via your standard utility script</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    # Perform Script [ &quot;UTIL | Dialog&quot; ; Parameter: ... ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Exit Script [ Result: &quot;&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">End If</p>
            </div>
          </section>

          <section class="card section" id="section-100">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Go to an entity context where you can search and create</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-101">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Go to Layout [ &quot;&lt;Entity&gt;__Context&quot; ( &lt;Entity&gt; ) ]</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Enter Find Mode [ Pause: Off ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Field [ &lt;Entity&gt;::UUID ; $targetUUID ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Perform Find [ ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If [ Get ( FoundCount ) = 0 ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    New Record/Request</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Set Field [ &lt;Entity&gt;::UUID ; $targetUUID ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    # Recommended default fields</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    # Set Field [ &lt;Entity&gt;::CreatedTS ; Get ( CurrentTimestamp ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    # Set Field [ &lt;Entity&gt;::CreatedBy ; Get ( AccountName ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Commit Records/Requests [ Skip data entry validation: Off ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    If [ Get ( LastError ) ≠ 0 ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">        Revert Record/Request [ No dialog ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">        Exit Script [ Result: &quot;&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    End If</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">End If</p>
            </div>
          </section>

          <section class="card section" id="section-102">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Now load the details UI for the record whose UUID is $targetUUID</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-103">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Continue with your Page Builder code</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Exit Script [ Result: $targetUUID ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This contract is the heart of the system. The Add New script stays clean because the Details Page script owns the creation logic.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />
            </div>
          </section>

          <section class="card section" id="section-104">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>5) How The AI Agent Chooses Details Page vs Modal Page</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5.1 Decision Rule</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use <strong style="font-weight:600;color:#0f172a;">Details Page</strong> when the entity is edited on a full details page experience.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use <strong style="font-weight:600;color:#0f172a;">Modal Page</strong> when the entity is edited inside a modal window.</p>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5.2 How To Determine Which One To Use</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use the existing UI spec for that entity type.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the UI button label says:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">&quot;Add New &lt;Entity&gt;&quot; and the entity has its own page -&gt; Details Page</li>
<li style="margin-bottom:8px;padding-left:8px;">&quot;Add &lt;Entity&gt;&quot; inside a larger parent workflow -&gt; Modal Page</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your samples show:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Staff Emergency Contacts uses Modal Page</li>
<li style="margin-bottom:8px;padding-left:8px;">Department, Material, Job Title, Logo File use Details Page</li>
</ul>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5.3 Output Rule</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The Add New script must call exactly one target script and pass <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( UUID )</code>.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>

          <section class="card section" id="section-105">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>6) Generation Checklist (AI Agent Quality Control)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Before outputting the script, the AI Agent must verify:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Target script name starts with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++</code>.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Target script name ends with either <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Details Page</code> or <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Modal Page</code>.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Perform Script uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Specified: From list</code>.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Parameter is exactly <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( UUID )</code>.
</li>
<li style="margin-bottom:8px;padding-left:8px;">No extra steps are added unless a project rule explicitly requires them.
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />
            </div>
          </section>

          <section class="card section" id="section-106">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>7) Common Failure Modes and Fixes</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7.1 Failure: Record gets created with a different UUID</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Target script generates a new UUID instead of using the passed UUID.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Target script must use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$targetUUID = Get ( ScriptParameter )</code> and set the record UUID to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$targetUUID</code>.</li>
</ul>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7.2 Failure: Page opens but record is missing</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Target script does not implement Upsert-by-UUID.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Implement find-by-UUID then create-if-missing.</li>
</ul>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7.3 Failure: Wrong target script used</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Modal entity called via Details Page script name, or vice versa.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use UI spec and naming patterns to choose correctly.</li>
</ul>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7.4 Failure: Parameter is missing or empty</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Parameter was not passed, or target script ignored it.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Add New script must pass <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( UUID )</code>.</li>
<li style="margin-bottom:8px;padding-left:8px;">Target script must validate <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$targetUUID</code>.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>

          <section class="card section" id="section-107">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>8) Examples (Directly Matching Your Samples)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8.1 Add New Logo File</h3>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [
    Specified: From list ;
    &quot;+++ Logo File Details Page&quot; ;
    Parameter: Get ( UUID )
]</pre>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8.2 Add New Department</h3>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [
    Specified: From list ;
    &quot;+++ Department Details Page&quot; ;
    Parameter: Get ( UUID )
]</pre>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8.3 Add New Job Title</h3>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [
    Specified: From list ;
    &quot;+++ Job Title Details Page&quot; ;
    Parameter: Get ( UUID )
]</pre>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8.4 Add Staff Emergency Contact (Modal)</h3>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [
    Specified: From list ;
    &quot;+++ Staff Emergency Contacts Modal Page&quot; ;
    Parameter: Get ( UUID )
]</pre>

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8.5 Add New Material</h3>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [
    Specified: From list ;
    &quot;+++ Material Details Page&quot; ;
    Parameter: Get ( UUID )
]</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>

          <section class="card section" id="section-108">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>9) Clarifications Needed (Ambiguities That Must Be Resolved For Perfect Training)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The samples strongly imply the Upsert-by-UUID pattern, but to make the AI Agent output perfect, these must be confirmed:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">UUID Field Name</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">What is the exact UUID field name used in each entity table?</li>
<li style="margin-bottom:4px;">Examples: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">UUID</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">z_UUID</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">__k_UUID</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">pk_UUID</code></li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Where Upsert-by-UUID Lives</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Confirm that the record creation happens inside:</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ &lt;Entity&gt; Details Page</code></li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ &lt;Entity&gt; Modal Page</code></li>
<li style="margin-bottom:4px;">Confirm that the Add New scripts remain one-step delegators.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Default Fields On Create</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Which standard fields must be set on every new record?</li>
<li style="margin-bottom:4px;">Examples: CreatedTS, CreatedBy, UpdatedTS, UpdatedBy, IsActive, SortOrder</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Commit Rule</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Must the new record be committed immediately?</li>
<li style="margin-bottom:4px;">Or do you allow uncommitted creation while the user edits in a modal?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Privilege and Error Handling</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you have a standard utility script for:</li>
<li style="margin-bottom:4px;">Access checks</li>
<li style="margin-bottom:4px;">Error dialogs</li>
<li style="margin-bottom:4px;">Logging</li>
<li style="margin-bottom:4px;">If yes, provide names so the AI Agent can call them consistently.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Context Layout Rule</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">When the target page script does the find and create, which layout should it use for that context?</li>
<li style="margin-bottom:4px;">Is there a standard context layout per entity for safe record operations?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Modal Parent Context</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">For modal entities like Staff Emergency Contacts, is the new record linked to a parent record immediately?</li>
<li style="margin-bottom:4px;">If yes, what parent keys are required and how are they passed?</li>
</ul>
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Once these are clarified, the AI Agent can generate Add New scripts and the supporting Details/Modal scripts with full consistency across all entity types.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />
            </div>
          </section>


          <section class="card section" id="dp-save">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">💾</span>
                <span>Saving the Details of a Selected Entity</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">_Training documentation for an AI Agent to generate FileMaker scripts that save the edited details of a selected entity record that originated from a List Page, whether the Details UI is a normal page or a modal window._</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />
              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">0) Scope and Goal</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation teaches an AI Agent how to generate a <strong style="font-weight:600;color:#0f172a;">Save Details</strong> script for an entity record that was:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Selected from a <strong style="font-weight:600;color:#0f172a;">List Page</strong>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Opened for viewing and editing in a Details UI that is either:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">a normal <strong style="font-weight:600;color:#0f172a;">Details Page</strong>, or</li>
<li style="margin-bottom:4px;">a <strong style="font-weight:600;color:#0f172a;">Modal Details Page</strong> (a modal window)</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Edited by the user
</li>
<li style="margin-bottom:8px;padding-left:8px;">Saved back into the database
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">0.1 Key definition: “Selected Entity” in this document</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In this document, “selected entity” always means:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">the <strong style="font-weight:600;color:#0f172a;">main entity record selected from a List Page</strong> and opened for editing.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The Details UI may be a normal page or a modal window. Modal is only a UI container.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">0.2 Out of scope for this document</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation does not cover saving a record that was opened from a <strong style="font-weight:600;color:#0f172a;">subtable of related records</strong>, even if that related record is shown in a modal window.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">That pattern uses a different saving approach and belongs to a separate documentation.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) Canonical Save Details Pattern</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A Save Details script must follow this flow:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Read ordered values from <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( ScriptParameter )</code> via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetValue</code>.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Normalize inputs (dates, numbers, URL-encoded text).
</li>
<li style="margin-bottom:8px;padding-left:8px;">Optional confirmation dialog for submissions.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Save using the generic script: <strong style="font-weight:600;color:#0f172a;">“Save A Record”</strong>.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Optionally perform additional saves for related or join tables (only when they are part of saving the main entity record).
</li>
<li style="margin-bottom:8px;padding-left:8px;">If the Details UI is a <strong style="font-weight:600;color:#0f172a;">Modal Details Page</strong>, close the modal window.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Restore UI state (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Tab To Show</code>).
</li>
<li style="margin-bottom:8px;padding-left:8px;">Navigate to the appropriate Details Page or List Page.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Show a success message.
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is the exact pattern used in your samples, with one added step for modal pages.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) Core System Contracts (Must Be Obeyed)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.1 The record ID is always provided</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save Details scripts always save using a primary key ID.</li>
<li style="margin-bottom:8px;padding-left:8px;">The ID will not be missing.</li>
<li style="margin-bottom:8px;padding-left:8px;">The Save Details script must already have the selected record’s ID in a global variable (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Patient ID</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Department ID</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Staff ID</code>).</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.2 Field names in the save string must match FileMaker schema exactly</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Every field name included in the “Save A Record” parameter must be the exact FileMaker field name.</li>
<li style="margin-bottom:8px;padding-left:8px;">No labels, no aliases, no friendly names.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.3 <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Settings::Location</code> is mandatory and always present</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Settings::Location</code> indicates the app run mode (Local or On Server).</li>
<li style="margin-bottom:8px;padding-left:8px;">“Save A Record” uses it to decide whether to run the final insert/update locally or perform the final script on server.</li>
<li style="margin-bottom:8px;padding-left:8px;">If <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Settings::Location</code> is blank, saving must error. Developer must set it.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) “Save A Record” Contract (Authoritative)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.1 Parameter string format</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">“Save A Record” receives one single string parameter using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">¶</code> as the delimiter:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Table name (required, first item)
</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Settings::Location</code> (required, second item)
</li>
<li style="margin-bottom:8px;padding-left:8px;">Primary key field name and value (required, third pair)
</li>
<li style="margin-bottom:8px;padding-left:8px;">Then field name/value pairs
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example shape:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ Specified: From list ; “Save A Record” ;
  Parameter:
    &quot;Departments¶&quot; &amp;
    Settings::Location &amp;
    &quot;¶ID¶&quot; &amp; $$Department ID &amp;
    &quot;¶Name¶&quot; &amp; $Name &amp;
    &quot;¶HOD Staff ID¶&quot; &amp; $HOD Staff ID &amp;
    &quot;¶Description¶&quot; &amp; $Description
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.2 “Save A Record” behavior</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">“Save A Record” does this:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Goes to the specified table context.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Finds by the provided primary key field (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ID</code>) and value.
</li>
<li style="margin-bottom:8px;padding-left:8px;">If the record is found, it updates fields.
</li>
<li style="margin-bottom:8px;padding-left:8px;">If the record is not found, it creates a new record and sets the primary key field to the provided ID, then sets the remaining fields.
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Important implication:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Even for Save Details, if the ID exists and is valid but not found in the table, the record will be created as new.</li>
<li style="margin-bottom:8px;padding-left:8px;">This is allowed and part of the design.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.3 “ID” must always be included</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The Save Details script must always include:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;¶ID¶&quot; &amp; $$Entity ID</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">No exceptions.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) Inputs and Normalization Rules</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Script parameters are ordered</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your Details UI must pass values in the exact order the Save Details script expects.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every Save Details script must read with:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetValue ( GetScriptParameters ; 1 )</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetValue ( GetScriptParameters ; 2 )</code></li>
<li style="margin-bottom:8px;padding-left:8px;">etc.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2 Text decoding rule (DecodeURIComponent)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a value may come from a Web Viewer, treat it as URL-encoded unless you are 100 percent sure it is not encoded.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Description ; Value: DecodeURIComponent ( GetValue ( GetScriptParameters ; 3 ) ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use DecodeURIComponent for:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Description</li>
<li style="margin-bottom:8px;padding-left:8px;">Reason</li>
<li style="margin-bottom:8px;padding-left:8px;">Addresses</li>
<li style="margin-bottom:8px;padding-left:8px;">Notes</li>
<li style="margin-bottom:8px;padding-left:8px;">Any multi-word text</li>
<li style="margin-bottom:8px;padding-left:8px;">Any text that can contain punctuation or line breaks</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.3 Date conversion rule (MySQLDateToFMPDateText)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Dates are passed in a format that must be converted to FileMaker date format before saving.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Preferred single-step pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Start Date ; Value: MySQLDateToFMPDateText ( GetValue ( GetScriptParameters ; 2 ) ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Two-step conversion is allowed if a single step cannot guarantee the correct FileMaker format.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.4 Number casting rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When a value must be numeric, cast it:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Duration ; Value: GetAsNumber ( GetValue ( GetScriptParameters ; 4 ) ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.5 Derived values rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the database stores derived values, compute them after normalization.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example from Staff:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Age from DOB</li>
<li style="margin-bottom:8px;padding-left:8px;">DOB Day</li>
<li style="margin-bottom:8px;padding-left:8px;">DOB MonthName</li>
<li style="margin-bottom:8px;padding-left:8px;">DOB MonthNumber key</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) Modal Details Page Rule (Mandatory When the Details UI Is Modal)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the entity Details UI is a <strong style="font-weight:600;color:#0f172a;">Modal Details Page</strong>:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 The only difference</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">After all save calls complete, insert a Close Window step before restoring tab state.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Required sequence:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Perform the save call(s)
</li>
<li style="margin-bottom:8px;padding-left:8px;">Close the modal window
</li>
<li style="margin-bottom:8px;padding-left:8px;">Set <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Tab To Show</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Navigate as required
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Required step and exact placement</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Insert this step immediately before:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Set Variable [ $$Tab To Show ; Value: 1 ]</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Required step:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ Specified: From list ; “Close Window” ; Parameter:    ]</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Post-save UI and Navigation Rules</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 Tab restoration</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If your Details UI uses tabs, restore the desired tab:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $$Tab To Show ; Value: 1 ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the Details UI is modal:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Close Window first</li>
<li style="margin-bottom:8px;padding-left:8px;">Then set <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Tab To Show</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Navigation after saving</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Choose the destination based on the UX:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Reload Details Page when user should remain on the record (example: Department, Staff).</li>
<li style="margin-bottom:8px;padding-left:8px;">Return to List Page when save completes a task and user should go back (example: Patients).</li>
<li style="margin-bottom:8px;padding-left:8px;">Return to a workflow list page after submission (example: Leave Request submission).</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Commit Records/Requests Rule (Recommended Standard)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">You asked: “Is Commit Records/Requests being used anywhere?”</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">I cannot see your full file from here, so I cannot confirm usage directly.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Recommended standard</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Do not put <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Commit Records/Requests</code> inside individual Save Details scripts.</li>
<li style="margin-bottom:8px;padding-left:8px;">Put commit responsibility inside “Save A Record” (or inside the final insert/update scripts that “Save A Record” calls).</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2 How to verify inside your FileMaker file</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In Script Workspace, search for:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Commit Records/Requests</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Check:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">“Save A Record”</li>
<li style="margin-bottom:8px;padding-left:8px;">Any scripts it performs (local and server variants)</li>
<li style="margin-bottom:8px;padding-left:8px;">Any lower-level scripts used for final insert/update</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If commit exists there, then Save Details scripts should not add commit.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If commit does not exist anywhere in the save engine, then add commit inside the save engine, not inside each Save Details script.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Month Fields Standardization Rule</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">You want a standard when similar month tracking is needed.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1 Recommended standard fields</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a table needs month tracking, store both:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Readable label:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Month Created</code> = <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">MonthName ( Get ( CurrentDate ) ) &amp; &quot;, &quot; &amp; Year ( Get ( CurrentDate ) )</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Sortable numeric key:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Month Created Number</code> = <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Year ( Get ( CurrentDate ) ) * 100 + Month ( Get ( CurrentDate ) )</code></li>
</ul>
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If your schema has different field names (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Month Name Created</code>), keep field names, but align the values to the standard approach.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Entity Patterns the AI Agent Must Learn From the Samples</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 Department (single table save)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Traits:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Few params</li>
<li style="margin-bottom:8px;padding-left:8px;">Decode description</li>
<li style="margin-bottom:8px;padding-left:8px;">Save one table</li>
<li style="margin-bottom:8px;padding-left:8px;">Reload Details Page</li>
<li style="margin-bottom:8px;padding-left:8px;">Success dialog</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 Leave Request (submission style save)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Traits:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Confirmation dialog required</li>
<li style="margin-bottom:8px;padding-left:8px;">Convert multiple dates</li>
<li style="margin-bottom:8px;padding-left:8px;">Decode reason</li>
<li style="margin-bottom:8px;padding-left:8px;">Save status</li>
<li style="margin-bottom:8px;padding-left:8px;">Go back to workflow list page</li>
<li style="margin-bottom:8px;padding-left:8px;">Success dialog</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.3 Staff (multi-save plus user/role side effect)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Traits:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Many params</li>
<li style="margin-bottom:8px;padding-left:8px;">Convert DOB</li>
<li style="margin-bottom:8px;padding-left:8px;">Compute derived fields</li>
<li style="margin-bottom:8px;padding-left:8px;">Generate staff number if empty using a global previous code</li>
<li style="margin-bottom:8px;padding-left:8px;">Save Staff main table</li>
<li style="margin-bottom:8px;padding-left:8px;">Save Staff Job Titles table</li>
<li style="margin-bottom:8px;padding-left:8px;">If role changed, create or update user record</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Important correction:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Previous Code</code>, not <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Previous Code</code>.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.4 Patient (main save plus related saves)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Traits:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Convert DOB and compute age</li>
<li style="margin-bottom:8px;padding-left:8px;">Save Patients</li>
<li style="margin-bottom:8px;padding-left:8px;">Save emergency contact</li>
<li style="margin-bottom:8px;padding-left:8px;">Save primary care physician</li>
<li style="margin-bottom:8px;padding-left:8px;">Return to Patients list page</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Canonical Rule for Role and User Logic (Staff)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.1 Stored meaning of <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Role ID</code></h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Role ID</code> is captured when viewing the staff record.</li>
<li style="margin-bottom:8px;padding-left:8px;">It represents the staff’s role before edits.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.2 When to create or update the user</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When saving staff:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">If <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Role ID</code> is empty, skip user logic.
</li>
<li style="margin-bottom:8px;padding-left:8px;">If <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Role ID</code> is not empty:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Find if a user exists for this staff (via Users table lookup).</li>
<li style="margin-bottom:4px;">If role did not change, do nothing.</li>
<li style="margin-bottom:4px;">If role changed:</li>
<li style="margin-bottom:4px;">If user does not exist, create user.</li>
<li style="margin-bottom:4px;">If user exists, update role.</li>
</ul>
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This must happen only when the role changed.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.3 Username logic per business</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your sample shows:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Username ;
  Value:
    Case (
      $$Staff ID = $$My Staff ID ; &quot;admin&quot; ;
      $$Business Name = &quot;DC Clinic&quot; ; $Staff Number ;
      $Email
    )
]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is a business rule. The AI Agent must not invent new business rules.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Remaining requirement:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">You should define a single authoritative username rule per business, then the AI Agent must reuse it exactly.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) The AI Agent Output Requirements (Hard Requirements)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to generate a Save Details script, the AI Agent must produce a FileMaker script that includes:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A clear script name in your naming convention:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Save [Entity] Details</code> or <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Save [Entity]</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Parameter extraction for every input using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetValue</code>.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Correct normalization:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">DecodeURIComponent</code> for encoded text</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">MySQLDateToFMPDateText</code> for dates</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetAsNumber</code> for numbers</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">One or more “Save A Record” calls with this exact ordering:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Table name first</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Settings::Location</code> second</li>
<li style="margin-bottom:4px;">Primary key pair (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ID</code> then the ID value) immediately after</li>
<li style="margin-bottom:4px;">Field name/value pairs after that</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Any secondary saves for related or join tables if required.
</li>
<li style="margin-bottom:8px;padding-left:8px;">If the Details UI is a modal page:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Perform Script: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Close Window</code> after saving and immediately before setting <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Tab To Show</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Post-save UI state restore (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Tab To Show</code> when applicable).
</li>
<li style="margin-bottom:8px;padding-left:8px;">Navigation to Details Page or List Page.
</li>
<li style="margin-bottom:8px;padding-left:8px;">A success dialog.
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Canonical Save Details Template (AI Agent Reuse Template)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Adapt this template per entity.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~filemaker</p>

            </div>
          </section>


          <section class="card section" id="dp-save-breakdown">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">🔩</span>
                <span>Save Script Breakdown (Step-by-Step Structure)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-111">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Get Script Parameters</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Field 1 ; Value: GetValue ( GetScriptParameters ; 1 ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Field 2 ; Value: GetValue ( GetScriptParameters ; 2 ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Long Text ; Value: DecodeURIComponent ( GetValue ( GetScriptParameters ; 3 ) ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Date Field ; Value: MySQLDateToFMPDateText ( GetValue ( GetScriptParameters ; 4 ) ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Number Field ; Value: GetAsNumber ( GetValue ( GetScriptParameters ; 5 ) ) ]</p>
            </div>
          </section>

          <section class="card section" id="section-112">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Derived values (only if schema needs them)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-113">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Set Variable [ $Derived ; Value: ... ]</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-114">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Optional confirmation for submissions</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-115">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Show Custom Dialog [ &quot;Confirm&quot; ; &quot;Are you sure?&quot; ]</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-116">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>If [ Get ( LastMessageChoice ) ≠ 1 ]</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-117">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Exit Script [ Result: &quot;&quot; ]</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-118">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>End If</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-119">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Save main record</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Perform Script [ Specified: From list ; “Save A Record” ;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Parameter:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    &quot;[TableName]¶&quot; &amp;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Settings::Location &amp;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    &quot;¶ID¶&quot; &amp; $$[Entity] ID &amp;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    &quot;¶Field 1¶&quot; &amp; $Field 1 &amp;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    &quot;¶Field 2¶&quot; &amp; $Field 2 &amp;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    &quot;¶Long Text¶&quot; &amp; $Long Text &amp;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    &quot;¶Date Field¶&quot; &amp; $Date Field &amp;</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    &quot;¶Number Field¶&quot; &amp; $Number Field</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">]</p>
            </div>
          </section>

          <section class="card section" id="section-120">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Optional related saves (only if required as part of saving the main entity record)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-121">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Perform Script [ Specified: From list ; “Save A Record” ;</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-122">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Parameter: &quot;RelatedTable¶&quot; &amp; Settings::Location &amp; &quot;¶ID¶&quot; &amp; $$Related ID &amp; ...</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-123">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>]</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-124">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>If Details UI is a Modal Details Page, close it before restoring tab state</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-125">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Perform Script [ Specified: From list ; “Close Window” ; Parameter:    ]</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

            </div>
          </section>

          <section class="card section" id="section-126">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Post-save UI state</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $$Tab To Show ; Value: 1 ]</p>
            </div>
          </section>

          <section class="card section" id="section-127">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Navigate</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Perform Script [ Specified: From list ; “+++ [Entity] Details Page” ; Parameter: $$[Entity] ID ]</p>
            </div>
          </section>

          <section class="card section" id="section-128">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Success feedback</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Show Custom Dialog [ &quot;Saved&quot; ; &quot;[Entity] saved successfully&quot; ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />
              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Remaining Ambiguities That Still Need Definition</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These are the only items still not fully defined. The AI Agent cannot invent them.</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Username rule per business:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">You should define the authoritative logic and where it lives.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Month field naming:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">You want a standard, but field names differ between tables.</li>
<li style="margin-bottom:4px;">Define whether you will standardize field names across tables, or keep table-specific field names and standardize values only.</li>
</ul>
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Everything else is deterministic based on your answers.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-batch">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📦</span>
                <span>Saving Records in Batch (CauferoAppStarter)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">_Training documentation for an AI Agent to generate FileMaker scripts that save a batch of records in one operation, using list parsing or JSON parsing, typically replacing an existing found set._</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />
              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">0) Scope and Goal</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation teaches an AI Agent how to generate <strong style="font-weight:600;color:#0f172a;">Batch Save</strong> scripts, meaning:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The UI collects many items (answers, questions, chart rows, results, costs).</li>
<li style="margin-bottom:8px;padding-left:8px;">The script receives them as a single payload.</li>
<li style="margin-bottom:8px;padding-left:8px;">The script then saves <strong style="font-weight:600;color:#0f172a;">multiple records</strong> in a loop.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Batch Save scripts in this system commonly use a <strong style="font-weight:600;color:#0f172a;">replace pattern</strong>:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Find the existing related records for a parent context.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Delete all those existing records.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Recreate the entire set from the incoming payload.
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation covers that batch replace style.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) Canonical Batch Save Pattern</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A Batch Save script must follow this flow:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Turn on <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Set Error Capture [ On ]</code> (mandatory).
</li>
<li style="margin-bottom:8px;padding-left:8px;">Read the payload from <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get ( ScriptParameter )</code> or ordered parameters.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Convert payload into a loopable structure:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">return-delimited list, or</li>
<li style="margin-bottom:4px;">JSON array iteration.</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Open a Card window when the script must isolate context (recommended for destructive operations).
</li>
<li style="margin-bottom:8px;padding-left:8px;">Go to the target table layout.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Perform a find that isolates the target record set (usually <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Find [ Restore ]</code>).
</li>
<li style="margin-bottom:8px;padding-left:8px;">If found set has records, delete them all:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Delete All Records [ With dialog: Off ]</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Loop through the incoming items:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">parse one item</li>
<li style="margin-bottom:4px;">validate minimal integrity</li>
<li style="margin-bottom:4px;">create record</li>
<li style="margin-bottom:4px;">set fields</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Close the Card window if one was opened.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Restore UI state and navigate if required.
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) When to Use Batch Save</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Batch Save is preferred when:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The UI edits many rows at once.</li>
<li style="margin-bottom:8px;padding-left:8px;">The user expects one “Save” action to apply to all rows.</li>
<li style="margin-bottom:8px;padding-left:8px;">The database rows are “dependent children” of a parent record (answers for an appraisal, lab results for a test, costs for a payroll item, treatment chart rows for a visit).</li>
<li style="margin-bottom:8px;padding-left:8px;">Partial incremental updates are not needed, and a full replace is acceptable.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) Batch Save Strategies Supported</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This system uses two batch save strategies:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.1 Replace-All (delete existing, reinsert all)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is the dominant strategy in your samples.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Traits:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A find is performed to get the old set.</li>
<li style="margin-bottom:8px;padding-left:8px;">The found set is deleted.</li>
<li style="margin-bottom:8px;padding-left:8px;">New records are inserted from the payload.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Used by:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save Appraisal Answers</li>
<li style="margin-bottom:8px;padding-left:8px;">Save Treatment Chart</li>
<li style="margin-bottom:8px;padding-left:8px;">Save Lab Test Results</li>
<li style="margin-bottom:8px;padding-left:8px;">Save Payroll Item Costs</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.2 Upsert Per Item (find-by-ID, create if missing, update if found)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is used when incoming items include IDs that must map to persistent records and you must avoid deleting everything.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Used by:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save Appraisal Template Questions (categories and questions)</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) Payload Formats the AI Agent Must Handle</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Return-delimited list payloads (common)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The payload is converted into a return-delimited list.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Each line represents one record item.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Each line is then split using a secondary delimiter (often <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>, sometimes <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">^</code>).</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Lab results: comma separated items -&gt; replaced with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">¶</code>, each item split by <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Treatment chart: items separated by custom markers then split by <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Payroll costs: items separated by commas -&gt; <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">¶</code>, then split by <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">^</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Canonical parsing pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Items ; Value: &lt;payload&gt; ]
Set Variable [ $Items ; Value: Substitute ( $Items ; &quot;,&quot; ; ¶ ) ]
Set Variable [ $Total Items ; Value: ValueCount ( $Items ) ]

If [ $Total Items &gt; 0 ]
  Loop [ Flush: Always ]
    Set Variable [ $i ; Value: $i + 1 ]
    Set Variable [ $Item ; Value: GetValue ( $Items ; $i ) ]
    Set Variable [ $Item As List ; Value: Substitute ( $Item ; &quot;|&quot; ; ¶ ) ]
    /* Extract fields using GetValue */
    Exit Loop If [ $i ≥ $Total Items ]
  End Loop
End If</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2 JSON array payloads (structured)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The payload is JSON and includes an array key (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">records</code>).</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Each record object contains multiple keys.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Canonical parsing pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $jsonData ; Value: GetValue ( GetScriptParameters ; 1 ) ]
Set Variable [ $recordCount ; Value: JSONListKeys ( $jsonData ; &quot;records&quot; ) ]
Set Variable [ $counter ; Value: 0 ]

Loop [ Flush: Always ]
  Exit Loop If [ $counter &gt;= ValueCount ( $recordCount ) ]
  Set Variable [ $currentRecord ; Value: JSONGetElement ( $jsonData ; &quot;records[&quot; &amp; $counter &amp; &quot;]&quot; ) ]

  /* Read keys with JSONGetElement */
  Set Variable [ $counter ; Value: $counter + 1 ]
End Loop</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) Window and Layout Rules</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 When to open a Card window (recommended)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Open a Card window when the script will:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">delete records,</li>
<li style="margin-bottom:8px;padding-left:8px;">create many records,</li>
<li style="margin-bottom:8px;padding-left:8px;">switch layouts multiple times,</li>
<li style="margin-bottom:8px;padding-left:8px;">or should not affect user context.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">New Window [ Style: Card ; Using layout: &lt;Current Layout&gt; ]
/* work in the card */
Perform Script [ Specified: From list ; “Close Window” ; Parameter:    ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is used in:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save Appraisal Answers</li>
<li style="margin-bottom:8px;padding-left:8px;">Save Lab Test Results</li>
<li style="margin-bottom:8px;padding-left:8px;">Save Payroll Item Costs</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Layout switching rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Batch saves are layout-driven.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">You must go to the table layout that matches the records you are editing before:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">finding,</li>
<li style="margin-bottom:8px;padding-left:8px;">deleting,</li>
<li style="margin-bottom:8px;padding-left:8px;">creating,</li>
<li style="margin-bottom:8px;padding-left:8px;">setting fields.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Found Set Isolation and Delete Rules (Replace-All Strategy)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 Found set must represent only the target records</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Before deleting, the script must isolate only the records that belong to the current parent context.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your samples use:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Find [ Restore ]
If [ Get ( FoundCount ) &gt; 0 ]
  Delete All Records [ With dialog: Off ]
End If</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Contract:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The layout used must have a stored find request that filters correctly for the parent context (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Staff Appraisal ID</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Patient Visit Lab Test ID</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Payroll Item ID</code>, etc.).</li>
<li style="margin-bottom:8px;padding-left:8px;">The AI Agent must not delete records unless it is certain the found set is the intended subset.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Delete confirmation must be off</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Batch saves must not prompt the user during deletes:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Delete All Records [ With dialog: Off ]</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Loop Insert Rules</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Each iteration must create a record only when valid</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Batch payloads can contain blank lines, placeholders, or items that must be skipped.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Therefore, each loop must have validation logic.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples of validation in your scripts:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save Appraisal Answers:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - only create if question id looks valid:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">If [ Length ( $Appraisal Template Question ID ) &lt; 10 ]</code></p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save Payroll Item Costs:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - only create if amount is not empty:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">If [ not IsEmpty ( $Amount ) ]</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Canonical rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Always validate that the record item contains the minimum required fields before creating a record.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2 New record and Set Field sequence</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When inserting:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">New Record/Request
Set Field [ Table::Parent ID ; $$Parent ID ]
Set Field [ Table::Child Key ; $Some ID ]
Set Field [ Table::Value ; $Value ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.3 Exit loop condition</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Always exit cleanly:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Exit Loop If [ $i ≥ $Total Items ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">or for JSON loops:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Exit Loop If [ $counter &gt;= ValueCount ( $recordCount ) ]</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Upsert Per Item Rules (Find-by-ID Strategy)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Used when:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">incoming records have stable IDs</li>
<li style="margin-bottom:8px;padding-left:8px;">deleting everything is not acceptable</li>
<li style="margin-bottom:8px;padding-left:8px;">category and question records must persist and be updated or created as needed</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Canonical pattern:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Go to table layout
</li>
<li style="margin-bottom:8px;padding-left:8px;">Enter Find Mode
</li>
<li style="margin-bottom:8px;padding-left:8px;">Set field <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ID</code> to incoming ID
</li>
<li style="margin-bottom:8px;padding-left:8px;">Perform Find
</li>
<li style="margin-bottom:8px;padding-left:8px;">If not found, create record and set required foreign keys
</li>
<li style="margin-bottom:8px;padding-left:8px;">Set/update the editable fields
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example structure:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Go to Layout [ “Some Table” (Some Table) ; Animation: None ]
Enter Find Mode [ Pause: Off ]
Set Field [ Some Table::ID ; $incomingId ]
Perform Find [ ]

If [ Get ( FoundCount ) = 0 ]
  New Record/Request
  Set Field [ Some Table::ID ; $incomingId ]
  Set Field [ Some Table::Parent ID ; $$Parent ID ]
End If

Set Field [ Some Table::Name ; $name ]
Set Field [ Some Table::Description ; $description ]</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Normalization Rules in Batch Saves</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Batch saves must apply the same normalization rules as single saves, but inside loops.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 DecodeURIComponent rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If JSON contains URL-encoded content:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $questionDescription ; Value: DecodeURIComponent ( $questionDescription ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 Date conversion rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a date comes in non-FileMaker format:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Date ; Value: DateInShortWordsToFMPDate ( $Date ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">or use the correct conversion function for that payload type.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.3 Numeric duplication rule (when schema needs it)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If schema includes both text and numeric fields for the same value, set both:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Field [ Table::Quantity ; $Quantity ]
Set Field [ Table::Quantity Number ; $Quantity ]</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Post-save UX Rules</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.1 Closing Card windows</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a Card window was opened, close it:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ Specified: From list ; “Close Window” ; Parameter:    ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.2 Tab restoration and navigation (when applicable)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Some batch saves return the user to a specific tab and page.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example (Treatment Chart):</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $$Tab To Show ; Value: 5 ]
Perform Script [ Specified: From list ; “+++ InPatient Details Page” ; Parameter: $$Appointment ID ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Only set <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Tab To Show</code> and navigate if the batch save is part of a page workflow that requires it.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) The AI Agent Output Requirements (Hard Requirements)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to generate a Batch Save script, the AI Agent must produce a FileMaker script that includes:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Set Error Capture [ On ]</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Payload ingestion and conversion to a loopable structure:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">return-delimited list, or</li>
<li style="margin-bottom:4px;">JSON iteration</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Safe isolation of the target found set before deleting (if Replace-All strategy is used)
</li>
<li style="margin-bottom:8px;padding-left:8px;">Delete existing records with dialog off (only when Replace-All strategy is used)
</li>
<li style="margin-bottom:8px;padding-left:8px;">Loop with:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">counter increment</li>
<li style="margin-bottom:4px;">item parsing</li>
<li style="margin-bottom:4px;">validation</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">New Record/Request</code></li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Set Field</code> assignments</li>
<li style="margin-bottom:4px;">exit condition</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Window management:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Card window isolation when destructive operations are used</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Close Window</code> when finished</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Optional UI restoration and navigation as required by the workflow
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Canonical Batch Save Templates (AI Agent Reuse Templates)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.1 Template A: Replace-All from a Return-Delimited List</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~filemaker</p>

            </div>
          </section>

          <section class="card section" id="section-130">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Save [Entity] Batch Items</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Error Capture [ On ]</p>
            </div>
          </section>

          <section class="card section" id="section-131">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Get payload</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Items ; Value: Get ( ScriptParameter ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Items ; Value: Substitute ( $Items ; &quot;,&quot; ; ¶ ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $Total Items ; Value: ValueCount ( $Items ) ]</p>
            </div>
          </section>

          <section class="card section" id="section-132">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Isolate in Card window (recommended)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">New Window [ Style: Card ; Using layout: &lt;Current Layout&gt; ]</p>
            </div>
          </section>

          <section class="card section" id="section-133">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Go to target layout and isolate found set</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Go to Layout [ “[Target Layout]” ([Target Table]) ; Animation: None ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Perform Find [ Restore ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If [ Get ( FoundCount ) &gt; 0 ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Delete All Records [ With dialog: Off ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">End If</p>
            </div>
          </section>

          <section class="card section" id="section-134">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Insert new set</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If [ $Total Items &gt; 0 ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Loop [ Flush: Always ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Set Variable [ $i ; Value: $i + 1 ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Set Variable [ $Item ; Value: GetValue ( $Items ; $i ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Set Variable [ $Item As List ; Value: Substitute ( $Item ; &quot;|&quot; ; ¶ ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    # Extract fields</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Set Variable [ $Child ID ; Value: GetValue ( $Item As List ; 1 ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Set Variable [ $Value ; Value: GetValue ( $Item As List ; 2 ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    # Validate</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    If [ not IsEmpty ( $Child ID ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">      New Record/Request</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">      Set Field [ [Target Table]::Parent ID ; $$Parent ID ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">      Set Field [ [Target Table]::Child ID ; $Child ID ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">      Set Field [ [Target Table]::Value ; $Value ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    End If</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Exit Loop If [ $i ≥ $Total Items ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  End Loop</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">End If</p>
            </div>
          </section>

          <section class="card section" id="section-135">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Close window</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Perform Script [ Specified: From list ; “Close Window” ; Parameter:    ]</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.2 Template B: Upsert from JSON Array</h4>
</pre>filemaker
            </div>
          </section>

          <section class="card section" id="section-136">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📘</span>
                <span>Save [Entity] Records From JSON</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Error Capture [ On ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $jsonData ; Value: GetValue ( GetScriptParameters ; 1 ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $recordKeys ; Value: JSONListKeys ( $jsonData ; &quot;records&quot; ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Set Variable [ $counter ; Value: 0 ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Loop [ Flush: Always ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Exit Loop If [ $counter &gt;= ValueCount ( $recordKeys ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Set Variable [ $currentRecord ; Value: JSONGetElement ( $jsonData ; &quot;records[&quot; &amp; $counter &amp; &quot;]&quot; ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  # Read fields</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Set Variable [ $id ; Value: JSONGetElement ( $currentRecord ; &quot;id&quot; ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Set Variable [ $name ; Value: JSONGetElement ( $currentRecord ; &quot;name&quot; ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Set Variable [ $desc ; Value: DecodeURIComponent ( JSONGetElement ( $currentRecord ; &quot;description&quot; ) ) ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  # Upsert</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Go to Layout [ “[Target Layout]” ([Target Table]) ; Animation: None ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Enter Find Mode [ Pause: Off ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Set Field [ [Target Table]::ID ; $id ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Perform Find [ ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  If [ Get ( FoundCount ) = 0 ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    New Record/Request</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Set Field [ [Target Table]::ID ; $id ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">    Set Field [ [Target Table]::Parent ID ; $$Parent ID ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  End If</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Set Field [ [Target Table]::Name ; $name ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Set Field [ [Target Table]::Description ; $desc ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  Set Variable [ $counter ; Value: $counter + 1 ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">End Loop</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Go to Layout [ original layout ; Animation: None ]</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">~~~</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />
              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Clarifications the AI Agent Must Not Guess</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These must be defined per batch save use case:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">What the stored find request filters by when using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Find [ Restore ]</code>.
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">The script must know the parent context variable(s) that the restore find depends on.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Whether the batch save is Replace-All or Upsert.
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">The AI Agent must not choose randomly.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The delimiter rules for non-JSON payloads.
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">^</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">vvvvvvvvvv</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ITEMS:</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">TREATMENT_CHART:</code>.</li>
</ul>
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must replicate the delimiter protocol exactly as required by the calling UI.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-textfields">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">✏️</span>
                <span>Text Fields — How They Are Implemented and Used</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Text Fields in Pages (How to Add Them and How They Work)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Purpose of this doc  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Train an AI Agent to correctly add, render, prefill, read, and save <strong style="font-weight:600;color:#0f172a;">text fields</strong> inside CauferoAppStarter WebViewer pages (HTML built in FileMaker scripts).</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) What a &quot;Text Field&quot; Means in CauferoAppStarter</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In CauferoAppStarter pages, a &quot;text field&quot; is a standard HTML field element rendered in the WebViewer, then read by JavaScript, then sent back to FileMaker via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript()</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Text fields include:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Single line text input</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;text&#x27; ...&gt;</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Multi-line text input</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;textarea ...&gt;...&lt;/textarea&gt;</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Read-only or computed text</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;text&#x27; ... disabled&gt;</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Text inputs that are controlled by another UI behavior</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Example: a date field still uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;text&#x27;&gt;</code> but is controlled by Flatpickr</li>
</ul>
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This document focuses on text fields only.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) The Full Lifecycle of a Text Field</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every text field follows the same lifecycle:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step A: FileMaker prepares the value</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Data is fetched from SQL and assigned to FileMaker variables like:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Staff Number</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$First Name</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Residential Address</code>, etc.</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Any special formatting is handled in FileMaker:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ConvertLineBreakMarkersToReturns ( ... )</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step B: FileMaker injects the value into the HTML</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The value is injected into the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">value=&#x27;...&#x27;</code> attribute for inputs</li>
<li style="margin-bottom:8px;padding-left:8px;">Or inserted between <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;textarea&gt; ... &lt;/textarea&gt;</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step C: User edits the field in the WebViewer</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">User types into the input or textarea</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step D: JavaScript reads the value</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Example:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.getElementById(&#x27;first_name&#x27;).value</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step E: JavaScript builds a parameter string and calls FileMaker</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Parameters are joined with a delimiter</li>
<li style="margin-bottom:8px;padding-left:8px;">Example delimiter used in your page:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Then:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript(&#x27;Save Staff&#x27;, parameters)</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step F: FileMaker receives, parses, and saves</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The FileMaker script receiving the parameters splits and assigns fields</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) Core Rules (Non-Negotiable)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.1 Every text field MUST have a stable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code> is the primary key used by JavaScript.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Bad:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">random IDs</li>
<li style="margin-bottom:8px;padding-left:8px;">duplicate IDs</li>
<li style="margin-bottom:8px;padding-left:8px;">IDs that change</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Good:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">staff_number</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">first_name</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">residential_address</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.2 Every text field MUST have a matching <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;label for=&#x27;...&#x27;&gt;</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The label improves usability and helps the AI Agent place fields consistently.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;label for=&#x27;phone&#x27;&gt;Phone&lt;/label&gt;
&lt;input type=&#x27;text&#x27; id=&#x27;phone&#x27; value=&#x27;...&#x27;&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.3 Always use one of the standard layout containers</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-grid1</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-grid2</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-grid3</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-group-2</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">combined-inputs-container</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These containers control spacing and responsiveness.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.4 Parameter delimiter risk: encode any value that can break the delimiter</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your save script joins values using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a text field can contain <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>, line breaks, or other special characters, you must encode it with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent()</code> before joining.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your sample already does this for:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">residential_address</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">postal_address</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">role</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">That is correct behavior.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) Field Naming Convention</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use these rules for IDs:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">snake_case</strong></li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">lowercase</strong></li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">descriptive</strong></li>
<li style="margin-bottom:8px;padding-left:8px;">match FileMaker field meaning</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples from your page:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">staff_number</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">first_name</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">other_names</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">last_name</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">hometown</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">phone</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">email</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">gps</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">bank</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">branch</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">account_number</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">residential_address</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">postal_address</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) Adding a Single Line Text Field</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 Pattern</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;FIELD_ID&#x27;&gt;LABEL&lt;/label&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;FIELD_ID&#x27; placeholder=&#x27;OPTIONAL_PLACEHOLDER&#x27; value=&#x27;PRE_FILLED_VALUE&#x27;&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Example from your page (Phone)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;phone&#x27;&gt;Phone&lt;/label&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;phone&#x27; value=&#x27;{{PHONE}}&#x27;&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.3 FileMaker injection pattern</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In FileMaker, build the HTML string like:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Tab2 HTML ;
&quot;
...
&lt;input type=&#x27;text&#x27; id=&#x27;phone&#x27; value=&#x27;&quot; &amp; $Phone &amp; &quot;&#x27;&gt;
...
&quot;
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.4 When to use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">placeholder</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use placeholder when you expect the field can be empty and you want guidance:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;input type=&#x27;text&#x27; id=&#x27;hometown&#x27; placeholder=&#x27;Type hometown...&#x27; value=&#x27;{{HOMETOWN}}&#x27;&gt;</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Adding a Multi-Line Text Field (Textarea)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Textarea is used for longer text, addresses, notes, and descriptions.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 Pattern</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;FIELD_ID&#x27;&gt;LABEL&lt;/label&gt;
  &lt;textarea id=&#x27;FIELD_ID&#x27; placeholder=&#x27;OPTIONAL_PLACEHOLDER&#x27;&gt;PRE_FILLED_TEXT&lt;/textarea&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Example from your page (Residential Address)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;residential_address&#x27;&gt;Residential Address&lt;/label&gt;
  &lt;textarea id=&#x27;residential_address&#x27; placeholder=&#x27;Type the residential address here...&#x27;&gt;{{RESIDENTIAL_ADDRESS}}&lt;/textarea&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.3 Pre-fill rule for textarea</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Inputs use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">value=&#x27;...&#x27;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Textarea uses inner text between tags</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Correct:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;textarea id=&#x27;postal_address&#x27;&gt;{{POSTAL_ADDRESS}}&lt;/textarea&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Wrong:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;textarea id=&#x27;postal_address&#x27; value=&#x27;{{POSTAL_ADDRESS}}&#x27;&gt;&lt;/textarea&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.4 Line breaks rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If FileMaker stores text with custom break markers, convert them before injecting into HTML.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page does:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Residential Address ;
  Value: ConvertLineBreakMarkersToReturns ( GetValue ( $Link Record As List ; 14 ) )
]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is good. It means the injected textarea text looks like real address lines.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Adding a Read-Only Text Field (Computed Display)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A read-only text field is a normal text input that the user cannot edit.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Pattern</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;age&#x27;&gt;Age&lt;/label&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;age&#x27; value=&#x27;{{AGE}}&#x27; disabled&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2 Example from your page (Age)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;age&#x27;&gt;Age&lt;/label&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;age&#x27; placeholder=&#x27;0 years&#x27; value=&#x27;{{AGE}}&#x27; disabled&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.3 Save rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Disabled fields are usually not read and saved. If you do read them, they are often derived values anyway.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In your save logic, you do not read <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">age</code>. That is correct.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Adding Text Fields Inside &quot;Combined Inputs&quot; UI</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page has a &quot;Full Name&quot; area where one label covers multiple inputs arranged together.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1 Structure used in your page</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group form-group-2&#x27;&gt;
  &lt;label for=&#x27;size&#x27;&gt;Full Name&lt;/label&gt;

  &lt;div class=&#x27;combined-inputs-container&#x27;&gt;
    &lt;select class=&#x27;combined-inputs-dropdown&#x27; id=&#x27;title&#x27; ...&gt;...&lt;/select&gt;
    &lt;input class=&#x27;combined-inputs-input&#x27; type=&#x27;text&#x27; id=&#x27;first_name&#x27; ...&gt;
    &lt;input class=&#x27;combined-inputs-input&#x27; type=&#x27;text&#x27; id=&#x27;other_names&#x27; ...&gt;
    &lt;input class=&#x27;combined-inputs-input&#x27; type=&#x27;text&#x27; id=&#x27;last_name&#x27; ...&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.2 Text-field rule inside combined inputs</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Each input still needs its own unique <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Each input still must be read individually in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">saveItemInfo()</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Reading Text Field Values in JavaScript</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 Standard rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every text field is read using:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const value = document.getElementById(&#x27;FIELD_ID&#x27;).value;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 Examples from your save function</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const staff_number = document.getElementById(&#x27;staff_number&#x27;).value;
const first_name = document.getElementById(&#x27;first_name&#x27;).value;
const last_name = document.getElementById(&#x27;last_name&#x27;).value;
const phone = document.getElementById(&#x27;phone&#x27;).value;
const email = document.getElementById(&#x27;email&#x27;).value;
const gps = document.getElementById(&#x27;gps&#x27;).value;
const bank = document.getElementById(&#x27;bank&#x27;).value;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.3 Encoding rule (critical)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a field can contain:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">line breaks</li>
<li style="margin-bottom:8px;padding-left:8px;">pipes <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
<li style="margin-bottom:8px;padding-left:8px;">commas are fine</li>
<li style="margin-bottom:8px;padding-left:8px;">long paragraphs</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">then encode it before joining:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const residential_address = encodeURIComponent(
  document.getElementById(&#x27;residential_address&#x27;).value
);</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page does exactly this. That is correct.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Saving Text Field Values (Parameter Construction)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.1 The standard pattern in your pages</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Collect field values
</li>
<li style="margin-bottom:8px;padding-left:8px;">Join them with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Call FileMaker script
</li>
</ol>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const parameters = [ a, b, c, d ].join(&#x27;|&#x27;);
FileMaker.PerformScript(&#x27;Save Staff&#x27;, parameters);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.2 Why the delimiter matters</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your delimiter is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a user enters <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> into any text field, FileMaker will mis-split the parameter list and your data will land in wrong variables.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">That is why encoding is mandatory for any risky field.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Where Text Fields Live in the Page Layout</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.1 Tabs contain fields</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page uses tabs (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Details</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Contact</code>, etc.). Each tab HTML can contain text fields.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Tab 1 (Details) contains:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">staff_number</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">first_name</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">other_names</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">last_name</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">hometown</code></p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Tab 2 (Contact) contains:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">phone</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">email</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">gps</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">residential_address</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">postal_address</code></p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Tab 5 (Remunerations) contains:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">bank</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">branch</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">account_number</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.2 Use grids to control width and alignment</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-grid3</code> used for 3 columns</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-grid2</code> used for 2 columns</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-grid3&#x27;&gt;
  &lt;div class=&#x27;form-group-2&#x27;&gt;...&lt;/div&gt;
  &lt;div class=&#x27;form-group-2&#x27;&gt;...&lt;/div&gt;
  &lt;div class=&#x27;form-group-2&#x27;&gt;...&lt;/div&gt;
&lt;/div&gt;</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Text Fields That Look Like Text Fields but Behave Differently</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Some fields are still <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;text&#x27;&gt;</code> but are controlled by scripts.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.1 Date fields (still text inputs)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In your page:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">dob</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">from_date</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">to_date</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">They are text inputs, but Flatpickr controls them and converts to MySQL date format via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">getMySQLFormattedDate()</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This doc treats them as text fields structurally, but their behavior belongs to a separate doc for &quot;Date Fields&quot;.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Quality Checklist for the AI Agent</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When the AI Agent adds a new text field, it MUST verify:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The field is placed inside the correct grid container
</li>
<li style="margin-bottom:8px;padding-left:8px;">The field has a stable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">The label <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">for</code> matches the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">The field is prefilled properly from FileMaker variables
</li>
<li style="margin-bottom:8px;padding-left:8px;">The field is read in JS with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">getElementById(id).value</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">The field is included in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">parameters</code> in the correct order
</li>
<li style="margin-bottom:8px;padding-left:8px;">If the field can contain risky characters, it is encoded with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent()</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">If it is a textarea, prefill text is inside the element body
</li>
<li style="margin-bottom:8px;padding-left:8px;">If it is read-only, it uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">disabled</code> and is excluded from save unless explicitly required
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">14) Copy-Paste Templates</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">14.1 Single line text field template</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;FIELD_ID&#x27;&gt;LABEL&lt;/label&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;FIELD_ID&#x27; placeholder=&#x27;PLACEHOLDER&#x27; value=&#x27;{{VALUE}}&#x27;&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">14.2 Textarea template</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;FIELD_ID&#x27;&gt;LABEL&lt;/label&gt;
  &lt;textarea id=&#x27;FIELD_ID&#x27; placeholder=&#x27;PLACEHOLDER&#x27;&gt;{{VALUE}}&lt;/textarea&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">14.3 Disabled text field template</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;FIELD_ID&#x27;&gt;LABEL&lt;/label&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;FIELD_ID&#x27; value=&#x27;{{VALUE}}&#x27; disabled&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">14.4 JS read template</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const FIELD_ID = document.getElementById(&#x27;FIELD_ID&#x27;).value;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">14.5 JS encode template</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const FIELD_ID = encodeURIComponent(document.getElementById(&#x27;FIELD_ID&#x27;).value);</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">15) Common Failure Modes and Fixes</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">15.1 Field does not save</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Field ID not included in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">saveItemInfo()</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Add:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">const x = document.getElementById(&#x27;your_field&#x27;).value;</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - include <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">x</code> in the joined parameter list</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">15.2 Data lands in wrong FileMaker variable</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A user typed <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> into a field that was not encoded</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Encode that field with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent()</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">15.3 Textarea loses line breaks</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker value injected without converting markers properly</li>
<li style="margin-bottom:8px;padding-left:8px;">Or the value is stored with a custom marker system</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Convert in FileMaker before injection</li>
<li style="margin-bottom:8px;padding-left:8px;">Example:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ConvertLineBreakMarkersToReturns ( ... )</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">15.4 Field displays wrong prefill value</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Wrong FileMaker variable injected</li>
<li style="margin-bottom:8px;padding-left:8px;">Or quoting breaks the HTML attribute</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure the correct FileMaker variable is used</li>
<li style="margin-bottom:8px;padding-left:8px;">If you have apostrophes and quoting issues, switch to safe escaping rules in your HTML builder (see Clarifications section)</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">16) Clarifications Needed (Ambiguities the AI Agent Cannot Guess)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These must be clarified by you because the AI Agent cannot safely assume them.</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Encoding policy</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Right now, you only encode some fields (addresses, role).</li>
<li style="margin-bottom:4px;">Question: Should the standard be:</li>
<li style="margin-bottom:4px;">encode only multi-line fields</li>
<li style="margin-bottom:4px;">or encode every text field before joining</li>
<li style="margin-bottom:4px;">Recommendation for safety:</li>
<li style="margin-bottom:4px;">encode every field that can contain <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> or line breaks</li>
<li style="margin-bottom:4px;">optionally encode all fields to eliminate delimiter risk completely</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">HTML escaping policy for values</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Values injected into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">value=&#x27;...&#x27;</code> can break HTML if they contain <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&#x27;</code> or special characters.</li>
<li style="margin-bottom:4px;">Question: Do you have an existing escaping function or standard for:</li>
<li style="margin-bottom:4px;">escaping <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&#x27;</code> to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&amp;#39;</code></li>
<li style="margin-bottom:4px;">escaping <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&amp;</code> to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&amp;amp;</code></li>
<li style="margin-bottom:4px;">escaping <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&gt;</code></li>
<li style="margin-bottom:4px;">If there is a standard, the AI Agent must follow it.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Canonical &quot;Text Field Component&quot;</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">In the sample, text fields are raw HTML tags.</li>
<li style="margin-bottom:4px;">Question: Do you have a reusable component function or XML snippet for text fields, or should the AI Agent always generate raw HTML tags inside <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$TabX HTML</code>?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Validation</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Question: Do you have a standard validation style for required text fields?</li>
<li style="margin-bottom:4px;">Example: required attribute, inline red border, message block, or server-side only</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Field order in parameters</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">The save function depends on strict parameter order.</li>
<li style="margin-bottom:4px;">Question: Is there a documented contract for the parameter order per page, or does each page define its own order?</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">17) Minimum Example (End to End)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is an end-to-end reference for adding one new text field called &quot;Nickname&quot;.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">17.1 FileMaker: set variable</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Nickname ; Value: GetValue ( $Link Record As List ; 99 ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">17.2 HTML: add field to a grid</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;nickname&#x27;&gt;Nickname&lt;/label&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;nickname&#x27; placeholder=&#x27;Optional nickname&#x27; value=&#x27;{{NICKNAME}}&#x27;&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">17.3 JS: read field value</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const nickname = document.getElementById(&#x27;nickname&#x27;).value;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">17.4 JS: add to parameters (encode if needed)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const nicknameSafe = encodeURIComponent(nickname);
const parameters = [ staff_number, first_name, nicknameSafe ].join(&#x27;|&#x27;);
FileMaker.PerformScript(&#x27;Save Staff&#x27;, parameters);</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">18) Summary for the AI Agent (Do This Every Time)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When adding a text field:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Decide if it is input or textarea
</li>
<li style="margin-bottom:8px;padding-left:8px;">Choose a clean snake_case <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Add <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;label for=&#x27;id&#x27;&gt;</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Add the field inside a <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-gridX</code> container
</li>
<li style="margin-bottom:8px;padding-left:8px;">Pre-fill it using the correct FileMaker variable
</li>
<li style="margin-bottom:8px;padding-left:8px;">Read it in JS using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">getElementById(id).value</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Encode it if it can break parameter joining
</li>
<li style="margin-bottom:8px;padding-left:8px;">Append it to the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">parameters</code> list in correct order
</li>
<li style="margin-bottom:8px;padding-left:8px;">Confirm FileMaker save script expects it in that position
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-numbers">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">🔢</span>
                <span>Number Fields — How They Are Implemented and Used</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Number Fields and How They Are Implemented and Used</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Purpose of this doc  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Train an AI Agent to correctly implement <strong style="font-weight:600;color:#0f172a;">number fields</strong> in CauferoAppStarter WebViewer pages, including:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 1) The HTML patterns used for numeric inputs  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 2) Formatting rules (integers, decimals, currency, percent)  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 3) Validation rules (min, max, required, decimals allowed)  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 4) How values are preloaded from FileMaker variables  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 5) How values are collected in JavaScript and sent back to FileMaker  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 6) How the FileMaker Save script should parse and store the number correctly  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 7) Common pitfalls and correct fixes</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This document is written to match the architectural patterns in your sample page:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">fields are identified by stable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code></li>
<li style="margin-bottom:8px;padding-left:8px;">values are preloaded by string injection into HTML</li>
<li style="margin-bottom:8px;padding-left:8px;">Save functions collect values via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.getElementById(&#x27;...&#x27;).value</code></li>
<li style="margin-bottom:8px;padding-left:8px;">script parameters are sent using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> delimiter: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">[ ... ].join(&#x27;|&#x27;)</code></li>
<li style="margin-bottom:8px;padding-left:8px;">some values must be encoded to protect delimiter safety</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Even though the sample page does not show a dedicated numeric input field, the AI Agent must implement number fields using the same CauferoAppStarter conventions.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) What a Number Field Means in CauferoAppStarter</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A number field is any input where the intended stored value is numeric:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">quantity</li>
<li style="margin-bottom:8px;padding-left:8px;">price</li>
<li style="margin-bottom:8px;padding-left:8px;">cost</li>
<li style="margin-bottom:8px;padding-left:8px;">percentage</li>
<li style="margin-bottom:8px;padding-left:8px;">duration (minutes/hours)</li>
<li style="margin-bottom:8px;padding-left:8px;">scores</li>
<li style="margin-bottom:8px;padding-left:8px;">IDs that are numeric (only if they behave like numbers, otherwise treat as text)</li>
<li style="margin-bottom:8px;padding-left:8px;">rates (tax, discount)</li>
<li style="margin-bottom:8px;padding-left:8px;">balances and totals</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In this system, number fields are:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">rendered as HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">validated in JS (recommended)</li>
<li style="margin-bottom:8px;padding-left:8px;">parsed and validated again in FileMaker (required)</li>
<li style="margin-bottom:8px;padding-left:8px;">passed as script parameters joined by <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) Mandatory Rules (Non-Negotiable)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.1 Every number field MUST have a stable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">All Save and action scripts depend on IDs.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">quantity</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">unit_price</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">discount_percent</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.2 Number fields MUST be validated before script call (recommended)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">At minimum:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">prevent empty required numeric fields</li>
<li style="margin-bottom:8px;padding-left:8px;">prevent non-numeric text from being sent</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">FileMaker validation still must exist as the final gate.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.3 Never trust client input</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Even if JS validates, FileMaker must validate again.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Users can paste weird text, and WebViewer can be manipulated.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.4 Delimiter safety</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Numbers usually do not contain <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>, so encoding is often optional.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">But if you allow formatted values like <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">1,200.50</code>, currency symbols, or spaces, your parsing must be strict.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Standard approach:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">send raw numeric strings only (recommended)</li>
<li style="margin-bottom:8px;padding-left:8px;">avoid commas and symbols in the actual input value</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) HTML Implementation Patterns</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">There are two acceptable HTML patterns:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Pattern A: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;number&#x27;&gt;</code> (preferred)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use when you want native numeric keyboard support on mobile and browser-level constraints.</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;quantity&#x27;&gt;Quantity&lt;/label&gt;
  &lt;input type=&#x27;number&#x27; id=&#x27;quantity&#x27; placeholder=&#x27;0&#x27; value=&#x27;{{QUANTITY}}&#x27; min=&#x27;0&#x27; step=&#x27;1&#x27; inputmode=&#x27;numeric&#x27;&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Pattern B: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;text&#x27;&gt;</code> with numeric rules (fallback)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use when:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">you want custom formatting</li>
<li style="margin-bottom:8px;padding-left:8px;">or your WebViewer environment behaves inconsistently with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">type=&#x27;number&#x27;</code></li>
</ul>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;unit_price&#x27;&gt;Unit Price&lt;/label&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;unit_price&#x27; placeholder=&#x27;0.00&#x27; value=&#x27;{{UNIT_PRICE}}&#x27; inputmode=&#x27;decimal&#x27;&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If you do not need special formatting:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">type=&#x27;number&#x27;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If you need formatting, thousands separators, or currency display:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">type=&#x27;text&#x27;</code> and implement strict parsing.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) Numeric Types You Must Support</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must be able to implement these common numeric types:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Integer</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">quantity</li>
<li style="margin-bottom:8px;padding-left:8px;">number of children</li>
<li style="margin-bottom:8px;padding-left:8px;">count fields</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">HTML:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;input type=&#x27;number&#x27; id=&#x27;qty&#x27; step=&#x27;1&#x27; min=&#x27;0&#x27;&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS parsing:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const qty = parseInt(document.getElementById(&#x27;qty&#x27;).value, 10);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2 Decimal</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">prices</li>
<li style="margin-bottom:8px;padding-left:8px;">weights</li>
<li style="margin-bottom:8px;padding-left:8px;">measurements</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">HTML:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;input type=&#x27;number&#x27; id=&#x27;price&#x27; step=&#x27;0.01&#x27; min=&#x27;0&#x27;&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS parsing:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const price = parseFloat(document.getElementById(&#x27;price&#x27;).value);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.3 Currency</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Two approaches exist:</p>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">Approach 1: Store raw decimal, display label outside input (recommended)</h5>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;label for=&#x27;amount&#x27;&gt;Amount ({{CURRENCY}})&lt;/label&gt;
&lt;input type=&#x27;number&#x27; id=&#x27;amount&#x27; step=&#x27;0.01&#x27; min=&#x27;0&#x27;&gt;</pre>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">Approach 2: Store formatted string and parse (not recommended unless required)</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If you allow <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">1,200.00</code>, then you must strip commas before parsing.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.4 Percentage</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Store as numeric percent or decimal fraction depending on your database standard.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Common percent-as-0-100 approach:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;label for=&#x27;discount&#x27;&gt;Discount (%)&lt;/label&gt;
&lt;input type=&#x27;number&#x27; id=&#x27;discount&#x27; step=&#x27;0.01&#x27; min=&#x27;0&#x27; max=&#x27;100&#x27;&gt;</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) Preloading Number Values (FileMaker Side)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 Standard: preload numeric values as plain text</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When inserting into HTML, numeric values must be converted to text.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Recommended pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Quantity ; Value: GetAsText ( table::Quantity ) ]
Set Variable [ $Unit Price ; Value: GetAsText ( table::UnitPrice ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Default values</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If empty, use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">0</code> or blank based on field type and UX requirements:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Quantity ; Value: DefaultIfEmpty ( GetAsText ( table::Quantity ) ; &quot;0&quot; ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Do not preload values with commas or currency symbols unless your JS is explicitly designed to parse them.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Collecting Number Values (JavaScript)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 Basic collection pattern (string)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Even if you use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">type=&#x27;number&#x27;</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.value</code> returns a string.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">You can send the raw string to FileMaker if it is already clean.</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const quantity_raw = document.getElementById(&#x27;quantity&#x27;).value;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Clean parse pattern (recommended)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Always normalize before sending:</p>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">Integer normalize</h5>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function getIntValue(id) {
  const v = document.getElementById(id).value.trim();
  if (!v) return null;
  const n = parseInt(v, 10);
  return Number.isFinite(n) ? n : null;
}</pre>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">Decimal normalize</h5>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function getFloatValue(id) {
  const v = document.getElementById(id).value.trim();
  if (!v) return null;
  const n = parseFloat(v);
  return Number.isFinite(n) ? n : null;
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.3 Sending values to FileMaker</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your system joins parameters with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Numbers must be converted back to strings.</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const qty = getIntValue(&#x27;quantity&#x27;);
const price = getFloatValue(&#x27;unit_price&#x27;);

const parameters = [ qty, price ].join(&#x27;|&#x27;);
FileMaker.PerformScript(&#x27;Save Something&#x27;, parameters);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a value is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">null</code>, decide your system standard:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">send empty string</li>
<li style="margin-bottom:8px;padding-left:8px;">or send <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">0</code></li>
<li style="margin-bottom:8px;padding-left:8px;">or send explicit keyword like <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">NULL</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your current pages commonly send strings. The AI Agent needs your canonical standard clarified.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Validation Rules (JS + UX)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Required numeric field</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function requireNumber(id, label) {
  const v = document.getElementById(id).value.trim();
  if (!v) {
    alert(label + &#x27; is required.&#x27;);
    return false;
  }
  const n = parseFloat(v);
  if (!Number.isFinite(n)) {
    alert(label + &#x27; must be a number.&#x27;);
    return false;
  }
  return true;
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2 Min/Max constraints</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function enforceRange(id, label, min, max) {
  const v = document.getElementById(id).value.trim();
  if (!v) return true;
  const n = parseFloat(v);
  if (!Number.isFinite(n)) return false;
  if (n &lt; min || n &gt; max) {
    alert(label + &#x27; must be between &#x27; + min + &#x27; and &#x27; + max + &#x27;.&#x27;);
    return false;
  }
  return true;
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.3 Integer only</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function enforceInteger(id, label) {
  const v = document.getElementById(id).value.trim();
  if (!v) return true;
  const n = Number(v);
  if (!Number.isInteger(n)) {
    alert(label + &#x27; must be a whole number.&#x27;);
    return false;
  }
  return true;
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use JS validation as the first wall.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">FileMaker validation remains the final wall.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) FileMaker Parsing and Storage Rules</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1 FileMaker receives parameters as text</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Numbers arrive inside a delimited string:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">param1|param2|param3</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">So FileMaker must:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">split parameters
</li>
<li style="margin-bottom:8px;padding-left:8px;">validate numeric
</li>
<li style="margin-bottom:8px;padding-left:8px;">store into numeric fields
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.2 FileMaker numeric conversion</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Recommended pattern:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetAsNumber ( value )</code> for numeric conversion</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $qtyText ; Value: GetValue ( $params ; 1 ) ]
Set Variable [ $qty ; Value: GetAsNumber ( $qtyText ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.3 Empty handling</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the string is empty:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">decide whether to store 0 or leave empty</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $qty ;
  Value:
    Case (
      IsEmpty ( $qtyText ) ; &quot;&quot; ;
      GetAsNumber ( $qtyText )
    )
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The Save script must enforce:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">numeric fields do not store non-numeric strings</li>
<li style="margin-bottom:8px;padding-left:8px;">min/max rules that matter to business logic</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Formatting Rules (Display vs Stored Value)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 Stored value should be raw numeric</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Store:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">1200.5</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">not:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">1,200.50</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">not:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GHS 1,200.50</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 Display formatting should be optional UI sugar</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If you want formatted display, use one of these:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">format on blur event (and strip formatting before save)</li>
<li style="margin-bottom:8px;padding-left:8px;">display formatted value in a separate label/span next to input</li>
<li style="margin-bottom:8px;padding-left:8px;">store raw number and render formatted totals elsewhere (KPI cards, summary sections, tables)</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must not introduce formatted input values unless instructed, because it complicates parsing.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Implementation Templates (Copy-Paste)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.1 Integer field template</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">HTML:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;quantity&#x27;&gt;Quantity&lt;/label&gt;
  &lt;input type=&#x27;number&#x27; id=&#x27;quantity&#x27; placeholder=&#x27;0&#x27; value=&#x27;{{QUANTITY}}&#x27; min=&#x27;0&#x27; step=&#x27;1&#x27; inputmode=&#x27;numeric&#x27;&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS read:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const quantity = document.getElementById(&#x27;quantity&#x27;).value.trim();</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.2 Decimal field template</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">HTML:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;unit_price&#x27;&gt;Unit Price&lt;/label&gt;
  &lt;input type=&#x27;number&#x27; id=&#x27;unit_price&#x27; placeholder=&#x27;0.00&#x27; value=&#x27;{{UNIT_PRICE}}&#x27; min=&#x27;0&#x27; step=&#x27;0.01&#x27; inputmode=&#x27;decimal&#x27;&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS read:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const unit_price = document.getElementById(&#x27;unit_price&#x27;).value.trim();</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.3 Percent field template</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">HTML:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;discount_percent&#x27;&gt;Discount (%)&lt;/label&gt;
  &lt;input type=&#x27;number&#x27; id=&#x27;discount_percent&#x27; placeholder=&#x27;0&#x27; value=&#x27;{{DISCOUNT}}&#x27; min=&#x27;0&#x27; max=&#x27;100&#x27; step=&#x27;0.01&#x27; inputmode=&#x27;decimal&#x27;&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS read:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const discount_percent = document.getElementById(&#x27;discount_percent&#x27;).value.trim();</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Quality Checklist for the AI Agent</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When implementing a number field, the AI Agent must verify:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">HTML correctness</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">input has stable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">label exists and points to id
</li>
<li style="margin-bottom:8px;padding-left:8px;">appropriate type is chosen:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">number</code> preferred</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">text</code> only when needed</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">step/min/max reflect numeric type
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Data correctness</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker preloads raw numeric text
</li>
<li style="margin-bottom:8px;padding-left:8px;">default is applied if required (0 or blank)
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Save correctness</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">JS reads value by id
</li>
<li style="margin-bottom:8px;padding-left:8px;">JS validates numeric (recommended)
</li>
<li style="margin-bottom:8px;padding-left:8px;">parameters are joined in correct order
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">FileMaker correctness</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save script converts using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetAsNumber</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">business rules validation enforced (min/max, required)
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Common Failure Modes and Fixes</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.1 User enters commas and save fails</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">you allowed <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">1,200</code> and FileMaker <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetAsNumber</code> may interpret it unexpectedly depending on locale</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">prevent commas in input, or strip commas in JS before sending:</li>
</ul>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const raw = document.getElementById(&#x27;amount&#x27;).value;
const cleaned = raw.replace(/,/g, &#x27;&#x27;).trim();</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.2 Empty numeric field becomes 0 but should be blank</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetAsNumber(&quot;&quot;)</code> results in 0</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">handle empty explicitly before conversion</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.3 Decimal field stores too many decimals</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">no rounding rule</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">round in FileMaker or JS:</li>
</ul>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const rounded = Math.round(n * 100) / 100;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use the correct factor based on required decimals.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.4 Negative values allowed accidentally</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">missing <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">min=&#x27;0&#x27;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">set min in HTML and validate in FileMaker</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Clarifications Needed (Ambiguities the AI Agent Cannot Guess)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">To make number field implementation perfect, confirm these:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Null vs 0 standard</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">When a number field is empty, do you store:</li>
<li style="margin-bottom:4px;">empty</li>
<li style="margin-bottom:4px;">0</li>
<li style="margin-bottom:4px;">or keep existing value</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Decimal precision standard</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">For currency, do you always enforce 2 decimals?</li>
<li style="margin-bottom:4px;">For measurements, do you allow more?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Thousands separator policy</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you allow users to type commas?</li>
<li style="margin-bottom:4px;">If yes, should JS strip them automatically?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Locale and decimal separator</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you assume dot <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.</code> as decimal separator always?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Validation responsibility</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Which rules must be enforced in JS vs FileMaker?</li>
<li style="margin-bottom:4px;">Example: min/max, required, rounding, negative restrictions.</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">14) Implementation Standard (What the AI Agent Must Produce)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to implement a number field in CauferoAppStarter, the AI Agent must produce:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">HTML numeric input with stable id and label
</li>
<li style="margin-bottom:8px;padding-left:8px;">appropriate numeric constraints (step, min, max)
</li>
<li style="margin-bottom:8px;padding-left:8px;">preload raw numeric values from FileMaker variables
</li>
<li style="margin-bottom:8px;padding-left:8px;">JS logic that reads the value and validates it (recommended)
</li>
<li style="margin-bottom:8px;padding-left:8px;">JS parameter packaging using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">FileMaker Save script conversion and validation using numeric-safe rules
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-dates">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📅</span>
                <span>Datepickers (Flatpickr) — How They Are Implemented and Used</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Datepickers (Flatpickr) How They Are Implemented and Used</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Purpose of this doc  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Train an AI Agent to correctly implement <strong style="font-weight:600;color:#0f172a;">datepickers</strong> in CauferoAppStarter WebViewer pages using <strong style="font-weight:600;color:#0f172a;">Flatpickr</strong>, including:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 1) How date fields are rendered in HTML  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 2) How calendar icons are wired to open the picker  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 3) How existing values are preloaded and shown in human-readable format  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 4) How dates are converted back into <strong style="font-weight:600;color:#0f172a;">MySQL format (Y-m-d)</strong> before sending to FileMaker  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 5) How date ranges (From/To) are used to filter data and trigger FileMaker scripts  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 6) Required IDs, patterns, and failure mode fixes</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation is based on your sample page, which uses Flatpickr from CDN and implements:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">dob</code> (Date of Birth)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">from_date</code> (Attendance filter)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">to_date</code> (Attendance filter)</li>
<li style="margin-bottom:8px;padding-left:8px;">Icon IDs:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">dob_icon</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">from_date_icon</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">to_date_icon</code></p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Helper function:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">getMySQLFormattedDate(fieldId)</code></p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) What a Datepicker Means in CauferoAppStarter</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A datepicker is an enhanced text input that:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">displays a human-readable date string on-screen</li>
<li style="margin-bottom:8px;padding-left:8px;">stores (or converts to) a database-friendly date string when saving or filtering</li>
<li style="margin-bottom:8px;padding-left:8px;">is opened by:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - clicking the input</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - clicking a calendar icon next to it</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In CauferoAppStarter, datepickers are built using:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Flatpickr CSS + JS included in the HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;head&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">A shared initialization script that:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - binds flatpickr to selected fields</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - converts initial MySQL dates into readable date strings</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - provides a helper to convert readable dates back into MySQL format</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) Required Dependencies (Must Exist in the Full Page)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your full page includes these CDN resources:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;link rel=&#x27;stylesheet&#x27; href=&#x27;https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css&#x27;&gt;
&lt;script src=&#x27;https://cdn.jsdelivr.net/npm/flatpickr&#x27;&gt;&lt;/script&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rules</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Flatpickr CSS must be loaded before rendering fields (for correct UI)
</li>
<li style="margin-bottom:8px;padding-left:8px;">Flatpickr JS must be loaded before the initialization script runs
</li>
<li style="margin-bottom:8px;padding-left:8px;">The initialization script must run after DOM content is ready
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) HTML Implementation Pattern</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Each datepicker field uses:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">an <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;text&#x27;&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">a stable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code></li>
<li style="margin-bottom:8px;padding-left:8px;">an icon element placed absolutely within the same container</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.1 Canonical HTML for a date input with icon</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div style=&#x27;position: relative;&#x27;&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;dob&#x27; value=&#x27;{{DATE_VALUE}}&#x27; /&gt;
  &lt;i class=&#x27;fas fa-calendar-alt&#x27; id=&#x27;dob_icon&#x27;
     style=&#x27;position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #666; cursor: pointer;&#x27;&gt;&lt;/i&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Same structure for range filters:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div style=&#x27;position: relative;&#x27;&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;from_date&#x27; value=&#x27;{{FROM_DATE_MYSQL}}&#x27; /&gt;
  &lt;i class=&#x27;fas fa-calendar-alt&#x27; id=&#x27;from_date_icon&#x27; style=&#x27;position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #666; cursor: pointer;&#x27;&gt;&lt;/i&gt;
&lt;/div&gt;

&lt;div style=&#x27;position: relative;&#x27;&gt;
  &lt;input type=&#x27;text&#x27; id=&#x27;to_date&#x27; value=&#x27;{{TO_DATE_MYSQL}}&#x27; /&gt;
  &lt;i class=&#x27;fas fa-calendar-alt&#x27; id=&#x27;to_date_icon&#x27; style=&#x27;position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #666; cursor: pointer;&#x27;&gt;&lt;/i&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.2 Mandatory IDs</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A datepicker field must have:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">input ID: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FIELD_ID</code></li>
<li style="margin-bottom:8px;padding-left:8px;">icon ID: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FIELD_ID_icon</code> (or explicit mapping inside JS)</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In your system you use explicit mapping objects, so the icon ID does not have to follow a naming formula, but it must match what JS expects.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) FileMaker Preprocessing of Date Values</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page uses FileMaker variables to generate two styles of date values:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Date of Birth (DOB)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">DOB appears to be stored as a date text string (likely in MySQL format already) and injected directly:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Date of Birth ; Value: GetValue ( $Link Record As List ; 8 ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2 Date range filter values (From / To)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">You set defaults and also create MySQL versions:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $From Date ; Value: DefaultIfEmpty ( GetValue ( GetScriptParameters ; 3 ) ; Get ( CurrentDate ) ) ]
Set Variable [ $To Date ; Value: DefaultIfEmpty ( GetValue ( GetScriptParameters ; 4 ) ; Get ( CurrentDate ) ) ]

Set Variable [ $From Date MySQL ; Value: FMPDateTextToMySQLDate ( $From Date ) ]
Set Variable [ $To Date MySQL ; Value: FMPDateTextToMySQLDate ( $To Date ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When the page loads, date fields can start with a MySQL-style date string:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">YYYY-MM-DD</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then JS converts it into a readable format for the user.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) Datepicker Initialization Script (Flatpickr)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your implementation uses a single script that:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">declares date fields to initialize</li>
<li style="margin-bottom:8px;padding-left:8px;">converts initial MySQL date strings to readable date strings</li>
<li style="margin-bottom:8px;padding-left:8px;">creates flatpickr instances</li>
<li style="margin-bottom:8px;padding-left:8px;">binds the calendar icon click to open the picker</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 Canonical initialization script (from your page)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is the core pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">document.addEventListener(&#x27;DOMContentLoaded&#x27;, function () {
  const dateFields = [
    { id: &#x27;dob&#x27;, iconId: &#x27;dob_icon&#x27; },
    { id: &#x27;from_date&#x27;, iconId: &#x27;from_date_icon&#x27; },
    { id: &#x27;to_date&#x27;, iconId: &#x27;to_date_icon&#x27; }
  ];

  function formatMySQLDateToReadable(mysqlDate) {
    const parsedDate = flatpickr.parseDate(mysqlDate, &#x27;Y-m-d&#x27;);
    return parsedDate ? flatpickr.formatDate(parsedDate, &#x27;l, j F, Y&#x27;) : &#x27;&#x27;;
  }

  dateFields.forEach(field =&gt; {
    const dateInput = document.getElementById(field.id);
    const dateIcon = document.getElementById(field.iconId);

    const initialDate = dateInput.value &amp;&amp; dateInput.value !== &#x27;--&#x27; ? dateInput.value : null;

    if (initialDate) {
      dateInput.value = formatMySQLDateToReadable(initialDate);
    }

    const flatpickrInstance = flatpickr(dateInput, {
      dateFormat: &#x27;l, j F, Y&#x27;,
      defaultDate: initialDate || null,
      allowInput: true,
      onChange: function (selectedDates, dateStr) {
        dateInput.value = dateStr;
      }
    });

    if (dateIcon) {
      dateIcon.addEventListener(&#x27;click&#x27;, function () {
        flatpickrInstance.open();
      });
    }
  });
});</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 What this script guarantees</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">If the input value starts as <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">YYYY-MM-DD</code>, it becomes readable like:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Sunday, 7 January, 2026</code> (example format)</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">The flatpickr instance uses readable date format for UI
</li>
<li style="margin-bottom:8px;padding-left:8px;">Clicking the icon opens the datepicker
</li>
<li style="margin-bottom:8px;padding-left:8px;">The input value remains readable after picking
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Converting User-Selected Dates Back to MySQL Format</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your system provides a helper:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function getMySQLFormattedDate(fieldId) {
  const dateInput = document.getElementById(fieldId).value;

  if (!dateInput || dateInput === &#x27;--&#x27;) {
    return null;
  }

  const parsedDate = flatpickr.parseDate(dateInput, &#x27;l, j F, Y&#x27;);
  return parsedDate ? flatpickr.formatDate(parsedDate, &#x27;Y-m-d&#x27;) : null;
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Whenever the system needs to pass a date back to FileMaker:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">convert readable input value to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">YYYY-MM-DD</code></li>
<li style="margin-bottom:8px;padding-left:8px;">pass that string in script parameters</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) How Datepicker Values Are Used in Page Actions</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">There are two common action types:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Save action (Saving entity data)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In your page, DOB is captured during Save as MySQL date:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const dob = getMySQLFormattedDate(&#x27;dob&#x27;);</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then included in save parameters.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2 Filter action (Date range filtering)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your attendance section reads:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function getAttendance() {

  const from_date = getMySQLFormattedDate(&#x27;from_date&#x27;);
  const to_date = getMySQLFormattedDate(&#x27;to_date&#x27;);

  const parameters = [ from_date, to_date ].join(&#x27;|&#x27;);

  FileMaker.PerformScript(&#x27;Get Staff Attendance&#x27;, parameters);
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">For date range filters:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">both dates must be converted to MySQL format</li>
<li style="margin-bottom:8px;padding-left:8px;">parameters are sent to FileMaker script that regenerates the page or subtable</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Standard ID and Icon Wiring Rules</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1 Input ID rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every datepicker must have a unique, stable input ID.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.2 Icon ID rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every datepicker may have an icon ID.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If present, it must be mapped in the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">dateFields</code> array.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example mapping entry:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">{ id: &#x27;my_date_field&#x27;, iconId: &#x27;my_date_field_icon&#x27; }</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.3 If icon is missing</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The script checks:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">if (dateIcon) { ... }</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">So icon is optional, but recommended.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Copy-Paste Implementation Templates</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 Template: Add one datepicker field</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">HTML:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;my_date&#x27;&gt;My Date&lt;/label&gt;
  &lt;div style=&#x27;position: relative;&#x27;&gt;
    &lt;input type=&#x27;text&#x27; id=&#x27;my_date&#x27; value=&#x27;{{MY_DATE_MYSQL}}&#x27; /&gt;
    &lt;i class=&#x27;fas fa-calendar-alt&#x27; id=&#x27;my_date_icon&#x27;
       style=&#x27;position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #666; cursor: pointer;&#x27;&gt;&lt;/i&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS additions:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">1) Add entry in the dateFields array:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">{ id: &#x27;my_date&#x27;, iconId: &#x27;my_date_icon&#x27; }</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">2) Read value when needed:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const my_date_mysql = getMySQLFormattedDate(&#x27;my_date&#x27;);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 Template: Date range picker (From / To)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">HTML:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;input type=&#x27;text&#x27; id=&#x27;from_date&#x27; value=&#x27;{{FROM_DATE_MYSQL}}&#x27; /&gt;
&lt;i class=&#x27;fas fa-calendar-alt&#x27; id=&#x27;from_date_icon&#x27; ...&gt;&lt;/i&gt;

&lt;input type=&#x27;text&#x27; id=&#x27;to_date&#x27; value=&#x27;{{TO_DATE_MYSQL}}&#x27; /&gt;
&lt;i class=&#x27;fas fa-calendar-alt&#x27; id=&#x27;to_date_icon&#x27; ...&gt;&lt;/i&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS usage:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const from_date = getMySQLFormattedDate(&#x27;from_date&#x27;);
const to_date = getMySQLFormattedDate(&#x27;to_date&#x27;);</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Quality Checklist for the AI Agent</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When implementing a datepicker, the AI Agent must verify:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Dependencies</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Flatpickr CSS is included
</li>
<li style="margin-bottom:8px;padding-left:8px;">Flatpickr JS is included
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">HTML</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The field is an <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;text&#x27;&gt;</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">The input has a stable ID
</li>
<li style="margin-bottom:8px;padding-left:8px;">The icon exists and has a stable ID (recommended)
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Initialization</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Field ID is included in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">dateFields</code> array
</li>
<li style="margin-bottom:8px;padding-left:8px;">Script runs on <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">DOMContentLoaded</code>
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Formatting</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Initial MySQL date is converted to readable format on load
</li>
<li style="margin-bottom:8px;padding-left:8px;">On selection, the input stores readable format
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Output</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">When sending to FileMaker, use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">getMySQLFormattedDate()</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Null is returned for empty or <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">--</code> values
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Common Failure Modes and Fixes</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.1 Datepicker does not show calendar</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Flatpickr JS not loaded</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;script src=&#x27;https://cdn.jsdelivr.net/npm/flatpickr&#x27;&gt;&lt;/script&gt;</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.2 Icon click does nothing</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">icon ID mismatch</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">iconId</code> in dateFields matches HTML</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.3 Initial date shows as raw MySQL (YYYY-MM-DD)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">format conversion not applied</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">dateInput.value = formatMySQLDateToReadable(initialDate);</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.4 getMySQLFormattedDate returns null unexpectedly</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">input is not in readable format expected by parseDate</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure flatpickr <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">dateFormat</code> matches parseDate format:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - parse uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&#x27;l, j F, Y&#x27;</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - input is stored as <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&#x27;l, j F, Y&#x27;</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.5 Saving breaks because date contains commas and spaces</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">you passed readable date instead of MySQL date</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">always pass <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">getMySQLFormattedDate(&#x27;fieldId&#x27;)</code> result to FileMaker</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Clarifications Needed (Ambiguities the AI Agent Cannot Guess)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These must be clarified to make the AI Agent implementation perfect:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Date storage standard in FileMaker</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Are all stored dates in MySQL <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">YYYY-MM-DD</code> text format?</li>
<li style="margin-bottom:4px;">Or are some dates stored as FileMaker date type and later converted?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Locale and display format</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Your readable format is: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&#x27;l, j F, Y&#x27;</code></li>
<li style="margin-bottom:4px;">Must this always be the same across the whole app?</li>
<li style="margin-bottom:4px;">Any pages that must show a different format?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Timezone behavior</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you treat dates as pure dates (no timezone meaning)?</li>
<li style="margin-bottom:4px;">Or do you sometimes use timestamp pickers?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Validation rules</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you restrict:</li>
<li style="margin-bottom:4px;">future dates for DOB</li>
<li style="margin-bottom:4px;">from_date &lt;= to_date</li>
<li style="margin-bottom:4px;">required fields</li>
<li style="margin-bottom:4px;">If yes, where do you enforce it (JS or FileMaker)?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Empty date marker</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Your script checks for <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&#x27;--&#x27;</code></li>
<li style="margin-bottom:4px;">Confirm what the standard empty marker is in your pages.</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Implementation Standard (What the AI Agent Must Produce)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to implement a datepicker in CauferoAppStarter, the AI Agent must produce:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;text&#x27;&gt;</code> with stable ID and label
</li>
<li style="margin-bottom:8px;padding-left:8px;">calendar icon next to it, wired by ID mapping
</li>
<li style="margin-bottom:8px;padding-left:8px;">Flatpickr initialization script:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">converts initial MySQL date to readable</li>
<li style="margin-bottom:4px;">sets flatpickr to readable date format</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Helper <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">getMySQLFormattedDate(fieldId)</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Usage rule:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">always convert to MySQL format before passing to FileMaker scripts</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-dropdowns">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">🔽</span>
                <span>Dropdown Fields (Select Inputs) — How They Are Implemented</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Dropdown Fields (Select Inputs) and How They Are Implemented</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Purpose of this doc  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Train an AI Agent to correctly implement dropdown fields (HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt;</code>) in CauferoAppStarter WebViewer pages, including:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 1) Standard dropdowns populated as HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;option&gt;</code> tags from FileMaker  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 2) Dropdowns populated dynamically in JavaScript from FileMaker-provided JSON objects  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 3) Dependent dropdowns (Department -&gt; Job Title -&gt; Notch)  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 4) How selected values are preselected, read, and saved back to FileMaker</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation is based on patterns in your sample page:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Standard dropdowns:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">title</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">nationality</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">hometown_region</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">role</code></p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Dynamic dependent dropdowns:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">department</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">job_title</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">notch</code></p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Data sources:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ &quot;Get Value List&quot; ; Parameter: &quot;Dropdown|...&quot; ]</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ &quot;Get Value List&quot; ; Parameter: &quot;JS|...&quot; ]</code></p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) What a Dropdown Means in CauferoAppStarter</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A dropdown is an HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt;</code> element that:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">renders on the page
</li>
<li style="margin-bottom:8px;padding-left:8px;">may be preselected to the entity&#x27;s existing value
</li>
<li style="margin-bottom:8px;padding-left:8px;">is read in JavaScript on Save
</li>
<li style="margin-bottom:8px;padding-left:8px;">is sent back to FileMaker via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript()</code>
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">There are two implementation modes in your framework:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Mode A: HTML options generated in FileMaker</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker returns a string of <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;option&gt;</code> tags</li>
<li style="margin-bottom:8px;padding-left:8px;">The <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt;</code> is rendered already filled</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Mode B: Options generated in JavaScript</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker returns a JavaScript object string (JSON-like)</li>
<li style="margin-bottom:8px;padding-left:8px;">JavaScript builds <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;option&gt;</code> tags and appends them to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Used for larger datasets and dependent dropdowns</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) Mandatory Rules (Non-Negotiable)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.1 Every dropdown MUST have a stable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JavaScript reads <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.value</code> using the ID.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">title</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">nationality</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">hometown_region</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">department</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">job_title</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">notch</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">role</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.2 Every dropdown MUST have a label</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;label for=&#x27;...&#x27;&gt;</code>.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.3 Do not hardcode large option lists in HTML</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the list is long or depends on other selections, use Mode B (JS object approach).</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.4 Saving dropdown values is the same as text fields</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Read:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const nationality = document.getElementById(&#x27;nationality&#x27;).value;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then include in parameter list.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) Dropdown Types in Your Page</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.1 Simple dropdowns (FileMaker-generated HTML options)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Titles</li>
<li style="margin-bottom:8px;padding-left:8px;">Nationalities</li>
<li style="margin-bottom:8px;padding-left:8px;">Regions</li>
<li style="margin-bottom:8px;padding-left:8px;">Roles</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These are rendered as:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;select id=&#x27;nationality&#x27;&gt; {{OPTIONS_HTML}} &lt;/select&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.2 Dynamic dropdowns (JS-generated options)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Department</li>
<li style="margin-bottom:8px;padding-left:8px;">Job Title</li>
<li style="margin-bottom:8px;padding-left:8px;">Notch</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These are rendered as empty selects with a placeholder option:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;select id=&#x27;department&#x27;&gt; &lt;option value=&#x27;&#x27;&gt;Select Department&lt;/option&gt; &lt;/select&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then JS fills them.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) Mode A: Dropdown Options Generated in FileMaker (HTML Options)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Data source pattern (FileMaker script call)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page calls a central script named <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code>:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ “Get Value List” ; Parameter: &quot;Dropdown|Titles|&quot; &amp; $Title ]
Set Variable [ $Titles HTML ; Value: Get ( ScriptResult ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Same pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ “Get Value List” ; Parameter: &quot;Dropdown|Nationalities|&quot; &amp; $Nationality ]
Set Variable [ $Nationalities HTML ; Value: Get ( ScriptResult ) ]

Perform Script [ “Get Value List” ; Parameter: &quot;Dropdown|Regions|&quot; &amp; $Hometown Region ]
Set Variable [ $Hometown Regions HTML ; Value: Get ( ScriptResult ) ]

Perform Script [ “Get Value List” ; Parameter: &quot;Dropdown|Roles|&quot; &amp; $Role ID ]
Set Variable [ $Roles Dropdown HTML ; Value: Get ( ScriptResult ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2 Contract of <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code> for Dropdown mode</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must assume this contract:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Input parameter format:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Dropdown|&lt;ValueListName&gt;|&lt;SelectedValue&gt;&quot;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Output:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A string containing one or more <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;option&gt;</code> elements</li>
<li style="margin-bottom:8px;padding-left:8px;">The matching selected item is marked as selected</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example output shape:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;option value=&#x27;Mr&#x27;&gt;Mr&lt;/option&gt;
&lt;option value=&#x27;Mrs&#x27; selected&gt;Mrs&lt;/option&gt;
&lt;option value=&#x27;Dr&#x27;&gt;Dr&lt;/option&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If your actual script uses different option value rules (IDs vs labels), clarify it in the Clarifications section.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.3 HTML injection pattern</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Inject the returned HTML into the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt;</code>:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;select id=&#x27;nationality&#x27;&gt; {{NATIONALITIES_HTML}} &lt;/select&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;select id=&#x27;nationality&#x27;&gt; &quot; &amp; $Nationalities HTML &amp; &quot; &lt;/select&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.4 Example: Titles dropdown in combined inputs</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;select class=&#x27;combined-inputs-dropdown&#x27; id=&#x27;title&#x27; aria-label=&#x27;Title&#x27; style=&#x27;width:50%&#x27;&gt;
  {{TITLES_HTML}}
&lt;/select&gt;</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) Mode B: Dropdown Options Generated in JavaScript (JS Objects)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This mode is used when:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">the dataset is large</li>
<li style="margin-bottom:8px;padding-left:8px;">the dataset needs dependent filtering</li>
<li style="margin-bottom:8px;padding-left:8px;">you want to avoid shipping huge HTML strings</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 FileMaker data source pattern</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page fetches JS objects through <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code> in JS mode:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ “Get Value List” ; Parameter: &quot;JS|Departments|&quot; &amp; $Department ]
Set Variable [ $Departments JS ; Value: Get ( ScriptResult ) ]

Perform Script [ “Get Value List” ; Parameter: &quot;JS|Job Titles|&quot; &amp; $Job Title ]
Set Variable [ $Job Titles JS ; Value: Get ( ScriptResult ) ]

Perform Script [ “Get Value List” ; Parameter: &quot;JS|Notches|&quot; &amp; $Notch ID ]
Set Variable [ $Notches JS ; Value: Get ( ScriptResult ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Contract of <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code> for JS mode</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must assume this contract:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Input parameter format:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;JS|&lt;DatasetName&gt;|&lt;SelectedDisplayValueOrId&gt;&quot;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Output:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A string that can be placed directly into JS object literal context</li>
<li style="margin-bottom:8px;padding-left:8px;">It becomes a valid object when wrapped like:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">const departments = { &lt;output&gt; };</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example expected shape:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">{
  &quot;UUID-1&quot;: { &quot;c2&quot;: &quot;Dept Name&quot; },
  &quot;UUID-2&quot;: { &quot;c2&quot;: &quot;Another Dept&quot; }
}</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your dependent dropdown script uses keys like:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">details.c2</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">details.c3</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">So the AI Agent must preserve the same field mapping:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">For Departments:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">details.c2</code> = department name</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">For Job Titles:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">details.c2</code> = department ID</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">details.c3</code> = job title name</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">For Notches:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">details.c2</code> = job title ID</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">details.c3</code> = notch label</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If those c-values differ in your real data, clarify it.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Dependent Dropdowns (Department -&gt; Job Title -&gt; Notch)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 HTML skeleton (empty selects with placeholders)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your Tab 4 HTML:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;select id=&#x27;department&#x27;&gt; &lt;option value=&#x27;&#x27;&gt;Select Department&lt;/option&gt; &lt;/select&gt;
&lt;select id=&#x27;job_title&#x27;&gt; &lt;option value=&#x27;&#x27;&gt;Select Job Title&lt;/option&gt; &lt;/select&gt;
&lt;select id=&#x27;notch&#x27;&gt; &lt;option value=&#x27;&#x27;&gt;Select Notch&lt;/option&gt; &lt;/select&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Preselected values come from FileMaker IDs</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your script sets these variables earlier:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Department ID</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Job Title ID</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Notch ID</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then injects them into JS:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const selectedDepartment = &#x27;{{DEPARTMENT_ID}}&#x27;;
const selectedJobTitle = &#x27;{{JOB_TITLE_ID}}&#x27;;
const selectedNotch = &#x27;{{NOTCH_ID}}&#x27;;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.3 JavaScript population pattern (from your page)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">document.addEventListener(&#x27;DOMContentLoaded&#x27;, function() {

  const departments = { {{DEPARTMENTS_JS}} };
  const jobTitles = { {{JOB_TITLES_JS}} };
  const notches = { {{NOTCHES_JS}} };

  const departmentDropdown = document.getElementById(&#x27;department&#x27;);
  const jobTitleDropdown = document.getElementById(&#x27;job_title&#x27;);
  const notchDropdown = document.getElementById(&#x27;notch&#x27;);

  const selectedDepartment = &#x27;{{DEPARTMENT_ID}}&#x27;;
  const selectedJobTitle = &#x27;{{JOB_TITLE_ID}}&#x27;;
  const selectedNotch = &#x27;{{NOTCH_ID}}&#x27;;

  /* Populate departments dropdown */
  for (const [id, details] of Object.entries(departments)) {
    let option = document.createElement(&#x27;option&#x27;);
    option.value = id;
    option.textContent = details.c2; /* c2 holds department name */
    if (id === selectedDepartment) option.selected = true;
    departmentDropdown.appendChild(option);
  }

  function populateJobTitles(deptId) {
    jobTitleDropdown.innerHTML = &#x27;&lt;option value=\&quot;\&quot;&gt;Select Job Title&lt;/option&gt;&#x27;;
    notchDropdown.innerHTML = &#x27;&lt;option value=\&quot;\&quot;&gt;Select Notch&lt;/option&gt;&#x27;;

    for (const [id, details] of Object.entries(jobTitles)) {
      /* c2 holds department ID, c3 holds job title name */
      if (details.c2 === deptId) {
        let option = document.createElement(&#x27;option&#x27;);
        option.value = id;
        option.textContent = details.c3;
        if (id === selectedJobTitle) option.selected = true;
        jobTitleDropdown.appendChild(option);
      }
    }
    if (selectedJobTitle) populateNotches(selectedJobTitle);
  }

  function populateNotches(jobId) {
    notchDropdown.innerHTML = &#x27;&lt;option value=\&quot;\&quot;&gt;Select Notch&lt;/option&gt;&#x27;;
    for (const [id, details] of Object.entries(notches)) {
      /* c2 holds job title ID, c3 holds notch label */
      if (details.c2 === jobId) {
        let option = document.createElement(&#x27;option&#x27;);
        option.value = id;
        option.textContent = details.c3;
        if (id === selectedNotch) option.selected = true;
        notchDropdown.appendChild(option);
      }
    }
  }

  if (selectedDepartment) populateJobTitles(selectedDepartment);

  departmentDropdown.addEventListener(&#x27;change&#x27;, function() {
    populateJobTitles(this.value);
  });

  jobTitleDropdown.addEventListener(&#x27;change&#x27;, function() {
    populateNotches(this.value);
  });
});</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.4 Core rules for dependent dropdowns</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Department options are always loaded first
</li>
<li style="margin-bottom:8px;padding-left:8px;">When Department changes:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Job Titles reset</li>
<li style="margin-bottom:4px;">Notches reset</li>
<li style="margin-bottom:4px;">Job Titles repopulate for that department</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">When Job Title changes:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Notches repopulate for that job title</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Preselected values must be applied during population
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Reading Dropdown Values in Save Function</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Standard read</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.value</code>:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const title = document.getElementById(&#x27;title&#x27;).value;
const nationality = document.getElementById(&#x27;nationality&#x27;).value;
const hometown_region = document.getElementById(&#x27;hometown_region&#x27;).value;

const department = document.getElementById(&#x27;department&#x27;).value;
const job_title = document.getElementById(&#x27;job_title&#x27;).value;
const notch = document.getElementById(&#x27;notch&#x27;).value;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2 Encoding rule when saving</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In your page you encode:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">role</code></li>
</ul>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const role = encodeURIComponent(document.getElementById(&#x27;role&#x27;).value);</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This can be standard for dropdowns too if:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">option labels contain risky characters</li>
<li style="margin-bottom:8px;padding-left:8px;">you are using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> delimiter</li>
<li style="margin-bottom:8px;padding-left:8px;">you want maximum safety</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Preselecting Dropdown Values</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1 Mode A preselect</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">FileMaker does it inside <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code> output.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">You pass the selected value in the parameter string, and the script outputs <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">selected</code> on the matching <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;option&gt;</code>.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.2 Mode B preselect</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JavaScript does it during option creation:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">if (id === selectedDepartment) option.selected = true;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">That means:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker must supply correct selected IDs</li>
<li style="margin-bottom:8px;padding-left:8px;">the JS object keys must match those IDs</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Where Dropdown Data Comes From</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page uses two sources:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 Value lists turned into HTML options (Mode A)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Titles</li>
<li style="margin-bottom:8px;padding-left:8px;">Nationalities</li>
<li style="margin-bottom:8px;padding-left:8px;">Regions</li>
<li style="margin-bottom:8px;padding-left:8px;">Roles</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 Data lists turned into JS objects (Mode B)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Departments</li>
<li style="margin-bottom:8px;padding-left:8px;">Job Titles</li>
<li style="margin-bottom:8px;padding-left:8px;">Notches</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Copy-Paste Implementation Templates</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.1 Template A: FileMaker-generated HTML options dropdown</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">HTML:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;FIELD_ID&#x27;&gt;LABEL&lt;/label&gt;
  &lt;select id=&#x27;FIELD_ID&#x27;&gt; {{OPTIONS_HTML}} &lt;/select&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">FileMaker pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ &quot;Get Value List&quot; ; Parameter: &quot;Dropdown|VALUE_LIST_NAME|&quot; &amp; $SelectedValue ]
Set Variable [ $OptionsHTML ; Value: Get ( ScriptResult ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Inject:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $TabX HTML ;
&quot;
&lt;select id=&#x27;FIELD_ID&#x27;&gt; &quot; &amp; $OptionsHTML &amp; &quot; &lt;/select&gt;
&quot;
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.2 Template B: JS-generated dropdown from JS object</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">HTML skeleton:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;FIELD_ID&#x27;&gt;LABEL&lt;/label&gt;
  &lt;select id=&#x27;FIELD_ID&#x27;&gt;&lt;option value=&#x27;&#x27;&gt;Select LABEL&lt;/option&gt;&lt;/select&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS population:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const data = { {{DATA_JS}} };
const dropdown = document.getElementById(&#x27;FIELD_ID&#x27;);

for (const [id, details] of Object.entries(data)) {
  let option = document.createElement(&#x27;option&#x27;);
  option.value = id;
  option.textContent = details.c2;
  dropdown.appendChild(option);
}</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Quality Checklist for the AI Agent</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When adding a dropdown field, the AI Agent must verify:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Structure</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt;</code> has a stable ID
</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;label for&gt;</code> matches the ID
</li>
<li style="margin-bottom:8px;padding-left:8px;">Field sits inside standard grid containers (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-gridX</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-group-2</code>)
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Data source</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Mode A:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code> called with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Dropdown|...&quot;</code> format</li>
<li style="margin-bottom:4px;">HTML options string injected into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt;</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Mode B:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code> called with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;JS|...&quot;</code> format</li>
<li style="margin-bottom:4px;">output becomes valid JS object inside <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">{ }</code></li>
<li style="margin-bottom:4px;">JS populates <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt;</code> with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.createElement(&#x27;option&#x27;)</code></li>
</ul>
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Preselect</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Preselected value is applied correctly:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Mode A uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">selected</code> option output</li>
<li style="margin-bottom:4px;">Mode B compares IDs and sets <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">option.selected = true</code></li>
</ul>
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Save</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Dropdown value is read on Save
</li>
<li style="margin-bottom:8px;padding-left:8px;">Value is included in parameter list in correct order
</li>
<li style="margin-bottom:8px;padding-left:8px;">Encode if needed to protect delimiter-based parameter parsing
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Common Failure Modes and Fixes</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.1 Dropdown shows empty even though data exists</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">You forgot to inject <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$OptionsHTML</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">select id=&#x27;x&#x27;&gt; &quot; &amp; $OptionsHTML &amp; &quot; &lt;/select&gt;</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.2 Wrong item is preselected in Mode A</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The selected value passed to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code> does not match any option value</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure the script expects label vs ID and you pass the correct one</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.3 Dependent dropdown does not update</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">missing change event listener</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">departmentDropdown.addEventListener(&#x27;change&#x27;, ...)</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.4 Dependent dropdown filters wrong</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">incorrect c-mapping assumptions (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">c2</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">c3</code>)</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">verify:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - jobTitles entry has department ID in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">c2</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - notch entry has job title ID in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">c2</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">12.5 Save script receives wrong dropdown data</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">parameter order mismatch</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">match <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">parameters = [ ... ].join(&#x27;|&#x27;)</code> order to the FileMaker save script parsing order</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Clarifications Needed (Ambiguities the AI Agent Cannot Guess)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These must be clarified to make the AI Agent implementation perfect:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Option values: IDs or labels</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">For Titles, Nationalities, Regions:</li>
<li style="margin-bottom:4px;">does the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;option value&gt;</code> equal the label text</li>
<li style="margin-bottom:4px;">or a UUID behind the scenes</li>
<li style="margin-bottom:4px;">For Roles:</li>
<li style="margin-bottom:4px;">looks like it may be ID-based (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Role ID</code>)</li>
<li style="margin-bottom:4px;">The AI Agent needs the rule per value list type.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Exact output format of <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code></strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">For Dropdown mode:</li>
<li style="margin-bottom:4px;">does it return only <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;option&gt;</code> tags</li>
<li style="margin-bottom:4px;">or full <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt;</code> markup sometimes</li>
<li style="margin-bottom:4px;">For JS mode:</li>
<li style="margin-bottom:4px;">does it return strict JSON</li>
<li style="margin-bottom:4px;">or JSON-like object literal without outer braces</li>
<li style="margin-bottom:4px;">The AI Agent must generate compatible wrappers.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Selection key in JS mode</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Are selected values always IDs (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Department ID</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Job Title ID</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Notch ID</code>)?</li>
<li style="margin-bottom:4px;">Or do you sometimes preselect by display name?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Sorting</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Should dropdown options be sorted alphabetically</li>
<li style="margin-bottom:4px;">or in a custom order defined by the dataset?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Empty selection rules</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">When value is empty, should the first option always be:</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;option value=&#x27;&#x27;&gt;Select X&lt;/option&gt;</code></li>
<li style="margin-bottom:4px;">Any fields that must never be blank?</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">14) Implementation Standard (What the AI Agent Must Produce)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to implement a dropdown in CauferoAppStarter, the AI Agent must produce:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select&gt;</code> with stable ID and label
</li>
<li style="margin-bottom:8px;padding-left:8px;">One of:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Mode A: FileMaker-generated <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;option&gt;</code> HTML injected</li>
<li style="margin-bottom:4px;">Mode B: JS object injected and JS populates options</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Preselect behavior:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Mode A via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">selected</code> option in HTML output</li>
<li style="margin-bottom:4px;">Mode B via ID comparison and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">option.selected = true</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Save integration:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">read <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.value</code></li>
<li style="margin-bottom:4px;">include in parameter list</li>
<li style="margin-bottom:4px;">encode if needed for delimiter safety</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-textareas">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">📝</span>
                <span>Text Areas (Multi-line Text Fields) — How They Are Implemented</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Text Areas (Multi-line Text Fields) and How They Are Implemented</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Purpose of this doc  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Train an AI Agent to correctly implement <strong style="font-weight:600;color:#0f172a;">text areas</strong> in CauferoAppStarter WebViewer pages, including:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 1) HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;textarea&gt;</code> rendering patterns used in pages  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 2) How values are preloaded from FileMaker variables  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 3) How user input is collected in JavaScript and sent back to FileMaker  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 4) Encoding rules for safe parameter passing  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 5) Line break handling between FileMaker and HTML  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 6) Common pitfalls and the correct fixes</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation is based on patterns in your sample page:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Text areas used:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">residential_address</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">postal_address</code></p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Data pre-processing:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ConvertLineBreakMarkersToReturns(...)</code></p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save logic:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent(document.getElementById(&#x27;residential_address&#x27;).value)</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent(document.getElementById(&#x27;postal_address&#x27;).value)</code></p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) What a Text Area Means in CauferoAppStarter</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A text area is used for multi-line values such as:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">addresses</li>
<li style="margin-bottom:8px;padding-left:8px;">descriptions</li>
<li style="margin-bottom:8px;padding-left:8px;">notes</li>
<li style="margin-bottom:8px;padding-left:8px;">remarks</li>
<li style="margin-bottom:8px;padding-left:8px;">long comments</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In CauferoAppStarter, a text area is implemented using:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">an HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;textarea&gt;</code> element with a stable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code></li>
<li style="margin-bottom:8px;padding-left:8px;">FileMaker variable injection to preload existing value</li>
<li style="margin-bottom:8px;padding-left:8px;">JavaScript collection on Save</li>
<li style="margin-bottom:8px;padding-left:8px;">URL encoding to protect delimiters and line breaks</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) Mandatory Rules (Non-Negotiable)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.1 Always use a stable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JavaScript reads the value by ID.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example IDs:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">residential_address</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">postal_address</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.2 Always use a label</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The label must match <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">for=&#x27;ID&#x27;</code>.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.3 Never use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">value=&#x27;...&#x27;</code> attribute on <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;textarea&gt;</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Textareas do not use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">value</code> attribute.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Their value is the inner text content:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Correct:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;textarea id=&#x27;residential_address&#x27;&gt;Existing text&lt;/textarea&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Wrong:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;textarea id=&#x27;residential_address&#x27; value=&#x27;Existing text&#x27;&gt;&lt;/textarea&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.4 Always encode textarea values on Save</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Because:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">you join parameters using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
<li style="margin-bottom:8px;padding-left:8px;">textarea content can contain line breaks, pipes, and special characters</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">So do:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">encodeURIComponent(document.getElementById(&#x27;residential_address&#x27;).value)</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) Data Flow Overview (End-to-End)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step A: Get stored text from database</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">You query and assign values to variables like:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Residential Address</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Postal Address</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step B: Normalize line breaks for HTML insertion</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page does:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ConvertLineBreakMarkersToReturns(...)</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step C: Inject into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;textarea&gt;</code> inner text</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page injects:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;textarea id=&#x27;residential_address&#x27;&gt;{{RES_ADDRESS}}&lt;/textarea&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step D: Read on Save and encode</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your save script does:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent(textarea.value)</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step E: Pass to FileMaker via parameters</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Parameters are joined with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">FileMaker receives and decodes if needed.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) Preloading Text Area Values (FileMaker Side)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Canonical pattern (from your page)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">You set values like:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Residential Address ;
  Value: ConvertLineBreakMarkersToReturns ( GetValue ( $Link Record As List ; 14 ) )
]

Set Variable [ $Postal Address ;
  Value: ConvertLineBreakMarkersToReturns ( GetValue ( $Link Record As List ; 16 ) )
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2 What <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ConvertLineBreakMarkersToReturns</code> is doing (assumed)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must assume your stored text may contain markers such as:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">¶</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">\n</code></li>
<li style="margin-bottom:8px;padding-left:8px;">other placeholders</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The function converts them into actual returns suitable for HTML insertion.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If your storage uses a different marker system, the AI Agent needs it clarified.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) Rendering Text Areas (HTML)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 Canonical HTML pattern (from your page)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your Tab 2 uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;residential_address&#x27;&gt;Residential Address&lt;/label&gt;
  &lt;textarea id=&#x27;residential_address&#x27; placeholder=&#x27;Type the residential address here...&#x27;&gt;{{RES_ADDRESS}}&lt;/textarea&gt;
&lt;/div&gt;

&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;postal_address&#x27;&gt;Postal Address&lt;/label&gt;
  &lt;textarea id=&#x27;postal_address&#x27; placeholder=&#x27;Type the postal address here...&#x27;&gt;{{POSTAL_ADDRESS}}&lt;/textarea&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Layout pattern</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Text areas typically sit in a 2-column grid container:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-grid2</code></li>
<li style="margin-bottom:8px;padding-left:8px;">each text area uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-group-2</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example container:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-grid2&#x27;&gt;
  ...two textarea blocks...
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.3 Placeholder guidelines</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Placeholders must be:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">short</li>
<li style="margin-bottom:8px;padding-left:8px;">instructive</li>
<li style="margin-bottom:8px;padding-left:8px;">consistent with your page tone</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">placeholder=&#x27;Type the residential address here...&#x27;</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Collecting Text Area Values on Save (JavaScript)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 Canonical pattern (from your page)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your save script uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const residential_address = encodeURIComponent(document.getElementById(&#x27;residential_address&#x27;).value);
const postal_address = encodeURIComponent(document.getElementById(&#x27;postal_address&#x27;).value);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Why encodeURIComponent is required</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your parameter system uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const parameters = [ ... ].join(&#x27;|&#x27;);</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If textarea content contains:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">pipes <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
<li style="margin-bottom:8px;padding-left:8px;">returns</li>
<li style="margin-bottom:8px;padding-left:8px;">commas</li>
<li style="margin-bottom:8px;padding-left:8px;">quotes</li>
<li style="margin-bottom:8px;padding-left:8px;">Unicode characters</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then encoding is mandatory to avoid breaking parsing in FileMaker.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.3 Standard saving rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Always encode textareas.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Even if you think &quot;it is just an address&quot;.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Addresses can contain:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">line breaks</li>
<li style="margin-bottom:8px;padding-left:8px;">commas</li>
<li style="margin-bottom:8px;padding-left:8px;">special characters</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Parameter Passing Rules (Delimiter Safety)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Standard join method</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your system uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const parameters = [ field1, field2, field3, ... ].join(&#x27;|&#x27;);
FileMaker.PerformScript(&#x27;Save Staff&#x27;, parameters);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2 Implication for text areas</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">FileMaker receives encoded values.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">So the FileMaker Save script must decode them (if your standard requires it).</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Two possibilities exist:</p>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">Option A: Decode in FileMaker Save Script</h5>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">GetAsText</code> and decode percent encoding</li>
<li style="margin-bottom:8px;padding-left:8px;">Example utility might exist in your system (unknown name)</li>
</ul>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">Option B: Store encoded value as-is</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Not recommended for text fields because it stores <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">%0A</code> sequences and reduces readability.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent needs your canonical approach clarified.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Recommended Standard: Text Areas Must Be Decoded Before Saving</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is the clean standard the AI Agent should follow unless you say otherwise:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">JS encodes textarea:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent(...)</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">FileMaker Save script decodes to real text
</li>
<li style="margin-bottom:8px;padding-left:8px;">Save decoded text into the field
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If you already have a standard function like:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">URLDecode</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">PercentDecode</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">DecodeURIComponent</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">the AI Agent must be told the exact function name.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Copy-Paste Implementation Templates</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 Template: Text area in a form group</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;FIELD_ID&#x27;&gt;LABEL&lt;/label&gt;
  &lt;textarea id=&#x27;FIELD_ID&#x27; placeholder=&#x27;PLACEHOLDER&#x27;&gt;{{PRELOADED_VALUE}}&lt;/textarea&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 Template: JS read and encode</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const FIELD_ID_value = encodeURIComponent(document.getElementById(&#x27;FIELD_ID&#x27;).value);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.3 Template: Save parameter inclusion</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const parameters = [ ..., FIELD_ID_value, ... ].join(&#x27;|&#x27;);
FileMaker.PerformScript(&#x27;SAVE_SCRIPT_NAME&#x27;, parameters);</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Quality Checklist for the AI Agent</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When implementing text areas, the AI Agent must verify:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">HTML correctness</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;textarea&gt;</code> has an ID
</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;label for&gt;</code> matches ID
</li>
<li style="margin-bottom:8px;padding-left:8px;">Preloaded value is inside textarea inner text, not an attribute
</li>
<li style="margin-bottom:8px;padding-left:8px;">Placeholder exists (optional but recommended)
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Data correctness</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker variable is normalized for line breaks before injection
</li>
<li style="margin-bottom:8px;padding-left:8px;">The injected value does not break HTML structure
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Save correctness</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Textarea value is read using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.value</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Value is always passed through <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Encoded value is included in the correct parameter order
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Integration correctness</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker Save script correctly decodes the encoded text area values before storing (if that is your standard)
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Common Failure Modes and Fixes</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.1 Text area appears empty even though record has text</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The value was injected into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">value=&#x27;&#x27;</code> attribute instead of inner text</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;textarea&gt;VALUE&lt;/textarea&gt;</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.2 Text area breaks the page HTML</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Injected text contains raw HTML-like characters (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&gt;</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&amp;</code>)</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Escape the text before injection, or ensure your page builder does escaping.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is not shown in your sample, so the AI Agent needs your standard:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Do you HTML-escape text values before injecting?</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.3 Save script receives partial address only</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">address contains <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Always <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent</code> before joining parameters</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.4 Saved address contains <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">%0A</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">%2C</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">You encoded but never decoded in FileMaker</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Decode in FileMaker before saving into address field</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.5 Line breaks vanish after save</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker decoding or normalization removed returns</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure decode restores actual returns</li>
<li style="margin-bottom:8px;padding-left:8px;">Ensure you store in a text field that supports returns</li>
<li style="margin-bottom:8px;padding-left:8px;">Ensure you do not strip returns during parsing</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Clarifications Needed (Ambiguities the AI Agent Cannot Guess)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These must be clarified to make the AI Agent implementation perfect:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Decoding standard in FileMaker</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">After JS encodes textarea values, what exact method do you use in FileMaker to decode them?</li>
<li style="margin-bottom:4px;">Provide the function name or script step pattern.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">HTML escaping standard</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you escape user text before injecting into HTML?</li>
<li style="margin-bottom:4px;">If yes, what is the standard function used in your system?</li>
<li style="margin-bottom:4px;">Without escaping, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&amp;</code> can break HTML.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Line break storage</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">When you store addresses in FileMaker, do you store:</li>
<li style="margin-bottom:4px;">real returns</li>
<li style="margin-bottom:4px;">or markers that later need conversion</li>
<li style="margin-bottom:4px;">Confirm what <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ConvertLineBreakMarkersToReturns</code> expects.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Maximum length and validation</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you limit textarea length for certain fields?</li>
<li style="margin-bottom:4px;">Do you sanitize content (remove scripts, etc.)?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Multi-language and unicode</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Should the system preserve all unicode characters exactly?</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Implementation Standard (What the AI Agent Must Produce)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to implement a textarea field in CauferoAppStarter, the AI Agent must produce:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;textarea&gt;</code> with:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">stable ID</li>
<li style="margin-bottom:4px;">matching label</li>
<li style="margin-bottom:4px;">placeholder (recommended)</li>
<li style="margin-bottom:4px;">preloaded inner text value from FileMaker</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker preprocessing:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">normalize line breaks before injection (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ConvertLineBreakMarkersToReturns(...)</code>)</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save integration:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">read <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.value</code></li>
<li style="margin-bottom:4px;">apply <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent</code></li>
<li style="margin-bottom:4px;">include in parameter list in correct order</li>
<li style="margin-bottom:4px;">FileMaker side decodes before saving (if that is your standard)</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-richtext">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">🖊️</span>
                <span>Text Editors (Rich Text Fields) in WebViewer Pages</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Text Editors (Rich Text Fields) in WebViewer Pages</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Scope: This document is only for text fields implemented as a rich text editor inside WebViewer pages (HTML + CSS + JavaScript).  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Non-scope: number fields, dropdowns, date pickers, and other inputs (covered in separate docs).</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1. Purpose</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A “Text Editor” in CauferoAppStarter is a rich-text input that lets the user type and format content (bold, italics, lists, links, alignment, highlight, etc.) inside a WebViewer page, then save the formatted HTML back into FileMaker.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This editor is used when:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">You want more than plain text (formatting, lists, links).</li>
<li style="margin-bottom:8px;padding-left:8px;">You want to store the content as HTML in a FileMaker text field.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2. High-Level Architecture</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.1 Data Flow (Round Trip)</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">FileMaker loads record</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">FileMaker reads the stored value for a rich text field (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Businesses::Notes</code>).</li>
<li style="margin-bottom:4px;">The stored value is treated as <strong style="font-weight:600;color:#0f172a;">HTML</strong>.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">FileMaker generates HTML page</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Page HTML includes the editor markup:</li>
<li style="margin-bottom:4px;">Toolbar buttons</li>
<li style="margin-bottom:4px;">A <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;div id=&quot;editor&quot; contenteditable=&quot;true&quot;&gt;...&lt;/div&gt;</code></li>
<li style="margin-bottom:4px;">The editor’s initial value is inserted directly inside the editor container:</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;&lt;div id=\&quot;editor\&quot; ...&gt;&quot; &amp; $Notes &amp; &quot;&lt;/div&gt;&quot;</code></li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">User edits and formats in the WebViewer</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Buttons trigger formatting commands using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.execCommand(...)</code>.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">User clicks Save</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">JavaScript collects editor HTML via:</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.getElementById(&#x27;editor&#x27;).innerHTML</code></li>
<li style="margin-bottom:4px;">JavaScript encodes the content and sends it to FileMaker using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript(...)</code>.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">FileMaker Save script receives the HTML</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">FileMaker decodes and normalizes the value.</li>
<li style="margin-bottom:4px;">FileMaker stores the HTML into the correct field.</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3. Implementation Components</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A Text Editor implementation has 4 parts:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">CSS styles</strong> (toolbar and editor area)
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">HTML markup</strong> (toolbar + contenteditable editor)
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">JavaScript logic</strong> (formatting commands, selection restore, link handling, toolbar state)
</li>
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Save pipeline</strong> (JS encode + FileMaker decode + store)
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample code shows all four.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4. Editor UI and Features</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Supported Formatting Controls (Sample)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Toolbar buttons and inputs included in the sample:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Bold</li>
<li style="margin-bottom:8px;padding-left:8px;">Italic</li>
<li style="margin-bottom:8px;padding-left:8px;">Underline</li>
<li style="margin-bottom:8px;padding-left:8px;">Strikethrough</li>
<li style="margin-bottom:8px;padding-left:8px;">Align left / center / right</li>
<li style="margin-bottom:8px;padding-left:8px;">Ordered list / unordered list</li>
<li style="margin-bottom:8px;padding-left:8px;">Indent / outdent (also via Tab handling)</li>
<li style="margin-bottom:8px;padding-left:8px;">Insert link (prompts for URL)</li>
<li style="margin-bottom:8px;padding-left:8px;">Text color</li>
<li style="margin-bottom:8px;padding-left:8px;">Highlight color</li>
<li style="margin-bottom:8px;padding-left:8px;">Insert code tag (wrap prompt result in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;code&gt;...&lt;/code&gt;</code>)</li>
<li style="margin-bottom:8px;padding-left:8px;">Insert blockquote</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These map to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.execCommand</code> commands like:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">bold</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">italic</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">underline</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">strikethrough</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">justifyLeft</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">justifyCenter</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">justifyRight</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">insertOrderedList</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">insertUnorderedList</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">indent</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">outdent</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">createLink</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">foreColor</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">hiliteColor</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">insertHTML</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">formatBlock</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5. FileMaker-Side Preparation</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 Read the Field Value</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your FileMaker script typically loads the field using SQL or normal fields, then assigns it to a variable like <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Notes</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In the sample, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Notes</code> is read from SQL:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Notes&quot;</code> is selected as column 29 in the first SQL.</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Notes</code> is later prepared for safe insertion into the HTML page.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Decode Placeholder Tokens (If Used)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample shows a decode step that replaces placeholder tokens with real characters:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">lessthan</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">greaterthan</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">forwardslash</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">/</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">backslash</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">\\</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">hashhhh</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">#</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">singlequote</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&#x27;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">doublequotes</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">sometab</code> → (tab)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">equalto</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">=</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">doublecolon</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">::</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">semicolon</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ampersand</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&amp;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ppippe</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This implies the stored HTML may have been saved with these replacements earlier.</p>
<strong style="font-weight:600;color:#0f172a;">Rule for the AI Agent:</strong>  
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the system uses placeholder tokens for HTML-safe storage, always apply the same decode mapping before inserting HTML into the editor.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.3 Store a Plain-Text Version (Optional)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample also computes:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Notes No Tags = HTMLToTextStripTags ( $Notes )</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is useful for:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Prompt building</li>
<li style="margin-bottom:8px;padding-left:8px;">Search indexing</li>
<li style="margin-bottom:8px;padding-left:8px;">Summaries</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">It is separate from the editor’s stored HTML.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6. CSS Requirements</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 Minimum Required Styles</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample styles define:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.texteditor</code> wrapper</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.toolbar</code> layout and button styling</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">#editor</code> sizing, padding, typography</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.color_icon</code> for color pickers</li>
<li style="margin-bottom:8px;padding-left:8px;">Explicit list styling in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">#editor ol</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">#editor ul</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">#editor li</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Link behavior styling in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">#editor a</code></li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Key requirement:</strong>  
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Make sure lists show bullets and numbering inside the editor. The sample enforces this explicitly.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Example CSS (Template)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">.texteditor {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background: #fff;
}

.toolbar {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  align-items: center;
  background: #f4f4f4;
  border-bottom: 1px solid #ddd;
  padding: 8px;
  gap: 8px;
}

.toolbar button,
.toolbar select,
.toolbar input {
  margin: 0;
  padding: 6px 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
  background: #fff;
  color: #333;
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.toolbar button:hover,
.toolbar select:hover,
.toolbar input:hover {
  background: #e0e0e0;
}

.toolbar button.active {
  background: #d1e7fd;
  color: #0056b3;
  border-color: #0056b3;
}

#editor {
  height: 65vh;
  margin: 0;
  padding: 12px;
  width: 100%;
  background: #fff;
  font-size: 16px;
  line-height: 1.6;
  color: #333;
  resize: none;
  overflow: auto;
}

.color_icon[type=&quot;color&quot;] {
  padding: 0;
  border: none;
  height: 27px;
  width: 30px;
  cursor: pointer;
  border-radius: 4px;
  background: transparent;
}

.color_icon[type=&quot;color&quot;]::-webkit-color-swatch {
  border-radius: 4px;
}

#editor a {
  pointer-events: auto;
  color: #007bff;
  text-decoration: underline;
}

#editor ol {
  list-style-type: decimal;
  padding-left: 20px;
}

#editor ul {
  list-style-type: disc;
  padding-left: 20px;
}

#editor li {
  margin-bottom: 5px;
}</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7. HTML Markup Requirements</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Editor Markup Structure</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The editor is a wrapper that contains:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Toolbar (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.toolbar</code>)</li>
<li style="margin-bottom:8px;padding-left:8px;">Editable content area (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">#editor</code> with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">contenteditable=&quot;true&quot;</code>)</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample uses Font Awesome icons inside toolbar buttons:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;i class=&quot;fas fa-bold&quot;&gt;&lt;/i&gt;</code> etc.</li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Dependency requirement:</strong>  
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Font Awesome must be included in the page header or globally in the WebViewer HTML. If it is missing, buttons still work but icons may not render.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2 Example HTML (Template)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Important: Insert FileMaker value inside the editor container as raw HTML.</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&quot;texteditor&quot;&gt;

  &lt;div class=&quot;toolbar&quot;&gt;
    &lt;button id=&quot;boldBtn&quot; onclick=&quot;toggleFormat(&#x27;bold&#x27;)&quot;&gt;&lt;i class=&quot;fas fa-bold&quot;&gt;&lt;/i&gt;&lt;/button&gt;
    &lt;button id=&quot;italicBtn&quot; onclick=&quot;toggleFormat(&#x27;italic&#x27;)&quot;&gt;&lt;i class=&quot;fas fa-italic&quot;&gt;&lt;/i&gt;&lt;/button&gt;
    &lt;button id=&quot;underlineBtn&quot; onclick=&quot;toggleFormat(&#x27;underline&#x27;)&quot;&gt;&lt;i class=&quot;fas fa-underline&quot;&gt;&lt;/i&gt;&lt;/button&gt;
    &lt;button id=&quot;strikeBtn&quot; onclick=&quot;toggleFormat(&#x27;strikethrough&#x27;)&quot;&gt;&lt;i class=&quot;fas fa-strikethrough&quot;&gt;&lt;/i&gt;&lt;/button&gt;

    &lt;button id=&quot;justifyLeftBtn&quot; onclick=&quot;toggleFormat(&#x27;justifyLeft&#x27;)&quot;&gt;&lt;i class=&quot;fas fa-align-left&quot;&gt;&lt;/i&gt;&lt;/button&gt;
    &lt;button id=&quot;justifyCenterBtn&quot; onclick=&quot;toggleFormat(&#x27;justifyCenter&#x27;)&quot;&gt;&lt;i class=&quot;fas fa-align-center&quot;&gt;&lt;/i&gt;&lt;/button&gt;
    &lt;button id=&quot;justifyRightBtn&quot; onclick=&quot;toggleFormat(&#x27;justifyRight&#x27;)&quot;&gt;&lt;i class=&quot;fas fa-align-right&quot;&gt;&lt;/i&gt;&lt;/button&gt;

    &lt;button id=&quot;orderedListBtn&quot; onclick=&quot;toggleFormat(&#x27;insertOrderedList&#x27;)&quot;&gt;&lt;i class=&quot;fas fa-list-ol&quot;&gt;&lt;/i&gt;&lt;/button&gt;
    &lt;button id=&quot;unorderedListBtn&quot; onclick=&quot;toggleFormat(&#x27;insertUnorderedList&#x27;)&quot;&gt;&lt;i class=&quot;fas fa-list-ul&quot;&gt;&lt;/i&gt;&lt;/button&gt;

    &lt;button id=&quot;indentBtn&quot; onclick=&quot;toggleFormat(&#x27;indent&#x27;)&quot;&gt;&lt;i class=&quot;fas fa-indent&quot;&gt;&lt;/i&gt;&lt;/button&gt;
    &lt;button id=&quot;outdentBtn&quot; onclick=&quot;toggleFormat(&#x27;outdent&#x27;)&quot;&gt;&lt;i class=&quot;fas fa-outdent&quot;&gt;&lt;/i&gt;&lt;/button&gt;

    &lt;button id=&quot;linkBtn&quot; onclick=&quot;addLink()&quot;&gt;&lt;i class=&quot;fas fa-link&quot;&gt;&lt;/i&gt;&lt;/button&gt;

    &lt;input type=&quot;color&quot; class=&quot;color_icon&quot; id=&quot;textColor&quot;
      onchange=&quot;formatText(&#x27;foreColor&#x27;, this.value)&quot; title=&quot;Text Color&quot;&gt;

    &lt;input type=&quot;color&quot; class=&quot;color_icon&quot; id=&quot;highlightColor&quot;
      onchange=&quot;formatText(&#x27;hiliteColor&#x27;, this.value)&quot; title=&quot;Highlight Color&quot;&gt;

    &lt;button id=&quot;codeBtn&quot;
      onclick=&quot;formatText(&#x27;insertHTML&#x27;, &#x27;&lt;code&gt;&#x27;+prompt(&#x27;Enter code:&#x27;)+&#x27;&lt;/code&gt;&#x27;)&quot;&gt;
      &lt;i class=&quot;fas fa-code&quot;&gt;&lt;/i&gt;
    &lt;/button&gt;

    &lt;button id=&quot;quoteBtn&quot; onclick=&quot;formatText(&#x27;formatBlock&#x27;, &#x27;&lt;blockquote&gt;&#x27;)&quot;&gt;
      &lt;i class=&quot;fas fa-quote-right&quot;&gt;&lt;/i&gt;
    &lt;/button&gt;
  &lt;/div&gt;

  &lt;div id=&quot;editor&quot;
       contenteditable=&quot;true&quot;
       onkeydown=&quot;handleListTab(event)&quot;
       onmouseup=&quot;updateToolbar()&quot;&gt;
    &lt;!-- FileMaker inserts existing HTML here --&gt;
  &lt;/div&gt;

&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.3 FileMaker Concatenation Pattern</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample builds <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$TextEditor HTML</code> like this:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">HTML string in a FileMaker calculation</li>
<li style="margin-bottom:8px;padding-left:8px;">Insert <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Notes</code> into the editor div:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">...&gt;&quot; &amp; $Notes &amp; &quot;&lt;/div&gt;</code></p>
<strong style="font-weight:600;color:#0f172a;">Rule for the AI Agent:</strong>  
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Treat the stored editor field as HTML. Insert it raw inside the contenteditable container.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8. JavaScript Requirements</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1 Why Selection Restore Exists</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In contenteditable editors, clicking a toolbar button steals focus from the editor and the selection can collapse.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample fixes this using:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save selection on mouseup</li>
<li style="margin-bottom:8px;padding-left:8px;">Restore selection before executing commands</li>
<li style="margin-bottom:8px;padding-left:8px;">Refocus the editor after formatting</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.2 Core Functions (Sample Behavior)</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">formatText(command, value)</code>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Restores selection</li>
<li style="margin-bottom:4px;">Runs <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.execCommand(command, false, value)</code></li>
<li style="margin-bottom:4px;">Focuses editor</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggleFormat(command)</code>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Restores selection</li>
<li style="margin-bottom:4px;">Runs <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">execCommand</code></li>
<li style="margin-bottom:4px;">Updates toolbar active states</li>
<li style="margin-bottom:4px;">Focuses editor</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">updateToolbar()</code>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.queryCommandState(cmd)</code></li>
<li style="margin-bottom:4px;">Toggles <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.active</code> class on toolbar buttons</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">addLink()</code>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Prompts for URL</li>
<li style="margin-bottom:4px;">Forces <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">https://</code> if missing</li>
<li style="margin-bottom:4px;">Creates link via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">createLink</code></li>
<li style="margin-bottom:4px;">Sets <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">target=&quot;_blank&quot;</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">rel=&quot;noopener noreferrer&quot;</code></li>
<li style="margin-bottom:4px;">Also adds click handler so links open in new window</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">handleListTab(event)</code>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Tab: indent</li>
<li style="margin-bottom:4px;">Shift + Tab: outdent</li>
<li style="margin-bottom:4px;">Backspace at start of list item: outdent</li>
</ul>
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.3 Example JS (Template)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use block comments in code examples.</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">let lastSelection;

document.getElementById(&#x27;editor&#x27;).addEventListener(&#x27;mouseup&#x27;, () =&gt; {
  lastSelection = saveSelection();
});

function formatText(command, value = null) {
  restoreSelection();
  document.execCommand(command, false, value);
  document.getElementById(&#x27;editor&#x27;).focus();
}

function toggleFormat(command) {
  restoreSelection();
  document.execCommand(command, false, null);
  updateToolbar();
  document.getElementById(&#x27;editor&#x27;).focus();
}

function updateToolbar() {
  const commands = [
    { cmd: &#x27;bold&#x27;, buttonId: &#x27;boldBtn&#x27; },
    { cmd: &#x27;italic&#x27;, buttonId: &#x27;italicBtn&#x27; },
    { cmd: &#x27;underline&#x27;, buttonId: &#x27;underlineBtn&#x27; },
    { cmd: &#x27;strikethrough&#x27;, buttonId: &#x27;strikeBtn&#x27; },
    { cmd: &#x27;justifyLeft&#x27;, buttonId: &#x27;justifyLeftBtn&#x27; },
    { cmd: &#x27;justifyCenter&#x27;, buttonId: &#x27;justifyCenterBtn&#x27; },
    { cmd: &#x27;justifyRight&#x27;, buttonId: &#x27;justifyRightBtn&#x27; },
    { cmd: &#x27;insertOrderedList&#x27;, buttonId: &#x27;orderedListBtn&#x27; },
    { cmd: &#x27;insertUnorderedList&#x27;, buttonId: &#x27;unorderedListBtn&#x27; },
    { cmd: &#x27;indent&#x27;, buttonId: &#x27;indentBtn&#x27; },
    { cmd: &#x27;outdent&#x27;, buttonId: &#x27;outdentBtn&#x27; }
  ];

  commands.forEach(({ cmd, buttonId }) =&gt; {
    const isActive = document.queryCommandState(cmd);
    document.getElementById(buttonId).classList.toggle(&#x27;active&#x27;, isActive);
  });
}

function addLink() {
  let url = prompt(&#x27;Enter the URL:&#x27;);
  if (!url) return;

  if (!url.startsWith(&#x27;http://&#x27;) &amp;&amp; !url.startsWith(&#x27;https://&#x27;)) {
    url = &#x27;https://&#x27; + url;
  }

  formatText(&#x27;createLink&#x27;, url);

  const links = document.getElementById(&#x27;editor&#x27;).getElementsByTagName(&#x27;a&#x27;);
  for (let link of links) {
    link.setAttribute(&#x27;target&#x27;, &#x27;_blank&#x27;);
    link.setAttribute(&#x27;rel&#x27;, &#x27;noopener noreferrer&#x27;);
  }
}

function handleListTab(event) {
  if (event.key === &#x27;Tab&#x27;) {
    event.preventDefault();
    if (event.shiftKey) {
      /* Outdent if Shift + Tab */
      document.execCommand(&#x27;outdent&#x27;);
    } else {
      /* Indent if Tab */
      document.execCommand(&#x27;indent&#x27;);
    }
  }

  if (event.key === &#x27;Backspace&#x27;) {
    const selection = window.getSelection();
    if (selection.rangeCount &gt; 0) {
      const range = selection.getRangeAt(0);
      const parent = range.startContainer.parentNode;
      if (parent.tagName === &#x27;LI&#x27; &amp;&amp; range.startOffset === 0) {
        /* Outdent if backspace is pressed at start of list item */
        event.preventDefault();
        document.execCommand(&#x27;outdent&#x27;);
      }
    }
  }
}

function saveSelection() {
  const selection = window.getSelection();
  if (selection.rangeCount &gt; 0) return selection.getRangeAt(0);
  return null;
}

function restoreSelection() {
  const selection = window.getSelection();
  if (lastSelection) {
    selection.removeAllRanges();
    selection.addRange(lastSelection);
  }
}

document.getElementById(&#x27;editor&#x27;).addEventListener(&#x27;click&#x27;, function (event) {
  const target = event.target;
  if (target.tagName === &#x27;A&#x27;) {
    event.preventDefault();
    window.open(target.href, &#x27;_blank&#x27;, &#x27;noopener,noreferrer&#x27;);
  }
});</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9. Saving to FileMaker (Critical)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 Extract Editor HTML</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample does:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">let editor_ = document.getElementById(&#x27;editor&#x27;).innerHTML;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This preserves formatting and tags.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 Prevent Delimiter Collisions</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample replaces pipes before encoding:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">editor_ = editor_.replace(/\|/g, &#x27;ppippe&#x27;);</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This implies the system’s parameter serialization uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> somewhere (common in your SQL parsing and likely in your script parameter encoding).</p>
<strong style="font-weight:600;color:#0f172a;">Rule for the AI Agent:</strong>  
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Whatever delimiter is used to join the parameters, replace it inside editor content before sending to FileMaker.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.3 Encode for Script Parameter Transport</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample then does:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">const editor = encodeURIComponent(editor_);</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This makes the payload safe for transport inside a single script parameter string.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.4 Add to Parameters List</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The editor value is appended to the parameters array.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Later (not shown due to truncation), your code likely:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Joins parameters using a delimiter (often <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> or <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">¶</code>)</li>
<li style="margin-bottom:8px;padding-left:8px;">Calls <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript(&#x27;Save Business&#x27;, joinedParams)</code></li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Rule for the AI Agent:</strong>  
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The editor HTML must be included as a separate parameter, encoded.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.5 FileMaker Save Script Responsibilities</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In the target FileMaker script (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Save Business</code>):</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Read the editor parameter.
</li>
<li style="margin-bottom:8px;padding-left:8px;">URL-decode it.
</li>
<li style="margin-bottom:8px;padding-left:8px;">Reverse delimiter replacements:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ppippe</code> → <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">(If your system uses placeholder tokens) re-encode unsafe characters consistently for storage.
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10. Implementation Checklist (AI Agent)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When the AI Agent implements a text editor in a new page:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.1 Variables (FileMaker script)</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure a variable exists for the field value (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Notes</code>).</li>
<li style="margin-bottom:8px;padding-left:8px;">If placeholder tokens are used in storage, decode them before HTML insertion.</li>
<li style="margin-bottom:8px;padding-left:8px;">Build <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$TextEditor HTML</code>:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Contains toolbar</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Contains <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">#editor</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - Inserts the existing value inside <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">#editor</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.2 CSS</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Add editor CSS into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$styles</code>.</li>
<li style="margin-bottom:8px;padding-left:8px;">Ensure lists render properly.</li>
<li style="margin-bottom:8px;padding-left:8px;">Ensure the editor height fits your page and tab context.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.3 JavaScript</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Inject the editor JS logic into the page scripts bundle.</li>
<li style="margin-bottom:8px;padding-left:8px;">Ensure functions are globally accessible (toolbar uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">onclick=&quot;...&quot;</code>).</li>
<li style="margin-bottom:8px;padding-left:8px;">Ensure selection restore is enabled.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.4 Save Pipeline</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">On Save:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">innerHTML</code> captured</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - delimiter-safe replacements</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">encodeURIComponent</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - included in parameters</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - sent to FileMaker</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.5 FileMaker Save Script</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Decode and store editor HTML into the correct field.</li>
<li style="margin-bottom:8px;padding-left:8px;">Keep the placeholder-token strategy consistent with the rest of the system.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11. Patterns and Naming Conventions</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.1 IDs</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample uses fixed IDs:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">editor</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">boldBtn</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">italicBtn</code>, etc.</li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Rule for the AI Agent:</strong>  
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a page has only one editor, fixed IDs are acceptable.  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If a page will have multiple editors, IDs must be unique and the JS must be refactored to target the correct editor instance.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.2 Reusable Component Strategy (Recommended)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">For future scalability, implement the editor as a reusable component:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Unique editor container id: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">editor_notes</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">editor_description</code>, etc.</li>
<li style="margin-bottom:8px;padding-left:8px;">Pass the editor id into all formatting functions:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggleFormat(editorId, command)</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">formatText(editorId, command, value)</code></p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Store last selection per editor id.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is optional for the current sample, required if you add multiple editors to one page.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12. WebViewer Compatibility Notes</h3>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.execCommand</code> is deprecated in modern browsers, yet it still works widely inside embedded webviews.</li>
<li style="margin-bottom:8px;padding-left:8px;">FileMaker WebViewer (WKWebView on macOS/iOS) generally supports this pattern well for internal tools.</li>
</ul>
<strong style="font-weight:600;color:#0f172a;">Rule for the AI Agent:</strong>  
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Keep this implementation for consistency across CauferoAppStarter until a planned migration to a modern editor engine (like ProseMirror, TipTap, Quill) is approved.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13. Security and Content Hygiene</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Rich text editors can accept pasted HTML.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Minimum hygiene steps:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">In FileMaker save scripts, reject <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;script&gt;</code> tags or strip them.</li>
<li style="margin-bottom:8px;padding-left:8px;">If users paste content from external sites, consider sanitizing HTML to allowed tags:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">b</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">strong</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">i</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">em</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">u</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">s</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ol</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ul</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">li</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">a</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">blockquote</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">code</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">p</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">br</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">div</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">span</code></p>
<strong style="font-weight:600;color:#0f172a;">Rule for the AI Agent:</strong>  
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the page is internal-only and used by trusted staff, keep hygiene minimal. If the page is public-facing or client-facing, sanitize strictly.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">14. Known Ambiguities and Clarifications Needed</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent can implement the editor as shown, yet these items should be clarified to make the round-trip fully deterministic:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">What exactly is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">JSNormalizeTextChain</code></strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">The save script uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">...value&quot; &amp; JSNormalizeTextChain &amp; &quot;;</code></li>
<li style="margin-bottom:4px;">This chain likely replaces characters that break delimiters or script parameters.</li>
<li style="margin-bottom:4px;">Clarification needed: What replacements does it perform, and does it already handle:</li>
<li style="margin-bottom:4px;">quotes</li>
<li style="margin-bottom:4px;">ampersands</li>
<li style="margin-bottom:4px;">less-than / greater-than</li>
<li style="margin-bottom:4px;">pipes</li>
<li style="margin-bottom:4px;">line breaks</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">What delimiter is used to serialize the parameters</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">The editor replaces <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ppippe</code>, which suggests <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> is used as a delimiter somewhere.</li>
<li style="margin-bottom:4px;">Clarification needed: When sending to FileMaker, do you join parameters with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>, with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">¶</code>, or with something else?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">What is the canonical storage format for rich-text fields</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">The load pipeline decodes tokens (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">lessthan</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">doublequotes</code>, etc.), which suggests the stored value is tokenized HTML.</li>
<li style="margin-bottom:4px;">The save pipeline shown only replaces pipes and then URL-encodes.</li>
<li style="margin-bottom:4px;">Clarification needed: On save, do you re-tokenize the HTML into the same placeholders before storing? If yes, where does it happen (JavaScript or FileMaker script)?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Which FileMaker field holds the HTML</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">The sample reads <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Notes&quot;</code> into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Notes</code>.</li>
<li style="margin-bottom:4px;">Clarification needed: Is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Notes&quot;</code> always the HTML field, or do some tables store rich text in a different field naming convention (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Notes HTML</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Notes_RichText</code>)?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Do you want to preserve or strip certain tags</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Example: the code button inserts <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;code&gt;...&lt;/code&gt;</code>.</li>
<li style="margin-bottom:4px;">Clarification needed: Are there tags you want to disallow in saved HTML (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;img&gt;</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;iframe&gt;</code>)?</li>
</ul>
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Until these are clarified, the AI Agent should:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Follow the sample pipeline exactly.</li>
<li style="margin-bottom:8px;padding-left:8px;">Keep delimiter replacement for <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Keep encodeURIComponent</li>
<li style="margin-bottom:8px;padding-left:8px;">Expect FileMaker scripts to finalize the storage normalization.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">15. Minimum “Done” Definition for an AI-Generated Editor</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The text editor feature is considered complete when:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Existing saved HTML loads correctly inside the editor.</li>
<li style="margin-bottom:8px;padding-left:8px;">Toolbar actions apply formatting correctly.</li>
<li style="margin-bottom:8px;padding-left:8px;">Links open in a new tab/window inside the WebViewer context.</li>
<li style="margin-bottom:8px;padding-left:8px;">Ordered and unordered lists display correctly.</li>
<li style="margin-bottom:8px;padding-left:8px;">Save captures HTML and persists it in FileMaker.</li>
<li style="margin-bottom:8px;padding-left:8px;">Reload shows the same formatting.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-fileupload">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">🖼️</span>
                <span>File Upload Fields and Image Display Sections</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">File Upload Fields and Image Display Sections (How They Work and How to Implement Them)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Purpose of this doc  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Train an AI Agent to correctly implement:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 1) A <strong style="font-weight:600;color:#0f172a;">file upload field</strong> (the UI element that looks like a file picker)  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 2) An <strong style="font-weight:600;color:#0f172a;">image display section</strong> (thumbnail or profile image shown on the page)  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 3) A <strong style="font-weight:600;color:#0f172a;">modal image viewer</strong> (click image to enlarge)  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 4) The <strong style="font-weight:600;color:#0f172a;">FileMaker bridging logic</strong> where the browser UI triggers FileMaker scripts to do the real file selection and saving</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation is based on the patterns in your sample page:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">File upload field: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;file&#x27; id=&#x27;materialPhoto&#x27; /&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Image display section: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;img src=&#x27;data:image/png;base64,...&#x27; class=&#x27;summary-image&#x27; /&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">File dialog interception: JS prevents native browser picker and calls FileMaker script</li>
<li style="margin-bottom:8px;padding-left:8px;">Modal: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">openImageModal()</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">closeImageModal()</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) Key Concept: WebViewer Cannot Reliably Own the File System</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In CauferoAppStarter, the WebViewer UI does not own the file system workflow end-to-end.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Instead:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The WebViewer provides the UI surface (file input control for familiarity)</li>
<li style="margin-bottom:8px;padding-left:8px;">JavaScript intercepts the interaction</li>
<li style="margin-bottom:8px;padding-left:8px;">FileMaker does the real work:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - select file</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - read file container</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - store base64</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - update record</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - re-render the page</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This design is intentional and consistent with FileMaker WebViewer realities.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) Components of the System</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.1 File Upload UI Component</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A file upload field is represented in HTML as:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;input type=&#x27;file&#x27; id=&#x27;materialPhoto&#x27; /&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">But in this framework:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">the click is intercepted</li>
<li style="margin-bottom:8px;padding-left:8px;">FileMaker script opens the file picker and handles import</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.2 Image Display Component</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The image is displayed as a normal <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;img&gt;</code> tag whose <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">src</code> is a base64 data URI:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;img src=&#x27;data:image/png;base64,XXXXX&#x27; class=&#x27;summary-image&#x27; /&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.3 Click-to-View Modal</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">An overlay modal is shown when the user clicks the thumbnail.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.4 FileMaker Script Bridge</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JavaScript triggers FileMaker scripts using:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">FileMaker.PerformScript(&#x27;Insert Staff Photo&#x27;);</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) Image Data Pipeline (How the Image Gets Onto the Page)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is the canonical pipeline used in your page:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step A: Fetch stored image base64 from the database</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page uses SQL:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Image ;
Let (
  [
    sql = &quot;Select \&quot;Base64 Image\&quot;
From Images
Where \&quot;Reference\&quot; = ?&quot; ;
    fieldseparator = &quot;xxxxx&quot; ;
    rowseparator = &quot;¶&quot; ;
    id = $$Staff ID ;
    result = ExecuteSQL ( sql ; fieldseparator ; rowseparator ; id )
  ] ;
  result
)
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step B: Use a placeholder when no image exists</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page sets a default base64 placeholder:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Image Placeholder ; Value: &quot;iVBORw0K...RK5CYII=&quot; ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step C: Construct an HTML-safe image source string</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page builds:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Image Source HTML ;
  Value: &quot;data:image/png;base64,&quot; &amp; If ( IsEmpty ( $Image ) ; $Image Placeholder ; $Image )
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Step D: Inject it into HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;img src=&#x27;...&#x27;&gt;</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example from your summary section:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;img src=&#x27;{{IMAGE_SOURCE_HTML}}&#x27; alt=&#x27;Staff Photo&#x27; class=&#x27;summary-image&#x27; /&gt;</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) Implementing the Image Display Section (Summary Card Pattern)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Canonical HTML Pattern</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is the exact structure pattern your page uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;image-container&#x27; onclick=&#x27;openImageModal()&#x27;&gt;
  &lt;img src=&#x27;{{IMAGE_SOURCE_HTML}}&#x27; alt=&#x27;Staff Photo&#x27; class=&#x27;summary-image&#x27; /&gt;
  &lt;i class=&#x27;fas fa-search-plus summary-image-icon&#x27;&gt;&lt;/i&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2 Behaviors this provides</h4>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Shows a thumbnail in a fixed summary section</li>
<li style="margin-bottom:8px;padding-left:8px;">Displays a magnifier icon overlay</li>
<li style="margin-bottom:8px;padding-left:8px;">Clicking the container triggers <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">openImageModal()</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.3 Mandatory class names</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must preserve these class names because the CSS and JS assume them:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">image-container</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">summary-image</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">summary-image-icon</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If you rename classes, update the CSS and JS selectors accordingly.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) Implementing the Modal Viewer</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 Modal HTML Pattern</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;image-modal&#x27; id=&#x27;imageModal&#x27;&gt;
  &lt;span class=&#x27;image-modal-close-btn&#x27; onclick=&#x27;closeImageModal()&#x27;&gt;&amp;times;&lt;/span&gt;
  &lt;img id=&#x27;modalImage&#x27; src=&#x27;&#x27; alt=&#x27;Enlarged Image&#x27;&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Modal JavaScript Pattern</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function openImageModal() {
  const modal = document.getElementById(&#x27;imageModal&#x27;);
  const modalImage = document.getElementById(&#x27;modalImage&#x27;);
  const thumbnail = document.querySelector(&#x27;.summary-image&#x27;);

  modalImage.src = thumbnail.src;
  modal.style.display = &#x27;flex&#x27;;
}

function closeImageModal() {
  const modal = document.getElementById(&#x27;imageModal&#x27;);
  modal.style.display = &#x27;none&#x27;;
}

window.onclick = function (event) {
  const modal = document.getElementById(&#x27;imageModal&#x27;);
  if (event.target === modal) {
    modal.style.display = &#x27;none&#x27;;
  }
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.3 Critical rules</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The thumbnail must be selectable:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-image</code> must exist</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Modal must have:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">container id <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">imageModal</code></li>
<li style="margin-bottom:4px;">image id <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">modalImage</code></li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">The modal display style must match CSS assumptions:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">typically <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">display: none</code> by default</li>
<li style="margin-bottom:4px;">show via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">flex</code></li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Implementing the File Upload Field</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 Canonical HTML Pattern</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page places the upload field in the form:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group form-group-2&#x27;&gt;
  &lt;label for=&#x27;materialPhoto&#x27;&gt;Photo&lt;/label&gt;
  &lt;input type=&#x27;file&#x27; id=&#x27;materialPhoto&#x27; /&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Why it is not used as a normal file input</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In FileMaker WebViewer contexts, letting the browser open a native file dialog can be unreliable or inconsistent depending on:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">platform</li>
<li style="margin-bottom:8px;padding-left:8px;">WebViewer implementation</li>
<li style="margin-bottom:8px;padding-left:8px;">security and sandbox restrictions</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">So your solution:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">intercepts click</li>
<li style="margin-bottom:8px;padding-left:8px;">uses FileMaker script to do the file selection and import</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Intercepting the File Input and Calling FileMaker</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Canonical JavaScript Intercept Pattern</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page does:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">/* Prevent the file dialog from opening by intercepting the &#x27;click&#x27; event */
document.getElementById(&#x27;materialPhoto&#x27;).addEventListener(&#x27;click&#x27;, function(event) {
  /* Prevent the default click behavior (opening the file dialog) */
  event.preventDefault(); 

  /* Trigger FileMaker to handle the file selection */
  FileMaker.PerformScript(&#x27;Insert Staff Photo&#x27;);
});

/* Add an event listener to the file input for the &#x27;change&#x27; event */
document.getElementById(&#x27;materialPhoto&#x27;).addEventListener(&#x27;change&#x27;, function(event) {
  /* Prevent default file handling behavior */
  event.preventDefault(); 

  /* Optional debug */
  alert(&#x27;Change event triggered, but file dialog didn’t open.&#x27;);
});</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2 Core rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In this framework, the file input is a trigger widget, not a real uploader.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Meaning:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">It exists to look like upload UI</li>
<li style="margin-bottom:8px;padding-left:8px;">It exists to give user an obvious entry point</li>
<li style="margin-bottom:8px;padding-left:8px;">The real upload occurs in FileMaker</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.3 Script variable mapping rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Insert Image Script ; Value: &quot;Insert Staff Photo&quot; ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then injects that name into the JS:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">FileMaker.PerformScript(&#x27;&quot; &amp; $Insert Image Script &amp; &quot;&#x27;);</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must always follow this approach:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">store the FM script name in a FileMaker variable</li>
<li style="margin-bottom:8px;padding-left:8px;">inject into JS</li>
<li style="margin-bottom:8px;padding-left:8px;">never hardcode script names deep inside JS unless your standard says otherwise</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) FileMaker Side: What the &quot;Insert Photo&quot; Script Must Do</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This doc describes the contract, not the exact internal script steps (your implementation may differ).</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1 Script contract (must be true)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When JavaScript calls the FM script:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker must prompt user to select an image</li>
<li style="margin-bottom:8px;padding-left:8px;">FileMaker must associate the image with the current entity (example: staff record)</li>
<li style="margin-bottom:8px;padding-left:8px;">FileMaker must store the image in a predictable way</li>
<li style="margin-bottom:8px;padding-left:8px;">FileMaker must refresh the WebViewer page</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.2 Data storage pattern implied by your page</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page fetches from a table called <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Images</code>:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">It selects <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Base64 Image&quot;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">It filters by <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&quot;Reference&quot; = $$Staff ID</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">So the implied contract is:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The Insert Photo script stores:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Images::Reference = $$Staff ID</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Images::Base64 Image = &lt;base64 of selected image&gt;</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If your system uses a different table or reference strategy, the AI Agent needs that clarified.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.3 Refresh rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">After inserting, FileMaker must regenerate the page (or refresh) so the new base64 appears in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Image Source HTML</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Typical approaches:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">re-run the page generation script</li>
<li style="margin-bottom:8px;padding-left:8px;">refresh window / flush caches</li>
<li style="margin-bottom:8px;padding-left:8px;">re-set <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Page</code> and load WebViewer again</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Putting It Together: Minimum End-to-End Implementation</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 FileMaker variables (script names)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Insert Image Script ; Value: &quot;Insert Staff Photo&quot; ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 HTML (upload field + image preview)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group form-group-2&#x27;&gt;
  &lt;label for=&#x27;materialPhoto&#x27;&gt;Photo&lt;/label&gt;
  &lt;input type=&#x27;file&#x27; id=&#x27;materialPhoto&#x27; /&gt;
&lt;/div&gt;

&lt;div class=&#x27;image-container&#x27; onclick=&#x27;openImageModal()&#x27;&gt;
  &lt;img src=&#x27;{{IMAGE_SOURCE_HTML}}&#x27; alt=&#x27;Staff Photo&#x27; class=&#x27;summary-image&#x27; /&gt;
  &lt;i class=&#x27;fas fa-search-plus summary-image-icon&#x27;&gt;&lt;/i&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.3 JS (intercept + modal)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">document.getElementById(&#x27;materialPhoto&#x27;).addEventListener(&#x27;click&#x27;, function(event) {
  event.preventDefault();
  FileMaker.PerformScript(&#x27;Insert Staff Photo&#x27;);
});

function openImageModal() {
  const modal = document.getElementById(&#x27;imageModal&#x27;);
  const modalImage = document.getElementById(&#x27;modalImage&#x27;);
  const thumbnail = document.querySelector(&#x27;.summary-image&#x27;);
  modalImage.src = thumbnail.src;
  modal.style.display = &#x27;flex&#x27;;
}

function closeImageModal() {
  document.getElementById(&#x27;imageModal&#x27;).style.display = &#x27;none&#x27;;
}</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Quality Checklist for the AI Agent</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When implementing file upload + image display, the AI Agent must verify:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Upload trigger</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A file input exists with a stable ID (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">materialPhoto</code>)
</li>
<li style="margin-bottom:8px;padding-left:8px;">A JS click handler intercepts the input and calls a FileMaker script
</li>
<li style="margin-bottom:8px;padding-left:8px;">The FileMaker script name is injected from a FileMaker variable (preferred standard)
</li>
<li style="margin-bottom:8px;padding-left:8px;">The native file dialog does not open
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Display</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The image <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">src</code> is built as a data URI
</li>
<li style="margin-bottom:8px;padding-left:8px;">A placeholder base64 is used when no image exists
</li>
<li style="margin-bottom:8px;padding-left:8px;">The image is visible in the summary section with correct classes
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Modal</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Modal HTML exists (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">imageModal</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">modalImage</code>)
</li>
<li style="margin-bottom:8px;padding-left:8px;">Clicking thumbnail opens modal
</li>
<li style="margin-bottom:8px;padding-left:8px;">Close button and outside click closes modal
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Refresh</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">After inserting photo, FileMaker refreshes page so the new image appears
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Common Failure Modes and Fixes</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.1 Clicking the file input does nothing</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">No click listener attached</li>
<li style="margin-bottom:8px;padding-left:8px;">Wrong element ID in JS</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">document.getElementById(&#x27;materialPhoto&#x27;)</code> matches HTML</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.2 Browser file picker still opens</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">missing <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">event.preventDefault()</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">add <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">event.preventDefault()</code> at top of click handler</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.3 FileMaker script does not run</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">wrong script name</li>
<li style="margin-bottom:8px;padding-left:8px;">script not available in file context</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">ensure <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Insert Image Script</code> is correct</li>
<li style="margin-bottom:8px;padding-left:8px;">ensure script exists and is accessible</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.4 Image never updates after inserting</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Insert script stored the image but page did not refresh</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">re-run page generator and refresh WebViewer</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.5 Modal opens but shows blank image</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.summary-image</code> selector not found</li>
<li style="margin-bottom:8px;padding-left:8px;">modal image ID mismatch</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">ensure thumbnail has class <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">summary-image</code></li>
<li style="margin-bottom:8px;padding-left:8px;">ensure modal image id is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">modalImage</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Clarifications Needed (Ambiguities the AI Agent Cannot Guess)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These must be clarified to make the AI Agent implementation perfect:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Exact FileMaker Insert Photo script behavior</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Does it:</li>
<li style="margin-bottom:4px;">open dialog using Insert Picture / Open File?</li>
<li style="margin-bottom:4px;">store into container first?</li>
<li style="margin-bottom:4px;">then convert to base64 and store in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Images::Base64 Image</code>?</li>
<li style="margin-bottom:4px;">The AI Agent needs the canonical internal approach.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Image formats</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Are you standardizing on PNG only?</li>
<li style="margin-bottom:4px;">Or do you support JPG, JPEG, WEBP?</li>
<li style="margin-bottom:4px;">If multiple formats, how do you store MIME type and build the data URI prefix?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Reference strategy</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">You use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Images::Reference = $$Staff ID</code>.</li>
<li style="margin-bottom:4px;">Is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Reference</code> always the entity ID?</li>
<li style="margin-bottom:4px;">Or do you combine it with type (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">StaffPhoto|&lt;ID&gt;</code>)?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Single image vs multiple images per entity</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Is there one profile photo per staff record?</li>
<li style="margin-bottom:4px;">Or can staff have multiple images?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Security rules</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you validate file size?</li>
<li style="margin-bottom:4px;">Do you validate image type?</li>
<li style="margin-bottom:4px;">Do you compress or resize images before saving?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Where to place the upload UI</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Your page places it in Tab 1 and shows preview in Summary.</li>
<li style="margin-bottom:4px;">Is that always your standard pattern?</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Implementation Standard (What the AI Agent Must Produce)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to implement &quot;Upload Photo + Show Photo&quot; on a page, the AI Agent must produce:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker variables:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Insert Image Script</code></li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Image</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Image Placeholder</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Image Source HTML</code></li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">HTML:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;file&#x27; id=&#x27;materialPhoto&#x27;&gt;</code></li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;img src=&#x27;{{IMAGE_SOURCE_HTML}}&#x27; class=&#x27;summary-image&#x27;&gt;</code></li>
<li style="margin-bottom:4px;">modal markup</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">JavaScript:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">intercept click and call FileMaker script</li>
<li style="margin-bottom:4px;">modal open/close functions</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker contract:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Insert script stores base64 image for the current entity reference</li>
<li style="margin-bottom:4px;">page refreshes after insert</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-combined">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">⚙️</span>
                <span>Combined Fields (Grouped Inputs in One Visual Control)</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Combined Fields (Grouped Inputs in One Visual Control) How They Are Implemented and Used</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Purpose of this doc  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Train an AI Agent to correctly implement <strong style="font-weight:600;color:#0f172a;">combined fields</strong> in CauferoAppStarter WebViewer pages, including:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 1) What a combined field is in this framework  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 2) The HTML structure used to render multiple inputs as one grouped control  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 3) How dropdowns and text inputs are mixed inside the combined control  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 4) How values are preloaded from FileMaker variables  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 5) How values are read and saved back to FileMaker  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 6) Layout rules, IDs, and common failure mode fixes</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation is based on the pattern in your sample page under Tab 1, where <strong style="font-weight:600;color:#0f172a;">Full Name</strong> is implemented as a combined field:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">title</code> (dropdown)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">first_name</code> (text)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">other_names</code> (text)</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">last_name</code> (text)</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The combined control is rendered using:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">combined-inputs-container</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">combined-inputs-dropdown</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">combined-inputs-input</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) What a Combined Field Means in CauferoAppStarter</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A combined field is a UI pattern where multiple related fields are grouped so the user experiences them as one unit.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Full Name: Title + First + Other + Last</li>
<li style="margin-bottom:8px;padding-left:8px;">Address: Street + City + Region + Country (possible future use)</li>
<li style="margin-bottom:8px;padding-left:8px;">Dimensions: Length + Width + Height + Unit (possible future use)</li>
<li style="margin-bottom:8px;padding-left:8px;">Currency Amount: Amount + Currency (possible future use)</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In your framework, combined fields are not a special input type.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">They are standard HTML controls arranged as a single grouped layout.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) Why Combined Fields Exist (UI and Data Reasons)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Combined fields are used when:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">the fields are logically one thing (Full Name)
</li>
<li style="margin-bottom:8px;padding-left:8px;">users should not mentally treat them as separate sections
</li>
<li style="margin-bottom:8px;padding-left:8px;">you want one label for the group, not one label per input
</li>
<li style="margin-bottom:8px;padding-left:8px;">you want a compact layout that looks intentional and modern
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) Canonical Combined Field Pattern (Full Name Example)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.1 HTML structure from the sample page</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page uses this exact structure:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group form-group-2&#x27;&gt;
  &lt;label for=&#x27;size&#x27;&gt;Full Name&lt;/label&gt;

  &lt;div class=&#x27;combined-inputs-container&#x27;&gt;
    &lt;select class=&#x27;combined-inputs-dropdown&#x27; id=&#x27;title&#x27; aria-label=&#x27;Title&#x27; style=&#x27;width:50%&#x27;&gt;
      {{TITLES_HTML}}
    &lt;/select&gt;

    &lt;input class=&#x27;combined-inputs-input&#x27; type=&#x27;text&#x27; id=&#x27;first_name&#x27; placeholder=&#x27;First Name&#x27; aria-label=&#x27;Length&#x27; style=&#x27;width:50%&#x27; value=&#x27;{{FIRST_NAME}}&#x27;&gt;

    &lt;input class=&#x27;combined-inputs-input&#x27; type=&#x27;text&#x27; id=&#x27;other_names&#x27; placeholder=&#x27;Other Names&#x27; aria-label=&#x27;Length&#x27; style=&#x27;width:50%&#x27; value=&#x27;{{OTHER_NAMES}}&#x27;&gt;

    &lt;input class=&#x27;combined-inputs-input&#x27; type=&#x27;text&#x27; id=&#x27;last_name&#x27; placeholder=&#x27;Last Name&#x27; aria-label=&#x27;Length&#x27; style=&#x27;width:50%&#x27; value=&#x27;{{LAST_NAME}}&#x27;&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.2 Combined field components</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A combined field has:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">One wrapper form group
</li>
<li style="margin-bottom:8px;padding-left:8px;">One label (for the whole group)
</li>
<li style="margin-bottom:8px;padding-left:8px;">One <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">combined-inputs-container</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Multiple inputs inside, each with its own ID
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) Mandatory Rules (Non-Negotiable)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Every inner input MUST have a stable <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Even though the UI groups fields, the data model is separate.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Saving depends on input IDs.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example IDs:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">title</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">first_name</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">other_names</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">last_name</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2 Only one label for the combined group</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Do not create separate <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;label&gt;</code> tags for each internal input.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use placeholders and aria-labels instead.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.3 Each internal input MUST have a placeholder or aria-label</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Because there is one label for the group, each internal control must identify itself.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">placeholder=&#x27;First Name&#x27;</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">aria-label=&#x27;Title&#x27;</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.4 Combined fields must be saved as separate values</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Even if the combined UI looks like one field, the save logic treats each piece independently.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) Preloading Combined Field Values (FileMaker Side)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 Values are prepared as separate variables</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your script sets:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Title ; Value: GetValue ( $Link Record As List ; 2 ) ]
Set Variable [ $First Name ; Value: GetValue ( $Link Record As List ; 3 ) ]
Set Variable [ $Other Names ; Value: GetValue ( $Link Record As List ; 5 ) ]
Set Variable [ $Last Name ; Value: GetValue ( $Link Record As List ; 4 ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Dropdown options for title are generated by <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Get Value List</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your script:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ “Get Value List” ; Parameter: &quot;Dropdown|Titles|&quot; &amp; $Title ]
Set Variable [ $Titles HTML ; Value: Get ( ScriptResult ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then injects:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;select id=&#x27;title&#x27;&gt; &quot; &amp; $Titles HTML &amp; &quot; &lt;/select&gt;</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Saving Combined Field Values (JavaScript)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 Canonical save pattern from your page</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your save function reads each internal field separately:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const staff_number = document.getElementById(&#x27;staff_number&#x27;).value;

const title = document.getElementById(&#x27;title&#x27;).value;
const first_name = document.getElementById(&#x27;first_name&#x27;).value;
const other_names = document.getElementById(&#x27;other_names&#x27;).value;
const last_name = document.getElementById(&#x27;last_name&#x27;).value;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then joins parameters:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const parameters = [ staff_number, title, first_name, other_names, last_name, ... ].join(&#x27;|&#x27;);
FileMaker.PerformScript(&#x27;Save Staff&#x27;, parameters);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Encoding rules for combined fields</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In your sample page, the name inputs are not encoded.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is acceptable if:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">names do not contain the delimiter <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
<li style="margin-bottom:8px;padding-left:8px;">you trust the input</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">But safest approach:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">encode everything that could contain delimiter characters</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Recommended safe pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const first_name = encodeURIComponent(document.getElementById(&#x27;first_name&#x27;).value);
const other_names = encodeURIComponent(document.getElementById(&#x27;other_names&#x27;).value);
const last_name = encodeURIComponent(document.getElementById(&#x27;last_name&#x27;).value);</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If your system has a strict standard for what must be encoded, clarify it.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Layout and Styling Rules</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Grid container placement</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your combined field sits in:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">form-grid1</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">and the internal inputs align in a grouped row/stack based on CSS.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example wrapper:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-grid1&#x27;&gt;
  &lt;div class=&#x27;form-group form-group-2&#x27;&gt;
    ...
  &lt;/div&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.2 CSS contract (assumed)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The combined control relies on CSS classes:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.combined-inputs-container</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.combined-inputs-dropdown</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.combined-inputs-input</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must assume:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">these classes already exist in your CSS scripts (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">🖌️ Use Details CSS</code> / <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">🖌️ Use Dashboard CSS</code>)</li>
<li style="margin-bottom:8px;padding-left:8px;">they are designed to create a unified visual group (shared border radius, spacing, background, etc.)</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If these classes vary by theme, the agent should not override them unless required.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.3 Width usage</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your sample uses inline <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">style=&#x27;width:50%&#x27;</code> on each input.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This suggests:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">you intentionally enforce sizes at the field level</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Rule for the AI Agent:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">match the local pattern of width control (inline style) when adding new combined fields to existing pages.</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If you later standardize widths purely in CSS, update this rule.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Combined Fields With Mixed Control Types</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A combined field can include:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">dropdown + text inputs (your Full Name example)</li>
<li style="margin-bottom:8px;padding-left:8px;">text + datepicker</li>
<li style="margin-bottom:8px;padding-left:8px;">number + unit dropdown</li>
<li style="margin-bottom:8px;padding-left:8px;">prefix + main value + suffix</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1 Rules for mixing types</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Each internal control must have:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">stable ID</li>
<li style="margin-bottom:4px;">placeholder or aria-label</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Special controls keep their own scripts:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">datepicker: must still be listed in dateFields initialization</li>
<li style="margin-bottom:4px;">dropdown: must still be populated via Mode A or Mode B</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">The combined control does not change how each input is wired, only how it is laid out
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Copy-Paste Templates</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 Template A: Dropdown + 2 text inputs</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group form-group-2&#x27;&gt;
  &lt;label&gt;Group Label&lt;/label&gt;

  &lt;div class=&#x27;combined-inputs-container&#x27;&gt;
    &lt;select class=&#x27;combined-inputs-dropdown&#x27; id=&#x27;field_a&#x27; aria-label=&#x27;Field A&#x27; style=&#x27;width:30%&#x27;&gt;
      {{OPTIONS_HTML}}
    &lt;/select&gt;

    &lt;input class=&#x27;combined-inputs-input&#x27; type=&#x27;text&#x27; id=&#x27;field_b&#x27; placeholder=&#x27;Field B&#x27; aria-label=&#x27;Field B&#x27; style=&#x27;width:35%&#x27; value=&#x27;{{FIELD_B}}&#x27;&gt;

    &lt;input class=&#x27;combined-inputs-input&#x27; type=&#x27;text&#x27; id=&#x27;field_c&#x27; placeholder=&#x27;Field C&#x27; aria-label=&#x27;Field C&#x27; style=&#x27;width:35%&#x27; value=&#x27;{{FIELD_C}}&#x27;&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS read example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const field_a = document.getElementById(&#x27;field_a&#x27;).value;
const field_b = document.getElementById(&#x27;field_b&#x27;).value;
const field_c = document.getElementById(&#x27;field_c&#x27;).value;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 Template B: 2 text inputs + datepicker</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group form-group-2&#x27;&gt;
  &lt;label&gt;Group Label&lt;/label&gt;

  &lt;div class=&#x27;combined-inputs-container&#x27;&gt;
    &lt;input class=&#x27;combined-inputs-input&#x27; type=&#x27;text&#x27; id=&#x27;x&#x27; placeholder=&#x27;X&#x27; aria-label=&#x27;X&#x27; style=&#x27;width:35%&#x27; value=&#x27;{{X}}&#x27;&gt;

    &lt;input class=&#x27;combined-inputs-input&#x27; type=&#x27;text&#x27; id=&#x27;y&#x27; placeholder=&#x27;Y&#x27; aria-label=&#x27;Y&#x27; style=&#x27;width:35%&#x27; value=&#x27;{{Y}}&#x27;&gt;

    &lt;div style=&#x27;position: relative; width:30%&#x27;&gt;
      &lt;input class=&#x27;combined-inputs-input&#x27; type=&#x27;text&#x27; id=&#x27;z_date&#x27; aria-label=&#x27;Z Date&#x27; value=&#x27;{{Z_DATE_MYSQL}}&#x27; style=&#x27;width:100%&#x27;&gt;
      &lt;i class=&#x27;fas fa-calendar-alt&#x27; id=&#x27;z_date_icon&#x27; style=&#x27;position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: #666; cursor: pointer;&#x27;&gt;&lt;/i&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS date integration:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">add <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">{ id: &#x27;z_date&#x27;, iconId: &#x27;z_date_icon&#x27; }</code> into dateFields</li>
<li style="margin-bottom:8px;padding-left:8px;">read with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">getMySQLFormattedDate(&#x27;z_date&#x27;)</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Quality Checklist for the AI Agent</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When implementing combined fields, the AI Agent must verify:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Structure</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">One label covers the group
</li>
<li style="margin-bottom:8px;padding-left:8px;">One <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">combined-inputs-container</code> wraps all internal controls
</li>
<li style="margin-bottom:8px;padding-left:8px;">Every internal control has:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">stable ID</li>
<li style="margin-bottom:4px;">placeholder or aria-label</li>
</ul>
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Data</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Each internal control is preloaded correctly:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">text inputs via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">value=&#x27;...&#x27;</code></li>
<li style="margin-bottom:4px;">dropdown via injected <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;option&gt;</code> HTML or JS population</li>
</ul>
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Save</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Each internal control is read separately in JS
</li>
<li style="margin-bottom:8px;padding-left:8px;">Values are included in parameters in correct order
</li>
<li style="margin-bottom:8px;padding-left:8px;">Values are encoded if needed for delimiter safety
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Integration</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Special controls still obey their own required scripts:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">datepicker fields must be registered for initialization</li>
<li style="margin-bottom:4px;">dynamic dropdowns must be populated</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Common Failure Modes and Fixes</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.1 Only the first control saves, others are ignored</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">JS save function reads only one field</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">ensure all internal IDs are read and included in parameter list</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.2 Dropdown inside combined field appears empty</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">forgot to inject <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Options HTML</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">ensure:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;select ...&gt; &quot; &amp; $OptionsHTML &amp; &quot; &lt;/select&gt;</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.3 Combined field looks broken (spacing and borders wrong)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">missing CSS class names or mismatched structure</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">ensure:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - wrapper is exactly <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">combined-inputs-container</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - inner controls use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">combined-inputs-input</code> or <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">combined-inputs-dropdown</code></p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.4 Accessibility confusion</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">multiple inputs with only one label</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">ensure each input has placeholder or aria-label</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Clarifications Needed (Ambiguities the AI Agent Cannot Guess)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">These must be clarified for perfect AI implementation:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Encoding rule</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you want combined field text inputs encoded like textareas, or only certain fields?</li>
<li style="margin-bottom:4px;">Your sample does not encode name fields, but encoding is safer.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Required vs optional segments</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">In Full Name:</li>
<li style="margin-bottom:4px;">is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">title</code> required?</li>
<li style="margin-bottom:4px;">are <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">other_names</code> optional?</li>
<li style="margin-bottom:4px;">The AI Agent needs validation rules.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Width standard</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Your sample uses inline widths (50% each).</li>
<li style="margin-bottom:4px;">Is this required always, or can the agent rely on CSS only?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">CSS class contract</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Are <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.combined-inputs-*</code> classes guaranteed across all themes?</li>
<li style="margin-bottom:4px;">If not, what is the fallback pattern?</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Implementation Standard (What the AI Agent Must Produce)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to implement a combined field in CauferoAppStarter, the AI Agent must produce:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A wrapper form group with one label
</li>
<li style="margin-bottom:8px;padding-left:8px;">A <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">combined-inputs-container</code> holding multiple inputs
</li>
<li style="margin-bottom:8px;padding-left:8px;">Each internal input:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">has stable ID</li>
<li style="margin-bottom:4px;">has placeholder or aria-label</li>
<li style="margin-bottom:4px;">is preloaded correctly from FileMaker variables</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Save logic reads and saves each component separately
</li>
<li style="margin-bottom:8px;padding-left:8px;">Any special controls inside the combined group still obey their own initialization rules
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-buttons">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">🔘</span>
                <span>Buttons — How They Are Implemented and Used</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Buttons and How They Are Implemented and Used</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Purpose of this doc  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Train an AI Agent to correctly implement <strong style="font-weight:600;color:#0f172a;">buttons</strong> in CauferoAppStarter WebViewer pages, including:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 1) Button categories used in the framework  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 2) The HTML patterns and class contracts for each category  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 3) How buttons call JavaScript functions  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 4) How JavaScript functions call FileMaker scripts with <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript</code>  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 5) How parameters are built, encoded, and delimited  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 6) How conditional buttons are shown or hidden based on FileMaker variables  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 7) Common pitfalls and correct fixes</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation is based on the patterns in your sample page, which uses buttons for:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save</li>
<li style="margin-bottom:8px;padding-left:8px;">Cancel</li>
<li style="margin-bottom:8px;padding-left:8px;">Print Staff ID Card</li>
<li style="margin-bottom:8px;padding-left:8px;">Show Attendance Records</li>
<li style="margin-bottom:8px;padding-left:8px;">Grant System Access</li>
<li style="margin-bottom:8px;padding-left:8px;">Segmented control buttons (covered in a separate doc)</li>
<li style="margin-bottom:8px;padding-left:8px;">Summary image modal click (clickable container behaves like a button)</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) What a Button Means in CauferoAppStarter</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A button is any clickable UI element that triggers an action:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save record</li>
<li style="margin-bottom:8px;padding-left:8px;">Navigate back to list page</li>
<li style="margin-bottom:8px;padding-left:8px;">Open a modal page</li>
<li style="margin-bottom:8px;padding-left:8px;">Load a subtable section</li>
<li style="margin-bottom:8px;padding-left:8px;">Run a server-side calculation</li>
<li style="margin-bottom:8px;padding-left:8px;">Print</li>
<li style="margin-bottom:8px;padding-left:8px;">Grant access</li>
<li style="margin-bottom:8px;padding-left:8px;">View record details</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In this framework, buttons are implemented as:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;button&gt;</code> elements styled using theme CSS classes</li>
<li style="margin-bottom:8px;padding-left:8px;">Each button calls a JavaScript function via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">onclick=&quot;...&quot;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">JavaScript then calls FileMaker scripts using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript(scriptName, parameters)</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) Button Categories in the Framework</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must recognize and implement these categories:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Primary action buttons</strong>  
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   Examples: Save, Submit, Create, Confirm</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Secondary action buttons</strong>  
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   Examples: Cancel, Back, Close, Reset</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Context buttons</strong>  
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   Examples: Print ID, Show Records, Refresh Metrics</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Conditional buttons</strong>  
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   Buttons that appear only when a condition is true  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   Example: &quot;Give access&quot; appears only when <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Username</code> is empty</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Icon buttons</strong>  
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   Buttons with Font Awesome icons for quick recognition</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Non-button clickable elements</strong>  
</li>
</ol>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   Containers or images that act like buttons  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   Example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.image-container</code> clickable to open image modal</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) Core Rules (Non-Negotiable)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.1 Buttons do not call FileMaker scripts directly</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Buttons call JavaScript functions.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JavaScript functions call FileMaker scripts.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This creates a consistent architecture:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">UI layer: HTML</li>
<li style="margin-bottom:8px;padding-left:8px;">orchestration layer: JavaScript</li>
<li style="margin-bottom:8px;padding-left:8px;">server/data layer: FileMaker scripts</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.2 Button actions must be declared in variables (FileMaker side)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Script names are set as variables so the page generator can swap them easily.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example from your script:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Save Record Script ; Value: &quot;Save Staff&quot; ]
Set Variable [ $Cancel Script ; Value: &quot;+++ Staff List Page&quot; ]
Set Variable [ $Grant System Access Script ; Value: &quot;Grant System Access To Staff&quot; ]
Set Variable [ $Get Attendance FM Script ; Value: &quot;Get Staff Attendance&quot; ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.3 Button click must be deterministic</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must ensure every button:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">has a clear label</li>
<li style="margin-bottom:8px;padding-left:8px;">calls a defined function</li>
<li style="margin-bottom:8px;padding-left:8px;">function exists in the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Scripts</code> bundle</li>
<li style="margin-bottom:8px;padding-left:8px;">function calls the correct FileMaker script name variable</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.4 Parameter delimiter is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your system uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const parameters = [ a, b, c ].join(&#x27;|&#x27;);</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Therefore:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">never allow raw user input containing <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
<li style="margin-bottom:8px;padding-left:8px;">encode values that can contain special characters</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) HTML Implementation Patterns</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Standard button with CSS class</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your summary section:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;button class=&#x27;save-button&#x27; onclick=&quot;saveItemInfo()&quot;&gt;
  &lt;i class=&#x27;fas fa-save&#x27;&gt;&lt;/i&gt; Save
&lt;/button&gt;

&lt;button class=&#x27;cancel-button&#x27; onclick=&quot;cancelAction()&quot;&gt;
  &lt;i class=&#x27;fas fa-times-circle&#x27;&gt;&lt;/i&gt; Cancel
&lt;/button&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Key components:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">class</code>: determines styling based on theme CSS</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">onclick</code>: calls JS function</li>
<li style="margin-bottom:8px;padding-left:8px;">icon: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;i class=&#x27;...&#x27;&gt;&lt;/i&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">label text</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2 Full-width primary button (context action)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;button class=&#x27;button_blue&#x27; style=&#x27;width: 100%; justify-content: center;&#x27; onclick=&quot;printStaffIDCard()&quot;&gt;
  &lt;i class=&#x27;fa-solid fa-file&#x27;&gt;&lt;/i&gt; Print Staff ID Card
&lt;/button&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.3 Small context button (inline action)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From attendance section:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;button class=&#x27;button_blue_&#x27; style=&#x27;width: auto&#x27; onclick=&quot;getAttendance()&quot;&gt;
  &lt;i class=&#x27;fas fa-plus&#x27;&gt;&lt;/i&gt; Show Records
&lt;/button&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.4 Conditional button</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From Tab 9 (Access), the button appears only if <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Username</code> is empty:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;button class=&#x27;button_green_&#x27; style=&#x27;width: auto; position: relative;&#x27; onclick=&quot;grantSystemAccess()&quot;&gt;
  &lt;i class=&#x27;fas fa-plus&#x27;&gt;&lt;/i&gt; Give him/her access to {{APP_NAME}}
&lt;/button&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is injected conditionally using FileMaker <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">If ( IsEmpty ( $Username ) ; ... ; ... )</code>.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) JavaScript Implementation Patterns</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 Navigation or cancel action button</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function cancelAction() {
  FileMaker.PerformScript(&#x27;+++ Staff List Page&#x27;);
}</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In the script generator, the name is injected using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Cancel Script</code>:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Cancel Action Script ;
&quot;function cancelAction() {
  FileMaker.PerformScript(&#x27;&quot; &amp; $Cancel Script &amp; &quot;&#x27;);
}&quot;
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Save action button (collect inputs and send to FileMaker)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function saveItemInfo() {

  const staff_number = document.getElementById(&#x27;staff_number&#x27;).value;
  const title = document.getElementById(&#x27;title&#x27;).value;
  const first_name = document.getElementById(&#x27;first_name&#x27;).value;

  const genderButton = document.querySelector(&#x27;.segmented-control button.active&#x27;);
  const gender = genderButton.textContent.trim();

  const dob = getMySQLFormattedDate(&#x27;dob&#x27;);

  const residential_address = encodeURIComponent(document.getElementById(&#x27;residential_address&#x27;).value);

  const parameters = [
    staff_number,
    title,
    first_name,
    gender,
    dob,
    residential_address
  ].join(&#x27;|&#x27;);

  FileMaker.PerformScript(&#x27;Save Staff&#x27;, parameters);
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.3 Button that runs a FileMaker action with computed parameters</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page (Grant Access):</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function grantSystemAccess() {

  const staff_number = encodeURIComponent(document.getElementById(&#x27;staff_number&#x27;).value);
  const first_name = encodeURIComponent(document.getElementById(&#x27;first_name&#x27;).value);
  const last_name = encodeURIComponent(document.getElementById(&#x27;last_name&#x27;).value);
  const email = encodeURIComponent(document.getElementById(&#x27;email&#x27;).value);

  const parameters = [ staff_number, first_name, last_name, email ].join(&#x27;|&#x27;);

  FileMaker.PerformScript(&#x27;Grant System Access To Staff&#x27;, parameters);
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.4 Button that refreshes data using datepicker helper</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">From your page (Attendance):</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function getAttendance() {

  const from_date = getMySQLFormattedDate(&#x27;from_date&#x27;);
  const to_date = getMySQLFormattedDate(&#x27;to_date&#x27;);

  const parameters = [ from_date, to_date ].join(&#x27;|&#x27;);

  FileMaker.PerformScript(&#x27;Get Staff Attendance&#x27;, parameters);
}</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Parameter Packaging Rules</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> join for multi-parameter payloads</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Standard:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const parameters = [ p1, p2, p3 ].join(&#x27;|&#x27;);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Encoding policy (critical)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Encode any value that can include:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">line breaks</li>
<li style="margin-bottom:8px;padding-left:8px;">commas</li>
<li style="margin-bottom:8px;padding-left:8px;">special characters</li>
<li style="margin-bottom:8px;padding-left:8px;">spaces (optional)</li>
<li style="margin-bottom:8px;padding-left:8px;">or delimiter <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> (must)</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your sample encodes:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">textareas: residential_address, postal_address</li>
<li style="margin-bottom:8px;padding-left:8px;">role: role</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your sample does not encode many text fields like names.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This is workable but unsafe if users can type <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Recommended framework rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">encode every user-entered string except numeric fields, unless you have a strict reason not to</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Safe pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const safe = encodeURIComponent(document.getElementById(&#x27;field&#x27;).value);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.3 Decode policy in FileMaker</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If you encode in JS, FileMaker must decode.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If your framework has a dedicated decode function, the AI Agent must use it.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If not, you must define the canonical decode method.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Script Name Injection Pattern (FileMaker Side)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Buttons do not hardcode script names.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Script names are set in variables and injected into JS.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Get Attendance FM Script ; Value: &quot;Get Staff Attendance&quot; ]

Set Variable [ $Get Attendance Script ;
&quot;function getAttendance() {
  const from_date = getMySQLFormattedDate(&#x27;from_date&#x27;);
  const to_date = getMySQLFormattedDate(&#x27;to_date&#x27;);
  const parameters = [ from_date, to_date ].join(&#x27;|&#x27;);
  FileMaker.PerformScript(&#x27;&quot; &amp; $Get Attendance FM Script &amp; &quot;&#x27;, parameters);
}&quot;
]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Every button that triggers a FileMaker script must:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">define a <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$... Script</code> variable containing the script name
</li>
<li style="margin-bottom:8px;padding-left:8px;">define a <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$... JS</code> variable containing the JavaScript function
</li>
<li style="margin-bottom:8px;padding-left:8px;">include that JS in the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Scripts</code> bundle
</li>
<li style="margin-bottom:8px;padding-left:8px;">reference the JS function in HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">onclick</code>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Conditional Buttons (Display Logic)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1 FileMaker decides if a button should exist</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In Tab 9:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">if <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Username</code> is empty: show &quot;Give access&quot; button</li>
<li style="margin-bottom:8px;padding-left:8px;">else: show user details and role dropdown</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">If (
  IsEmpty ( $Username ) ;
  &quot;&lt;button ... onclick=&#x27;grantSystemAccess()&#x27;&gt;...&lt;/button&gt;&quot; ;
  &quot;&lt;div&gt;... user details ...&lt;/div&gt;&quot;
)</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Conditional buttons should be controlled by FileMaker page generation, not by JS hiding.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This prevents hidden actions from being accidentally triggered.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Button Placement Patterns Used in Pages</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.1 Summary section action buttons</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your summary section uses a <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.button-container</code> with Save and Cancel.</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;button-container&#x27;&gt;
  &lt;button class=&#x27;save-button&#x27; onclick=&quot;saveItemInfo()&quot;&gt;&lt;i class=&#x27;fas fa-save&#x27;&gt;&lt;/i&gt; Save&lt;/button&gt;
  &lt;button class=&#x27;cancel-button&#x27; onclick=&quot;cancelAction()&quot;&gt;&lt;i class=&#x27;fas fa-times-circle&#x27;&gt;&lt;/i&gt; Cancel&lt;/button&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">9.2 Context button inside a form grid row</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Attendance tab shows &quot;Show Records&quot; aligned with the date filters.</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label for=&#x27;gps&#x27;&gt; . &lt;/label&gt;
  &lt;button class=&#x27;button_blue_&#x27; style=&#x27;width: auto&#x27; onclick=&quot;getAttendance()&quot;&gt;
    &lt;i class=&#x27;fas fa-plus&#x27;&gt;&lt;/i&gt; Show Records
  &lt;/button&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use an empty label placeholder where needed to keep grid alignment consistent.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Non-Button Clickable Elements (Button Behavior Without `&lt;button&gt;`)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your summary photo uses a clickable container:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;image-container&#x27; onclick=&#x27;openImageModal()&#x27;&gt;
  &lt;img src=&#x27;...&#x27; alt=&#x27;Staff Photo&#x27; class=&#x27;summary-image&#x27; /&gt;
  &lt;i class=&#x27;fas fa-search-plus summary-image-icon&#x27;&gt;&lt;/i&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Any clickable container must still call a JS function</li>
<li style="margin-bottom:8px;padding-left:8px;">Keep the same architecture: HTML event triggers JS function</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Copy-Paste Templates</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.1 Template A: Primary Save button</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;button class=&#x27;save-button&#x27; onclick=&quot;saveItemInfo()&quot;&gt;
  &lt;i class=&#x27;fas fa-save&#x27;&gt;&lt;/i&gt; Save
&lt;/button&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.2 Template B: Secondary Cancel button</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;button class=&#x27;cancel-button&#x27; onclick=&quot;cancelAction()&quot;&gt;
  &lt;i class=&#x27;fas fa-times-circle&#x27;&gt;&lt;/i&gt; Cancel
&lt;/button&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.3 Template C: Context button that calls FileMaker script with params</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;button class=&#x27;button_blue_&#x27; style=&#x27;width:auto&#x27; onclick=&quot;doActionX()&quot;&gt;
  &lt;i class=&#x27;fas fa-play&#x27;&gt;&lt;/i&gt; Run Action
&lt;/button&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function doActionX() {
  const a = encodeURIComponent(document.getElementById(&#x27;a&#x27;).value);
  const b = encodeURIComponent(document.getElementById(&#x27;b&#x27;).value);
  const parameters = [ a, b ].join(&#x27;|&#x27;);
  FileMaker.PerformScript(&#x27;{{FM_SCRIPT_NAME}}&#x27;, parameters);
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.4 Template D: Conditional button block (FileMaker)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $HTML ;
If (
  {{condition}} ;
  &quot;&lt;button class=&#x27;button_green_&#x27; onclick=\&quot;runSpecialAction()\&quot;&gt;&lt;i class=&#x27;fas fa-plus&#x27;&gt;&lt;/i&gt; Do Special Thing&lt;/button&gt;&quot; ;
  &quot;&quot;
)
]</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Quality Checklist for the AI Agent</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When implementing buttons, the AI Agent must verify:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">HTML</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">button has correct class for style
</li>
<li style="margin-bottom:8px;padding-left:8px;">button text describes action clearly
</li>
<li style="margin-bottom:8px;padding-left:8px;">button uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">onclick=&quot;functionName()&quot;</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">icons use Font Awesome classes already loaded on the page
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">JS</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">function exists in <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Scripts</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">function builds params using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code> delimiter
</li>
<li style="margin-bottom:8px;padding-left:8px;">values are encoded when needed
</li>
<li style="margin-bottom:8px;padding-left:8px;">function calls <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript(scriptName, params)</code>
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">FileMaker</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">script name is stored in a <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$... Script</code> variable
</li>
<li style="margin-bottom:8px;padding-left:8px;">HTML and JS strings inject that variable correctly
</li>
<li style="margin-bottom:8px;padding-left:8px;">conditional button logic is generated by FileMaker when required
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Common Failure Modes and Fixes</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.1 Button does nothing on click</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">JS function name mismatch between HTML and JS</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">ensure <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">onclick=&quot;saveItemInfo()&quot;</code> matches <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">function saveItemInfo() { ... }</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.2 FileMaker script does not run</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">wrong script name injected</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">confirm <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Save Record Script</code> contains the exact script name</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.3 Parameters arrive broken in FileMaker</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">user input contains <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">encode values before join</li>
<li style="margin-bottom:8px;padding-left:8px;">decode in FileMaker</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.4 Page loads but JS errors stop all buttons</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">one script block has syntax error</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">ensure every <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$... Script</code> string is valid JS</li>
<li style="margin-bottom:8px;padding-left:8px;">avoid unescaped quotes inside injected strings</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.5 Conditional button appears when it should not</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker condition is wrong</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">confirm the actual variable (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Username</code>) and its empty state</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">14) Clarifications Needed (Ambiguities the AI Agent Cannot Guess)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">To make button implementation perfect, clarify these:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Encoding standard</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Should the AI Agent encode all user-entered values before joining parameters?</li>
<li style="margin-bottom:4px;">If yes, what is the canonical decode method in FileMaker?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Button class standard</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Which classes are official and must be used:</li>
<li style="margin-bottom:4px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">save-button</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">cancel-button</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">button_blue</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">button_blue_</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">button_green_</code></li>
<li style="margin-bottom:4px;">Are there additional button classes for danger actions (delete)?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Disable and loading state</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you want the AI Agent to implement:</li>
<li style="margin-bottom:4px;">disabling buttons during script calls</li>
<li style="margin-bottom:4px;">showing a spinner or &quot;Saving...&quot; state</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Confirm dialogs</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you want confirmation prompts for destructive actions (delete, remove access)?</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">15) Implementation Standard (What the AI Agent Must Produce)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to add a button in CauferoAppStarter, the AI Agent must produce:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">HTML <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;button&gt;</code> with the correct CSS class and icon
</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">onclick</code> calling a named JavaScript function
</li>
<li style="margin-bottom:8px;padding-left:8px;">JavaScript function that:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">collects any required values by id</li>
<li style="margin-bottom:4px;">encodes values where necessary</li>
<li style="margin-bottom:4px;">builds parameters using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">|</code></li>
<li style="margin-bottom:4px;">calls <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">FileMaker.PerformScript</code> with an injected script name variable</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">FileMaker variables:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">one variable holding the target script name</li>
<li style="margin-bottom:4px;">one variable holding the JS function code</li>
</ul>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Conditional logic in FileMaker for buttons that must appear only in specific states
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-segmented">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">🎛️</span>
                <span>Segmented Control Buttons — How They Are Implemented and Used</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Segmented Control Buttons and How They Are Implemented and Used</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Purpose of this doc  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Train an AI Agent to correctly implement <strong style="font-weight:600;color:#0f172a;">segmented control buttons</strong> in CauferoAppStarter WebViewer pages, including:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 1) The HTML structure used to render segmented controls  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 2) How default (preselected) state is applied from FileMaker data  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 3) The JavaScript logic that toggles the active selection  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 4) How the selected value is read and sent back to FileMaker on Save  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 5) Styling rules and class contracts  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; 6) Common failure modes and correct fixes</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This documentation is based on your sample page implementation for <strong style="font-weight:600;color:#0f172a;">Gender</strong>:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">segmented control container: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.segmented-control</code></li>
<li style="margin-bottom:8px;padding-left:8px;">segment buttons: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;button ...&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">selected state: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">class=&#x27;active&#x27;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">click handler: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">onclick=&quot;selectSegmentedControl(this)&quot;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">save logic reads: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.segmented-control button.active</code></li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) What a Segmented Control Means in CauferoAppStarter</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A segmented control is a UI control that looks like a single grouped toggle, but it is actually multiple buttons.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Only one option is selected at a time (single-select).</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use it when:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">options are few (2–5)</li>
<li style="margin-bottom:8px;padding-left:8px;">options are mutually exclusive</li>
<li style="margin-bottom:8px;padding-left:8px;">you want a fast tap/click selection</li>
<li style="margin-bottom:8px;padding-left:8px;">dropdown would feel slow or unnecessary</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Gender: Male / Female</li>
<li style="margin-bottom:8px;padding-left:8px;">Status: Active / Inactive</li>
<li style="margin-bottom:8px;padding-left:8px;">Type: Individual / Company</li>
<li style="margin-bottom:8px;padding-left:8px;">Payment mode: Cash / MoMo / Card</li>
<li style="margin-bottom:8px;padding-left:8px;">Yes/No decisions</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In this framework, segmented controls are implemented using:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">plain HTML buttons</li>
<li style="margin-bottom:8px;padding-left:8px;">a CSS class <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">active</code> for the selected state</li>
<li style="margin-bottom:8px;padding-left:8px;">a shared JS function <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">selectSegmentedControl(button)</code> that sets active state</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) Canonical HTML Pattern</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.1 Basic structure</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A segmented control is composed of:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A wrapper with class <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.segmented-control</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">Multiple <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;button&gt;</code> elements inside the wrapper
</li>
<li style="margin-bottom:8px;padding-left:8px;">Each button has:
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">display text (the value)</li>
<li style="margin-bottom:4px;">onclick handler <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">selectSegmentedControl(this)</code></li>
<li style="margin-bottom:4px;">optional <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">class=&#x27;active&#x27;</code> when preselected</li>
</ul>
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.2 Example from the sample page (Gender)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group form-group-2&#x27;&gt;
  &lt;label for=&#x27;gender&#x27;&gt;Gender&lt;/label&gt;

  &lt;div class=&#x27;segmented-control&#x27;&gt;
    &lt;button class=&#x27;active&#x27; onclick=&quot;selectSegmentedControl(this)&quot;&gt;Male&lt;/button&gt;
    &lt;button onclick=&quot;selectSegmentedControl(this)&quot;&gt;Female&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">2.3 Preselecting the active button (FileMaker-driven)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your sample uses FileMaker string concatenation:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;button &quot; &amp; If ( $Gender = &quot;Male&quot; ; &quot;class=&#x27;active&#x27;&quot; ) &amp; &quot; onclick=&quot;selectSegmentedControl(this)&quot;&gt;Male&lt;/button&gt;
&lt;button &quot; &amp; If ( $Gender = &quot;Female&quot; ; &quot;class=&#x27;active&#x27;&quot; ) &amp; &quot; onclick=&quot;selectSegmentedControl(this)&quot;&gt;Female&lt;/button&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Preselect by injecting <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">class=&#x27;active&#x27;</code> onto exactly one button if a stored value exists.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) FileMaker Preprocessing for Default Selection</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.1 The field value is loaded from the record</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your script sets:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Set Variable [ $Gender ; Value: GetValue ( $Link Record As List ; 7 ) ]</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.2 The HTML uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Gender</code> to determine which button gets <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">active</code></h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">If ( $Gender = &quot;Male&quot; ; &quot;class=&#x27;active&#x27;&quot; )
If ( $Gender = &quot;Female&quot; ; &quot;class=&#x27;active&#x27;&quot; )</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Segmented control defaults must be determined server-side (FileMaker) during page build, not by guessing in JS.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) JavaScript Toggle Logic</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Canonical toggle function from your page</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function selectSegmentedControl(button) {
  const buttons = document.querySelectorAll(&#x27;.segmented-control button&#x27;);
  buttons.forEach(btn =&gt; btn.classList.remove(&#x27;active&#x27;));
  button.classList.add(&#x27;active&#x27;);
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">What this function does</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Finds all segmented control buttons (globally)
</li>
<li style="margin-bottom:8px;padding-left:8px;">Removes active from all
</li>
<li style="margin-bottom:8px;padding-left:8px;">Adds active to the clicked button
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) Important Constraint: Multiple Segmented Controls on One Page</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Problem in current implementation</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your sample uses:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">document.querySelectorAll(&#x27;.segmented-control button&#x27;)</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">This means:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">if there are multiple segmented controls on the page, clicking one will clear the active state in all segmented controls</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Required implementation rule for scalable pages</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must scope the selection to the clicked control only.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 Correct scoped version (recommended standard)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function selectSegmentedControl(button) {
  const container = button.closest(&#x27;.segmented-control&#x27;);
  if (!container) return;

  const buttons = container.querySelectorAll(&#x27;button&#x27;);
  buttons.forEach(btn =&gt; btn.classList.remove(&#x27;active&#x27;));
  button.classList.add(&#x27;active&#x27;);
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the page can ever have more than one segmented control, always use the scoped version.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If you intentionally support only one segmented control per page, keep the global version.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The safer standard is scoped.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Reading the Selected Value (Save and Actions)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.1 Canonical read pattern from your page</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your save function does:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const genderButton = document.querySelector(&#x27;.segmented-control button.active&#x27;);
const gender = genderButton.textContent.trim();</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then includes <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">gender</code> in parameters.</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">6.2 Mandatory robustness rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If no button is selected, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">genderButton</code> will be null and Save will crash.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A safe pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const genderButton = document.querySelector(&#x27;.segmented-control button.active&#x27;);
const gender = genderButton ? genderButton.textContent.trim() : &#x27;&#x27;;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When reading a segmented control value:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">default to empty string if none is selected</li>
<li style="margin-bottom:8px;padding-left:8px;">enforce required logic before calling FileMaker script if necessary</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Passing the Segmented Value to FileMaker</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">7.1 Standard parameter join pattern</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const parameters = [ ..., gender, ... ].join(&#x27;|&#x27;);
FileMaker.PerformScript(&#x27;Save Staff&#x27;, parameters);</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Segment values must be stable strings.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Prefer using values that match your database enums exactly.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">store &quot;Male&quot; / &quot;Female&quot;</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">not:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">store &quot;M&quot; / &quot;F&quot; unless your database expects it</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the displayed text differs from stored value, use a data attribute.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Using Data Attributes (When Display Text Is Not the Stored Value)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If you want button text to be user-friendly but store an internal code:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">data-value</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;segmented-control&#x27; id=&#x27;payment_mode&#x27;&gt;
  &lt;button data-value=&#x27;cash&#x27; onclick=&quot;selectSegmentedControl(this)&quot;&gt;Cash&lt;/button&gt;
  &lt;button data-value=&#x27;momo&#x27; onclick=&quot;selectSegmentedControl(this)&quot;&gt;MoMo&lt;/button&gt;
  &lt;button data-value=&#x27;card&#x27; onclick=&quot;selectSegmentedControl(this)&quot;&gt;Card&lt;/button&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Read value:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const activeBtn = document.querySelector(&#x27;#payment_mode button.active&#x27;);
const payment_mode = activeBtn ? activeBtn.getAttribute(&#x27;data-value&#x27;) : &#x27;&#x27;;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">data-value</code> whenever:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">displayed label is not the stored value</li>
<li style="margin-bottom:8px;padding-left:8px;">you may change button text later without changing database values</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Preselecting by Value With Data Attributes (FileMaker)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">data-value</code>, FileMaker must set the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">active</code> class by comparing the stored value.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;button &quot; &amp; If ( $PaymentMode = &quot;cash&quot; ; &quot;class=&#x27;active&#x27;&quot; ) &amp; &quot; data-value=&#x27;cash&#x27; onclick=&quot;selectSegmentedControl(this)&quot;&gt;Cash&lt;/button&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Rule</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Preselect logic must always reference the stored enum, not display text.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Styling Rules and Class Contract</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.1 Required classes</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Segmented control depends on these:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">wrapper: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.segmented-control</code></li>
<li style="margin-bottom:8px;padding-left:8px;">active state: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.active</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.2 CSS source</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your page pulls CSS via:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ “🖌️ Use Details CSS” ]</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Perform Script [ “🖌️ Use Dashboard CSS” ]</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The AI Agent must:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">reuse <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.segmented-control</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.active</code></li>
<li style="margin-bottom:8px;padding-left:8px;">not invent new class names unless the CSS is extended intentionally</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Copy-Paste Templates</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.1 Template A: Simple 2-option segmented control</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label&gt;Status&lt;/label&gt;
  &lt;div class=&#x27;segmented-control&#x27; id=&#x27;status_control&#x27;&gt;
    &lt;button class=&#x27;active&#x27; onclick=&quot;selectSegmentedControl(this)&quot;&gt;Active&lt;/button&gt;
    &lt;button onclick=&quot;selectSegmentedControl(this)&quot;&gt;Inactive&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function selectSegmentedControl(button) {
  const container = button.closest(&#x27;.segmented-control&#x27;);
  if (!container) return;
  container.querySelectorAll(&#x27;button&#x27;).forEach(btn =&gt; btn.classList.remove(&#x27;active&#x27;));
  button.classList.add(&#x27;active&#x27;);
}</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Read value:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const statusBtn = document.querySelector(&#x27;#status_control button.active&#x27;);
const status = statusBtn ? statusBtn.textContent.trim() : &#x27;&#x27;;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">11.2 Template B: Stored value differs from label</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group-2&#x27;&gt;
  &lt;label&gt;Payment Mode&lt;/label&gt;
  &lt;div class=&#x27;segmented-control&#x27; id=&#x27;payment_mode&#x27;&gt;
    &lt;button data-value=&#x27;cash&#x27; onclick=&quot;selectSegmentedControl(this)&quot;&gt;Cash&lt;/button&gt;
    &lt;button data-value=&#x27;momo&#x27; onclick=&quot;selectSegmentedControl(this)&quot;&gt;MoMo&lt;/button&gt;
    &lt;button data-value=&#x27;card&#x27; onclick=&quot;selectSegmentedControl(this)&quot;&gt;Card&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Read value:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const btn = document.querySelector(&#x27;#payment_mode button.active&#x27;);
const paymentMode = btn ? btn.getAttribute(&#x27;data-value&#x27;) : &#x27;&#x27;;</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">12) Quality Checklist for the AI Agent</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When implementing segmented controls, the AI Agent must verify:</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">HTML</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">wrapper uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.segmented-control</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">buttons are inside wrapper
</li>
<li style="margin-bottom:8px;padding-left:8px;">each button calls <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">selectSegmentedControl(this)</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">exactly one button is preselected when a stored value exists
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">JS</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">toggle function exists
</li>
<li style="margin-bottom:8px;padding-left:8px;">toggle function is scoped (recommended) to avoid multi-control collisions
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Save</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">selected value is read safely (null-safe)
</li>
<li style="margin-bottom:8px;padding-left:8px;">value is included in script parameters in correct order
</li>
</ol>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">Data consistency</h4>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">stored values are stable and match database enums
</li>
<li style="margin-bottom:8px;padding-left:8px;">if using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">data-value</code>, save uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">data-value</code> not text
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">13) Common Failure Modes and Fixes</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.1 Clicking one segmented control breaks another</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">global selector: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.segmented-control button</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">scope to closest container using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">button.closest(&#x27;.segmented-control&#x27;)</code></li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.2 Save crashes because active button is null</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">no preselected value and user never clicked</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">use null-safe read and enforce required selection if needed</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.3 Preselect never works</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">FileMaker comparison value mismatch</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">ensure <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$StoredValue</code> exactly matches the string being compared</li>
<li style="margin-bottom:8px;padding-left:8px;">if using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">data-value</code>, compare against the internal stored enum</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">13.4 Saved value changes when UI label changes</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Cause:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">saving <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">textContent</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Fix:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">data-value</code> for stored value stability</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">14) Clarifications Needed (Ambiguities the AI Agent Cannot Guess)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">To make segmented controls implementation perfect, confirm:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Multiple segmented controls per page</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Is it guaranteed that there will be only one segmented control per page?</li>
<li style="margin-bottom:4px;">If not, the scoped JS version must be the standard.</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Stored value policy</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Do you store the visible label text (Male/Female)?</li>
<li style="margin-bottom:4px;">Or do you want internal values (M/F)?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Validation policy</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Are segmented controls always required?</li>
<li style="margin-bottom:4px;">If required, do you want JS to block Save with an alert?</li>
</ul>
</li>
</ol>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><strong style="font-weight:600;color:#0f172a;">Theme styling</strong>
<ul style="margin-left:24px;margin-top:8px;list-style-type:disc;">
<li style="margin-bottom:4px;">Are <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.segmented-control</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.active</code> styles consistent across all themes?</li>
</ul>
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">15) Implementation Standard (What the AI Agent Must Produce)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When asked to implement segmented control buttons in CauferoAppStarter, the AI Agent must produce:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">A <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.segmented-control</code> container with buttons
</li>
<li style="margin-bottom:8px;padding-left:8px;">Preselect logic injected by FileMaker using <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">class=&#x27;active&#x27;</code>
</li>
<li style="margin-bottom:8px;padding-left:8px;">A JS function <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">selectSegmentedControl(button)</code> that toggles active state
</li>
<li style="margin-bottom:8px;padding-left:8px;">Save logic that reads selected button safely and sends correct stored value to FileMaker
</li>
<li style="margin-bottom:8px;padding-left:8px;">Scoped behavior if multiple segmented controls can exist on the same page
</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-toggles">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">🔀</span>
                <span>Toggle Switches — How They Are Implemented</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Toggle Switches and How They Are Implemented (WebViewer Pages)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Purpose of this doc  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Train an AI Agent to implement a <strong style="font-weight:600;color:#0f172a;">Toggle Switch</strong> UI control in CauferoAppStarter WebViewer pages, using the provided <strong style="font-weight:600;color:#0f172a;">User Details</strong> page script as the reference pattern.  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; This doc covers <strong style="font-weight:600;color:#0f172a;">text states only</strong> (example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Active</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Inactive</code>).  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">&gt; Number fields, dropdown-backed toggles, and other variants will be documented separately.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">1) What a Toggle Switch Means Here (CauferoAppStarter Definition)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A <strong style="font-weight:600;color:#0f172a;">Toggle Switch</strong> is a UI control that:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">lets the user flip between two states (ON/OFF)</li>
<li style="margin-bottom:8px;padding-left:8px;">shows the state as a <strong style="font-weight:600;color:#0f172a;">human-readable text label</strong> beside the switch</li>
<li style="margin-bottom:8px;padding-left:8px;">stores the selected state in a DOM element (the label), then includes it in the Save payload</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In the sample, the switch controls <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Status</code> and displays:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Active</code> when ON</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Inactive</code> when OFF</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Key elements in the sample:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Checkbox input: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;input type=&#x27;checkbox&#x27; id=&#x27;toggle&#x27; onchange=&quot;toggle()&quot;&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">State label: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;span class=&#x27;status&#x27; id=&#x27;status&#x27;&gt;...&lt;/span&gt;</code></li>
<li style="margin-bottom:8px;padding-left:8px;">JS initializes the checkbox based on <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Status</code> (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">preselectToggle</code>)</li>
<li style="margin-bottom:8px;padding-left:8px;">JS updates the label when user changes toggle (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggle()</code>)</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">2) When to Use a Toggle Switch</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Use a toggle switch when:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">there are exactly <strong style="font-weight:600;color:#0f172a;">two</strong> states</li>
<li style="margin-bottom:8px;padding-left:8px;">the UI should be fast and visual</li>
<li style="margin-bottom:8px;padding-left:8px;">the choice is reversible</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Good examples:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Status: Active / Inactive</li>
<li style="margin-bottom:8px;padding-left:8px;">Enabled: Yes / No</li>
<li style="margin-bottom:8px;padding-left:8px;">Access: Allowed / Blocked</li>
<li style="margin-bottom:8px;padding-left:8px;">Notify: On / Off</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">If you have more than 2 states, do not use a toggle. Use segmented control, radio buttons, or dropdown.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">3) Required Pieces (HTML + CSS Contract + JS)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Toggle Switch implementation has 3 layers:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">1) HTML markup  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">2) CSS classes (assumed to exist in shared CSS)  </p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">3) JavaScript (init + change handler)</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.1 HTML (Required Contract)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Reference pattern from the sample:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;toggle-container&#x27;&gt;
  &lt;label class=&#x27;toggle-switch&#x27;&gt;
    &lt;input type=&#x27;checkbox&#x27; id=&#x27;toggle&#x27; onchange=&quot;toggle()&quot;&gt;
    &lt;span class=&#x27;slider&#x27;&gt;&lt;/span&gt;
  &lt;/label&gt;
  &lt;span class=&#x27;status&#x27; id=&#x27;status&#x27;&gt;Active&lt;/span&gt;
&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Where:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggle-container</code> controls layout</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggle-switch</code> wraps the checkbox and the slider UI</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">slider</code> is the styled track/knob element</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">status</code> is the visible text state</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rules:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">type=&#x27;checkbox&#x27;</code>.</li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id=&#x27;toggle&#x27;</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id=&#x27;status&#x27;</code> must match the JavaScript selectors unless you update the JS accordingly.</li>
<li style="margin-bottom:8px;padding-left:8px;">The label must be present because this implementation stores the state as text for saving.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.2 FileMaker Placement Pattern (Inside Form)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In the sample, the toggle sits inside a form-group:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group form-group-2&#x27;&gt;
  &lt;label for=&#x27;status&#x27;&gt;Status&lt;/label&gt;

  &lt;div class=&#x27;toggle-container&#x27;&gt;
    &lt;label class=&#x27;toggle-switch&#x27;&gt;
      &lt;input type=&#x27;checkbox&#x27; id=&#x27;toggle&#x27; onchange=&quot;toggle()&quot;&gt;
      &lt;span class=&#x27;slider&#x27;&gt;&lt;/span&gt;
    &lt;/label&gt;
    &lt;span class=&#x27;status&#x27; id=&#x27;status&#x27;&gt;Active&lt;/span&gt;
  &lt;/div&gt;

&lt;/div&gt;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rules:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The outer <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">&lt;label&gt;</code> is the field label. Keep it separate from the switch label wrapper.</li>
<li style="margin-bottom:8px;padding-left:8px;">Keep the toggle inside the same grid cell as the field it represents.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">3.3 CSS Contract (Shared Styles)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample loads page CSS via:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">Perform Script [ “🖌️ Use Details CSS” ]
Set Variable [ $styles ; Value: Get ( ScriptResult ) ]</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">So the toggle relies on shared CSS defining:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.toggle-container</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.toggle-switch</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.slider</code></li>
<li style="margin-bottom:8px;padding-left:8px;"><code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">.status</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rules:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Do not inline toggle CSS per page unless requested.</li>
<li style="margin-bottom:8px;padding-left:8px;">If toggle looks broken, fix the shared CSS script, not the page script.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">4) JavaScript Behavior (Initialization + User Change)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Toggle requires two behaviors:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">1) Preselect the checkbox based on FileMaker state (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">preselectToggle</code>)</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">2) Update the visible text state on change (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggle()</code>)</p>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.1 Initialization (Preselect)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The goal:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">If <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Status</code> is <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Active</code>, checkbox should be ON and label should show <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Active</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Else checkbox should be OFF and label should show <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Inactive</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Correct reference logic (conceptual):</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function preselectToggle(statusValue) {
  const toggle = document.getElementById(&#x27;toggle&#x27;);
  const status = document.getElementById(&#x27;status&#x27;);

  if (statusValue === &#x27;Active&#x27;) {
    toggle.checked = true;
    status.textContent = &#x27;Active&#x27;;
  } else {
    toggle.checked = false;
    status.textContent = &#x27;Inactive&#x27;;
  }
}

window.onload = function() {
  preselectToggle(&#x27;Active&#x27;); /* injected from FileMaker */
};</pre>
<h5 style="margin-top:24px;margin-bottom:8px;font-weight:600;font-size:16px;color:#0f172a;">Important note about the provided script</h5>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Your pasted code contains a mismatch:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">It sets: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">const item = document.getElementById(&#x27;item&#x27;);</code></li>
<li style="margin-bottom:8px;padding-left:8px;">But the HTML uses: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">id=&#x27;status&#x27;</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">So the preselect code as pasted will not update the label correctly unless <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">item</code> is corrected to <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">status</code>.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Always ensure the JS id matches the HTML id.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">4.2 Change Handler (When user flips switch)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Reference pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function toggle() {
  const status = document.getElementById(&#x27;status&#x27;);
  const toggle = document.getElementById(&#x27;toggle&#x27;);
  status.textContent = toggle.checked ? &#x27;Active&#x27; : &#x27;Inactive&#x27;;
}</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rules:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Always update the label text.</li>
<li style="margin-bottom:8px;padding-left:8px;">Keep the label text as the single source of truth for saving (in this pattern).</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">5) FileMaker Integration Pattern</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.1 Inject initial state into HTML</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The label is injected from FileMaker:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&quot;&lt;span class=&#x27;status&#x27; id=&#x27;status&#x27;&gt;&quot; &amp; $Status &amp; &quot;&lt;/span&gt;&quot;</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rules:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Ensure <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Status</code> is always defined. If missing, set a default (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Active</code> or <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Inactive</code>) before page generation.</li>
<li style="margin-bottom:8px;padding-left:8px;">Keep <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Status</code> values consistent with your toggle mapping.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">5.2 Inject initial state into JS on load</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">The sample passes <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Status</code> into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">preselectToggle()</code>:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">window.onload = function() {
 preselectToggle(&#x27;&quot; &amp; $Status &amp; &quot;&#x27;);
};</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rules:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">The injected value must exactly match expected strings (<code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Active</code> / <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Inactive</code>) unless you change mapping logic.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">6) Saving the Toggle Value (Text Fields Only)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">In this pattern, the Save script reads the state from the label:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const status = document.getElementById(&#x27;status&#x27;).textContent.trim();</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Then it joins it into parameters:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const parameters = [ first_name, last_name, email, role, status ].join(&#x27;|&#x27;);
FileMaker.PerformScript(&#x27;Save User&#x27;, parameters);</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rules:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Always trim the text to avoid leading/trailing spaces.</li>
<li style="margin-bottom:8px;padding-left:8px;">Always include status in the correct position in the pipe-delimited payload.</li>
<li style="margin-bottom:8px;padding-left:8px;">The receiving FileMaker script must parse the parameter order exactly.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">7) Recommended Toggle Naming Standard (For AI Agent)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the page has a single toggle:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">checkbox id: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggle</code></li>
<li style="margin-bottom:8px;padding-left:8px;">label id: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">status</code></li>
<li style="margin-bottom:8px;padding-left:8px;">functions: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">preselectToggle()</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggle()</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If the page will have multiple toggles:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use unique ids per toggle (required)</li>
<li style="margin-bottom:8px;padding-left:8px;">Use a generic handler that targets specific label ids</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Example multi-toggle standard:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">checkbox id: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggle_status</code>, label id: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">status_label</code></li>
<li style="margin-bottom:8px;padding-left:8px;">checkbox id: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggle_notify</code>, label id: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">notify_label</code></li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Generic JS pattern:</p>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function preselectToggleByIds(toggleId, labelId, stateValue, onText, offText) {
  const toggle = document.getElementById(toggleId);
  const label = document.getElementById(labelId);

  if (!toggle || !label) return;

  if (stateValue === onText) {
    toggle.checked = true;
    label.textContent = onText;
  } else {
    toggle.checked = false;
    label.textContent = offText;
  }
}

function toggleByIds(toggleId, labelId, onText, offText) {
  const toggle = document.getElementById(toggleId);
  const label = document.getElementById(labelId);

  if (!toggle || !label) return;

  label.textContent = toggle.checked ? onText : offText;
}</pre>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Only implement multi-toggle logic if needed. Otherwise keep the simple single-toggle pattern.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">8) Common Failure Modes (Must Avoid)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.1 ID mismatch (Seen in the sample)</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">JS references <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">item</code> id, HTML uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">status</code> id.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Enforce id consistency before returning output.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.2 Missing default state</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Status</code> is empty, toggle may display blank or incorrect.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Always ensure <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$Status</code> is set server-side before HTML generation.</li>
</ul>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">8.3 Saving checkbox state instead of label</h4>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">If saving uses <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">toggle.checked</code> but display uses text, you can desync.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent rule:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">In this pattern, label text is the source of truth for saving.</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">9) Ambiguities and Clarifications Needed (Must Ask User)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">To implement this perfectly across the codebase, these must be clarified:</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">1) What are the canonical text values for status?</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   - Is it always <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Active</code> and <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Inactive</code>?</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   - Or do some modules use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Enabled/Disabled</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Yes/No</code>, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">True/False</code>?</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">2) Are status values case-sensitive in your database?</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   - Example: <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">active</code> vs <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Active</code></p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">3) Do you want the toggle to immediately save on change for some pages?</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   - The current pattern only changes UI and saves later via Save button.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">4) Should toggles support a third state (unknown/unset)?</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">   - If yes, toggle is the wrong control and needs a different UI.</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">AI Agent default behavior if not clarified:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Use <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Active</code> / <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Inactive</code></li>
<li style="margin-bottom:8px;padding-left:8px;">Treat them as case-sensitive</li>
<li style="margin-bottom:8px;padding-left:8px;">Update UI only, save only when user clicks Save</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">10) Copy-Paste Templates (AI Agent Output Blocks)</h3>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.1 Template: Toggle HTML (Single)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">&lt;div class=&#x27;form-group form-group-2&#x27;&gt;
  &lt;label for=&#x27;status&#x27;&gt;Status&lt;/label&gt;

  &lt;div class=&#x27;toggle-container&#x27;&gt;
    &lt;label class=&#x27;toggle-switch&#x27;&gt;
      &lt;input type=&#x27;checkbox&#x27; id=&#x27;toggle&#x27; onchange=&quot;toggle()&quot;&gt;
      &lt;span class=&#x27;slider&#x27;&gt;&lt;/span&gt;
    &lt;/label&gt;
    &lt;span class=&#x27;status&#x27; id=&#x27;status&#x27;&gt;Active&lt;/span&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.2 Template: Toggle JS (Single)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">function preselectToggle(statusValue) {
  const toggle = document.getElementById(&#x27;toggle&#x27;);
  const status = document.getElementById(&#x27;status&#x27;);

  if (!toggle || !status) return;

  if (statusValue === &#x27;Active&#x27;) {
    toggle.checked = true;
    status.textContent = &#x27;Active&#x27;;
  } else {
    toggle.checked = false;
    status.textContent = &#x27;Inactive&#x27;;
  }
}

window.onload = function() {
  preselectToggle(&#x27;Active&#x27;); /* inject FileMaker value */
};

function toggle() {
  const status = document.getElementById(&#x27;status&#x27;);
  const toggle = document.getElementById(&#x27;toggle&#x27;);

  if (!toggle || !status) return;

  status.textContent = toggle.checked ? &#x27;Active&#x27; : &#x27;Inactive&#x27;;
}</pre>
<h4 style="margin-top:32px;margin-bottom:12px;font-weight:700;font-size:18px;color:#0f172a;">10.3 Template: Save Extraction (Text state)</h4>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);">const status = document.getElementById(&#x27;status&#x27;).textContent.trim();</pre>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">11) Minimal Acceptance Checklist (AI Agent)</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">A Toggle Switch implementation is correct only if:</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">HTML includes:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - a checkbox input</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - a slider span</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - a visible label span storing the text state</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">JavaScript includes:</li>
</ul>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - init logic (preselect) based on a FileMaker-provided value</p>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">  - change logic updating the label text</p>
<ul style="margin-left:32px;margin-top:16px;list-style-type:disc;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Save logic reads the label text and includes it in the parameter payload</li>
<li style="margin-bottom:8px;padding-left:8px;">All ids used in JS exist in HTML and match exactly</li>
</ul>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

            </div>
          </section>


          <section class="card section" id="dp-prompt">
            <div class="section-head">
              <div class="section-title">
                <span class="section-emoji" aria-hidden="true">💬</span>
                <span>Prompt — Generate an Entity Details Page</span>
              </div>
            </div>
            <div style="padding: 24px; line-height: 1.6;">

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">How to Use This Prompt</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">Copy the prompt block below, fill in the blank with the entity you want to generate a details page for, then send it to your AI agent. The link inside the prompt points the agent to this documentation page so it has the full context it needs before generating anything.</p>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Prompt</h3>
<div style="position:relative;">
  <button onclick="(function(btn){var pre=btn.parentElement.querySelector('pre');var txt=pre.innerText;navigator.clipboard.writeText(txt).then(function(){btn.textContent='Copied!';setTimeout(function(){btn.textContent='Copy';},2000);});})(this)" style="position:absolute;top:10px;right:10px;background:#334155;color:#e2e8f0;border:none;border-radius:5px;padding:5px 12px;font-size:12px;cursor:pointer;font-family:ui-monospace,monospace;z-index:2;">Copy</button>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;padding-right:80px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;line-height:1.8;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);white-space:pre-wrap;">https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/+++Entity Details Page.html

The link above will guide you to guide me generate an entity details page in CauferoAppStarter FileMaker file.

Generate an entity details page for the following:
________________.

Find below a sample of a FileMaker script that generates a details Page

+++ Patient Details Page
──────────────────────────────────────────────────────────────────────────────

Set Variable [ $$App Section ; Value: "Patient Details" ]
Set Variable [ $$Selected Record ID ; Value: GetValue ( GetScriptParameters ; 1 ) ]

# 
# Get Script Parameters
# 

Set Variable [ $$Patient ID ; Value: GetValue ( GetScriptParameters ; 1 ) ]
Set Variable [ $$Search Item ; Value: GetValue ( GetScriptParameters ; 2 ) ]

# 
# 
# FM Scripts to be called by objects on the page

Set Variable [ $Save Record Script ; Value: "Save Patient Details" ]
Set Variable [ $Cancel Script ; Value: "+++ Patients List Page" ]
Set Variable [ $Delete Record Script ; Value: "" ]
Set Variable [ $View Payment Option FM Script ; Value: "+++ View Payment Option Modal Page" ]
Set Variable [ $Add Payment Option FM Script ; Value: "Add New Payment Option" ]

# 
# 
# 
# Get values using ExecuteSQL (if any)
# 

Set Variable [ $List ; Value:
    Let ( [
        sql = "SELECT t1.ID, t1.""Number"", t1.""Title"", t1.""First Name"", t1.""Last Name"",
                t1.""Other Names"", t1.""Title""||' '||t1.""First Name""||' '||t1.""Last Name"" AS ""Patient Name"",
                t1.""Initials"", t1.Gender, t1.""Date of Birth"", t1.Age, t1.Mobile, t1.Email,
                t1.Street, t1.City, t1.Country, t1.""Marital Status"", t1.""Maiden Name"",
                t1.Hometown, t1.""Hometown Region"", t1.Nationality, t1.""ID Card Type"",
                t1.""ID Card Number"", t1.Languages, t1.Profession, t1.Religion,
                t2.""Relationship"" AS ""Contact Person Relationship"",
                t2.""Full Name"" AS ""Contact Person Full Name"",
                t2.""Mobile"" AS ""Contact Person Mobile"",
                t3.""Full Name"" AS ""Primary Care Physician Full Name"",
                t3.""Mobile"" AS ""Primary Care Physician Mobile"",
                t3.""Residential Address"" AS ""Primary Care Physician Residential Address""
               FROM Patients t1
               LEFT JOIN ""Patient Emergency Contacts"" t2 ON (t1.ID = t2.""Patient ID"")
               LEFT JOIN ""Patient Primary Care Physicians"" t3 ON (t1.ID = t3.""Patient ID"")
               WHERE t1.ID = ?" ;
        fieldseparator = "|" ;
        rowseparator = "¶" ;
        id = $$Patient ID ;
        result = ExecuteSQL ( sql ; fieldseparator ; rowseparator ; id )
    ] ;
    result
) ]

Set Variable [ $Total ; Value: ValueCount ( $List ) ]

# 

If [ $Total > 0 ]

    Loop
        Set Variable [ $i ; Value: $i + 1 ]
        Set Variable [ $Link Record ; Value: GetValue ( $List ; $i ) ]
        Set Variable [ $Link Record As List ; Value: Substitute ( $Link Record ; "|" ; ¶ ) ]

        #

        Set Variable [ $ID ; Value: GetValue ( $Link Record As List ; 1 ) ]
        Set Variable [ $Number ; Value: GetValue ( $Link Record As List ; 2 ) ]
        Set Variable [ $Title ; Value: GetValue ( $Link Record As List ; 3 ) ]
        Set Variable [ $First Name ; Value: GetValue ( $Link Record As List ; 4 ) ]
        Set Variable [ $Last Name ; Value: GetValue ( $Link Record As List ; 5 ) ]
        Set Variable [ $Other Names ; Value: GetValue ( $Link Record As List ; 6 ) ]
        Set Variable [ $Full Name ; Value: GetValue ( $Link Record As List ; 7 ) ]
        Set Variable [ $Initials ; Value: GetValue ( $Link Record As List ; 8 ) ]
        Set Variable [ $Gender ; Value: GetValue ( $Link Record As List ; 9 ) ]
        Set Variable [ $Date of Birth ; Value: GetValue ( $Link Record As List ; 10 ) ]
        Set Variable [ $Age ; Value: GetValue ( $Link Record As List ; 11 ) & " years old" ]
        Set Variable [ $Phone ; Value: GetValue ( $Link Record As List ; 12 ) ]
        Set Variable [ $Email ; Value: GetValue ( $Link Record As List ; 13 ) ]
        Set Variable [ $Street ; Value: GetValue ( $Link Record As List ; 14 ) ]
        Set Variable [ $City ; Value: GetValue ( $Link Record As List ; 15 ) ]
        Set Variable [ $Country ; Value: GetValue ( $Link Record As List ; 16 ) ]
        Set Variable [ $Marital Status ; Value: GetValue ( $Link Record As List ; 17 ) ]
        Set Variable [ $Maiden Name ; Value: GetValue ( $Link Record As List ; 18 ) ]
        Set Variable [ $Hometown ; Value: GetValue ( $Link Record As List ; 19 ) ]
        Set Variable [ $Hometown Region ; Value: GetValue ( $Link Record As List ; 20 ) ]
        Set Variable [ $Nationality ; Value: GetValue ( $Link Record As List ; 21 ) ]
        Set Variable [ $ID Card Type ; Value: GetValue ( $Link Record As List ; 22 ) ]
        Set Variable [ $ID Card Number ; Value: GetValue ( $Link Record As List ; 23 ) ]
        Set Variable [ $Languages ; Value: GetValue ( $Link Record As List ; 24 ) ]
        Set Variable [ $Languages ; Value: Substitute ( $Languages ; "," ; ¶ ) ]
        Set Variable [ $Profession ; Value: GetValue ( $Link Record As List ; 25 ) ]
        Set Variable [ $Religion ; Value: GetValue ( $Link Record As List ; 26 ) ]
        Set Variable [ $Emergency Contact Relationship ; Value: GetValue ( $Link Record As List ; 27 ) ]
        Set Variable [ $Emergency Contact Full Name ; Value: GetValue ( $Link Record As List ; 28 ) ]
        Set Variable [ $Emergency Contact Mobile ; Value: GetValue ( $Link Record As List ; 29 ) ]
        Set Variable [ $Primary Care Physician Full Name ; Value: GetValue ( $Link Record As List ; 30 ) ]
        Set Variable [ $Primary Care Physician Mobile ; Value: GetValue ( $Link Record As List ; 31 ) ]
        Set Variable [ $Primary Care Physician Residential Address ; Value: GetValue ( $Link Record As List ; 32 ) ]

        #

        Exit Loop If [ $i ≥ $Total ]

        #

    End Loop

    #

Else

    Set Variable [ $Number ; Value: $$New Patient Number ]
    Set Variable [ $Country ; Value: "Ghana" ]
    Set Variable [ $Nationality ; Value: "Ghanaian" ]
    Set Variable [ $Religion ; Value: "Christianity" ]
    Set Variable [ $Marital Status ; Value: "Single" ]
    Set Variable [ $ID Card Type ; Value: "Ghana Card" ]

    #

End If

# 
# 
# 
# Call valuelist scripts to get valuelists (if any)
# 

Perform Script [ "Get Value List" ; Parameter: "Dropdown|Titles|" & $Title ]
Set Variable [ $Titles HTML ; Value: Get ( ScriptResult ) ]

#

Perform Script [ "Get Value List" ; Parameter: "Dropdown|Marital Statuses|" & $Marital Status ]
Set Variable [ $Marital Statuses HTML ; Value: Get ( ScriptResult ) ]

#

Perform Script [ "Get Value List" ; Parameter: "Dropdown|Regions|" & $Hometown Region ]
Set Variable [ $Hometown Regions HTML ; Value: Get ( ScriptResult ) ]

#

Perform Script [ "Get Value List" ; Parameter: "Dropdown|Countries|" & $Country ]
Set Variable [ $Countries HTML ; Value: Get ( ScriptResult ) ]

#

Perform Script [ "Get Value List" ; Parameter: "Dropdown|Nationalities|" & $Nationality ]
Set Variable [ $Nationalities HTML ; Value: Get ( ScriptResult ) ]

#

Perform Script [ "Get Value List" ; Parameter: "Dropdown|Religions|" & $Religion ]
Set Variable [ $Religions HTML ; Value: Get ( ScriptResult ) ]

#

Perform Script [ "Get Value List" ; Parameter: "Dropdown|ID Card Types|" & $ID Card Type ]
Set Variable [ $ID Card Types HTML ; Value: Get ( ScriptResult ) ]

#

Perform Script [ "Get Value List" ; Parameter: "Dropdown|Relationships|" & $Emergency Contact Relationship ]
Set Variable [ $Emergency Contact Relationships HTML ; Value: Get ( ScriptResult ) ]

# 
# 
# 
# Generate sub table (payment options)

Set Variable [ $SQL ; Value:
    "SELECT t1.""ID"",
            t1.""Option"",
            CASE
                WHEN t1.""Option"" = 'Cash' THEN 'Details specified at payment'
                WHEN t1.""Option"" = 'Visa' THEN 'Details specified at payment'
                WHEN t1.""Option"" = 'MoMo' THEN t1.""MoMo Number"" || ' (' || t1.""MoMo Network"" || ')'
                WHEN t1.""Option"" = 'Insurance' THEN t3.""Name"" || ' (' || t2.""Name"" || ') - Policy No.: ' || t1.""Insurance Policy Number""
                ELSE 'Unknown'
            END AS Details
     FROM ""Patient Payment Options"" t1
     LEFT JOIN ""Insurers"" t2 On (t1.""Insurer ID""=t2.ID)
     LEFT JOIN ""Insurance Policies"" t3 On (t1.""Insurance Policy ID""=t3.ID)
     WHERE t1.""Patient ID"" = ?
     ORDER BY t1.""Option""" ]

Set Variable [ $SQL Condition ; Value: $$Patient ID ]
Set Variable [ $Column Headers ; Value: "S/N,Option,Details,Actions" ]
Set Variable [ $Column Widths ; Value: "5,15,75,5" ]
Set Variable [ $Status Column ; Value: "" ]
Set Variable [ $Date Columns ; Value: "" ]
Set Variable [ $Number Columns ; Value: "" ]
Set Variable [ $Inputs ; Value: "" ]
Set Variable [ $Row Action JS Script ; Value: "viewPaymentOption" ]
Set Variable [ $Row Action Icon Class ; Value: "fas fa-eye" ]
Set Variable [ $Table ID ; Value: "PaymentOptionsTable" ]
Set Variable [ $Two Decimal Columns ; Value: "" ]
Set Variable [ $Timestamp Columns ; Value: "" ]
Set Variable [ $Sub Table Name ; Value: "Payment Options For Patient|Configure available payment methods for the patient" ]
Set Variable [ $Sub Table Width ; Value: "95%" ]
Set Variable [ $Sub Table Height ; Value: "70vh" ]
Set Variable [ $Add New Record Button Label ; Value: "Add Payment Option" ]
Set Variable [ $Add New Record JS Script Name ; Value: "addPaymentOption" ]
Set Variable [ $No Record Found Icon SVG Path ; Value: "d='M22 7.54844C22 8.20844 21.46 8.74844 20.8 8.74844H3.2C2.54 ..." ]
Set Variable [ $No Record Found Message Title ; Value: "No Payment Options" ]
Set Variable [ $No Record Found Message Body ; Value: "This patient doesn't have any payment options set up." ]

#

Perform Script [ "+++ Display Subtable HTML" ; Parameter:
    $SQL & ¶ &
    $SQL Condition & ¶ &
    $Column Headers & ¶ &
    $Column Widths & ¶ &
    $Status Column & ¶ &
    $Date Columns & ¶ &
    $Number Columns & ¶ &
    $Inputs & ¶ &
    $Row Action JS Script & ¶ &
    $Row Action Icon Class & ¶ &
    $Table ID & ¶ &
    $Two Decimal Columns & ¶ &
    $Timestamp Columns & ¶ &
    $Sub Table Name & ¶ &
    $Sub Table Width & ¶ &
    $Sub Table Height & ¶ &
    $Add New Record Button Label & ¶ &
    $Add New Record JS Script Name & ¶ &
    $No Record Found Icon SVG Path & ¶ &
    $No Record Found Message Title & ¶ &
    $No Record Found Message Body ]

Set Variable [ $Payment Options Table HTML ; Value: Get ( ScriptResult ) ]

# 
# 
# ******************************************
# ******************************************
# GENERATE PAGE (START)
# ******************************************
# ******************************************
# 
# CSS

Perform Script [ "🖌️ Use Details CSS" ]
Set Variable [ $styles ; Value: Get ( ScriptResult ) ]

# 
# 
# HTML

Set Variable [ $Summary Section HTML ; Value:
    "<div class='summary-section'>
      <div class='summary-card'>
        <h2>" & If ( not IsEmpty ( $Full Name ) ; $Full Name ; "Patient Information" ) & "</h2>
        <div class='summary-content'>
          <div class='summary-info'>
            <p><strong>Patient Name:</strong> " & $Full Name & "</p>
            <p><strong>Card Number:</strong> " & $Number & "</p>
            <hr/>
            <p><strong>Gender:</strong> " & $Gender & "</p>
            <p><strong>Age:</strong> " & $Age & "</p>
            <p><strong>Marital Status:</strong> " & $Marital Status & "</p>
            <hr/>
            <p><strong>Phone:</strong> " & $Phone & "</p>
            <p><strong>Email:</strong> " & $Email & "</p>
            <p><strong>Nationality:</strong> " & $Nationality & "</p>
            <hr/>
            <p><strong>Profession:</strong> " & $Profession & "</p>
            <p><strong>Languages:</strong> " & $Languages & "</p>
          </div>
        </div>
        <hr />
        <div class='button-container' style='justify-content: flex-end; width: 100%; margin: 0;'>
          <button class='button_blue' style='width: 100%; justify-content: center;' onclick=\"printPatientCard()\">
            <i class='fa-solid fa-file'></i> Print Patient Card
          </button>
        </div>
        <div class='button-container'>
          <button class='save-button' onclick=\"saveItemInfo()\"><i class='fas fa-save'></i> Save</button>
          <button class='cancel-button' onclick=\"cancelAction()\"><i class='fas fa-times-circle'></i> Cancel</button>
        </div>
      </div>
    </div>
    <!-- Modal -->
    <div class='image-modal' id='imageModal'>
      <span class='image-modal-close-btn' onclick='closeImageModal()'>&times;</span>
      <img id='modalImage' src='' alt='Enlarged Image'>
    </div>" ]

Set Variable [ $Tabs HTML ; Value:
    "<div class='tabs'>
      <div class='tab" & If ( $$Tab To Show = 1 ; " active" ) & "' onclick=\"showContent('tab1', this)\">Personal Info</div>
      <div class='tab" & If ( $$Tab To Show = 2 ; " active" ) & "' onclick=\"showContent('tab2', this)\">Contact Addresses</div>
      <div class='tab" & If ( $$Tab To Show = 3 ; " active" ) & "' onclick=\"showContent('tab3', this)\">Payment Options</div>
    </div>" ]

Set Variable [ $Tab1 HTML ; Value:
    "<div id='tab1' class='content'" & If ( $$Tab To Show = 1 ; " style='display: block;'" ) & ">
      <h3>Patient Personal Info</h3>
      <p>View and manage a patient's basic details...</p>
      ... (Full Name, Card Number, Gender, DOB, Hometown, Region,
           Nationality, Marital Status, Religion, Profession,
           ID Card Type, ID Card Number, Languages fields)
    </div>" ]

Set Variable [ $Tab2 HTML ; Value:
    "<div id='tab2' class='content'" & If ( $$Tab To Show = 2 ; " style='display: block;'" ) & ">
      <h3>Patient's Contact Addresses</h3>
      <p>Store and update the patient's phone numbers, email, and home/work addresses...</p>
      ... (Phone, Email, Street, City, Country,
           Emergency Contact, Primary Care Physician fields)
    </div>" ]

Set Variable [ $Tab3 HTML ; Value:
    "<div id='tab3' class='content'" & If ( $$Tab To Show = 3 ; " style='display: block;'" ) & ">
      " & $Payment Options Table HTML & "
    </div>" ]

#

Set Variable [ $HTML ; Value:
    "<div class='container'>
    " & $Summary Section HTML & "
    <div class='content-section'>
    " & $Tabs HTML &
      $Tab1 HTML &
      $Tab2 HTML &
      $Tab3 HTML &
      $Tab4 HTML &
      $Tab5 HTML &
      $Tab6 HTML &
      $Tab7 HTML & "
    </div>
    </div>" ]

# 
# 
# Javascript

Set Variable [ $Show Content Script ; Value:
    "function showContent(contentId, tabElement) {
        const contentSections = document.querySelectorAll('.content');
        contentSections.forEach((section) => (section.style.display = 'none'));
        document.getElementById(contentId).style.display = 'block';
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach((tab) => tab.classList.remove('active'));
        tabElement.classList.add('active');
    }" ]

Set Variable [ $Select Segmented Control Script ; Value:
    "function selectSegmentedControl(button) {
        const buttons = document.querySelectorAll('.segmented-control button');
        buttons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        const active_button = document.querySelectorAll('.segmented-control button.active');
    }" ]

Set Variable [ $Cancel Action Script ; Value:
    "function cancelAction() {
        FileMaker.PerformScript('" & $Cancel Script & "');
    }" ]

Set Variable [ $Toggle Script ; Value:
    "function preselectToggle(statusValue) { ... }
     window.onload = function() { preselectToggle('" & < Table Missing >::< Field Missing > & "'); };
     function toggle() { ... }" ]

Set Variable [ $Date Picker Script ; Value:
    "document.addEventListener('DOMContentLoaded', function () {
        const dateFields = [{ id: 'dob', iconId: 'dob_icon' }];
        function formatMySQLDateToReadable(mysqlDate) { ... }
        dateFields.forEach(field => { ... flatpickr ... });
    });
    function getMySQLFormattedDate(fieldId) { ... }" ]

Set Variable [ $View Payment Option Script ; Value:
    "function viewPaymentOption(parameters) {
        FileMaker.PerformScript('" & $View Payment Option FM Script & "', parameters);
    }" ]

Set Variable [ $Add Payment Option Script ; Value:
    "function addPaymentOption() {
        FileMaker.PerformScript('" & $Add Payment Option FM Script & "');
    }" ]

Set Variable [ $Save Item Info Script ; Value:
    "function saveItemInfo() {
        const title = document.getElementById('title').value;
        const first_name = document.getElementById('first_name').value;
        const other_names = document.getElementById('other_names').value;
        const last_name = document.getElementById('last_name').value;
        const card_number = document.getElementById('card_number').value;
        const genderButton = document.querySelector('.segmented-control button.active');
        const gender = genderButton.textContent.trim();
        const dob = getMySQLFormattedDate('dob');
        const hometown = document.getElementById('hometown').value;
        const hometown_region = document.getElementById('hometown_region').value;
        const nationality = document.getElementById('nationality').value;
        const marital_status = document.getElementById('marital_status').value;
        const religion = document.getElementById('religion').value;
        const profession = document.getElementById('profession').value;
        const id_card_type = document.getElementById('id_card_type').value;
        const id_card_number = document.getElementById('id_card_number').value;
        const checkedValues = [];
        const checkboxes = document.querySelectorAll('.checkbox-group input[type=""checkbox""]:checked');
        checkboxes.forEach(checkbox => { checkedValues.push(checkbox.value); });
        const languages = checkedValues.join(',');
        const phone = document.getElementById('phone').value;
        const email = document.getElementById('email').value;
        const street = document.getElementById('street').value;
        const city = document.getElementById('city').value;
        const country = document.getElementById('country').value;
        const emergency_contact_relationship = document.getElementById('emergency_contact_relationship').value;
        const emergency_contact_name = document.getElementById('emergency_contact_name').value;
        const emergency_contact_mobile = document.getElementById('emergency_contact_mobile').value;
        const primary_care_physician_name = document.getElementById('primary_care_physician_name').value;
        const primary_care_physician_mobile = document.getElementById('primary_care_physician_mobile').value;
        const primary_care_physician_residential_address = document.getElementById('primary_care_physician_residential_address').value;
        const parameters = [ title, first_name, other_names, last_name, card_number, dob,
            hometown, hometown_region, nationality, marital_status, religion, profession,
            id_card_type, id_card_number, gender, languages, phone, email, street, city,
            country, emergency_contact_relationship, emergency_contact_name,
            emergency_contact_mobile, primary_care_physician_name,
            primary_care_physician_mobile, primary_care_physician_residential_address
        ].join('|');
        FileMaker.PerformScript('" & $Save Record Script & "', parameters);
    }" ]

#

Set Variable [ $Scripts ; Value:
    "<script> " &
    $Show Content Script & "¶¶" &
    $Choose File & "¶¶" &
    $Toggle Accordion Script & "¶¶" &
    $Cancel Action Script & "¶¶" &
    $Add Another Item Script & "¶¶" &
    $Close Alert Script & "¶¶" &
    $Move Item Script & "¶¶" &
    $Toggle Script & "¶¶" &
    $Select Segmented Control Script & "¶¶" &
    $View Payment Option Script & "¶¶" &
    $Add Payment Option Script & "¶¶" &
    $Date Picker Script & "¶¶" &
    $Save Item Info Script &
    " </script>" ]

# 
# 
# Full Page

Set Variable [ $$Page ; Value:
    "<!DOCTYPE html>
    <html lang='en'>
    <head>
      <meta charset='UTF-8'>
      <meta name='viewport' content='width=device-width, initial-scale=1.0'>
      <title>Item Management</title>
      <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css'>
      <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css'>
      <script src='https://cdn.jsdelivr.net/npm/flatpickr'></script>
      <style> " & $styles & " </style>
    </head>
    <body> " & $HTML & "¶¶" & $Scripts & " </body>
    </html>" ]

# 
# 
# ******************************************
# ******************************************
# GENERATE PAGE (END)
# ******************************************
# ******************************************
# 

Perform Script [ "WebDirect Pause" ]
Refresh Window [ Flush cached join results; Flush cached SQL results ]

</pre>
</div>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">What the AI Agent Will Do</h3>
<p style="margin-top:8px;margin-bottom:8px;color:#374151;line-height:1.75;">When the agent receives this prompt, it will:</p>
<ol style="margin-left:32px;margin-top:16px;list-style-type:decimal;color:#374151;">
<li style="margin-bottom:8px;padding-left:8px;">Read this documentation page in full to understand the CauferoAppStarter details page architecture.</li>
<li style="margin-bottom:8px;padding-left:8px;">Ask you clarifying questions about the entity — its fields, related tables, subtables, dropdowns, and UI intent — if needed.</li>
<li style="margin-bottom:8px;padding-left:8px;">Generate a complete <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">+++ &lt;Entity&gt; Details Page</code> FileMaker script, including all required components in the canonical order: page identity globals, action script variables, <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">ExecuteSQL</code> data fetch, value list calls, subtable HTML generation, CSS delegation via <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">🖌️ Use Details CSS</code>, HTML construction, JavaScript, full document assembly into <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">$$Page</code>, and the end refresh steps.</li>
<li style="margin-bottom:8px;padding-left:8px;">Also generate the companion <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Save &lt;Entity&gt; Details</code> script, and the <code style="background-color:#f1f5f9;color:#0f172a;padding:2px 8px;border-radius:4px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:0.875em;">Add New &lt;Entity&gt;</code> script if applicable.</li>
</ol>
<hr style="margin-top:32px;margin-bottom:32px;border:0;border-top:1px solid #e5e7eb;" />

              <h3 style="margin-top:32px;margin-bottom:16px;font-weight:700;font-size:20px;color:#0f172a;border-bottom:2px solid #e5e7eb;padding-bottom:12px;">Example Filled Prompts</h3>
<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;line-height:1.8;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);white-space:pre-wrap;">https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/+++Entity Details Page.html

The link above will guide you to guide me generate an entity details page in CauferoAppStarter FileMaker file.

Generate an entity details page for the following:
Staff member — showing personal info, contact details, department, job title, profile image, attendance subtable, and documents subtable. Tabs: Info, Attendance, Documents.</pre>

<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;line-height:1.8;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);white-space:pre-wrap;">https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/+++Entity Details Page.html

The link above will guide you to guide me generate an entity details page in CauferoAppStarter FileMaker file.

Generate an entity details page for the following:
Department — name, description, head of department (dropdown), number of staff (read-only), and a staff subtable.</pre>

<pre style="background-color:#1e293b;color:#e2e8f0;border-radius:8px;padding:16px;margin:16px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:14px;line-height:1.8;overflow-x:auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1);white-space:pre-wrap;">https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/+++Entity Details Page.html

The link above will guide you to guide me generate an entity details page in CauferoAppStarter FileMaker file.

Generate an entity details page for the following:
Patient — name, date of birth, gender, blood type, assigned doctor (dropdown), admission date, vitals grid, and a medical history subtable. Tabs: Overview, Vitals, History.</pre>

            </div>
          </section>

        </div>
      </main>

      <aside class="rail rail-right" id="railRight">
        <div class="rail-top">
          <div class="rail-title">On This Page</div>
          <div class="rail-sub">Details Page Reference</div>
        </div>
        <div class="rail-body">
          <div class="panel-card">
            <div class="panel-head">
              <div class="panel-title">Start Here</div>
              <div class="panel-sub">Read this first</div>
            </div>
            <div class="stack">
              <div class="stack-item"><a href="#dp-theme-arch" style="color:inherit;text-decoration:none;">⚠️ CSS &amp; Theme Architecture</a></div>
              <div class="stack-item"><a href="#dp-prompt" style="color:inherit;text-decoration:none;">💬 Prompt to Generate a Page</a></div>
            </div>
          </div>
          <div class="panel-card">
            <div class="panel-head">
              <div class="panel-title">Page Structure</div>
              <div class="panel-sub">Core generation docs</div>
            </div>
            <div class="stack">
              <div class="stack-item"><a href="#dp-css" style="color:inherit;text-decoration:none;">🎨 Details CSS Generator</a></div>
              <div class="stack-item"><a href="#dp-main" style="color:inherit;text-decoration:none;">📘 Generating a Details Page</a></div>
              <div class="stack-item"><a href="#dp-script-steps" style="color:inherit;text-decoration:none;">📋 Script Steps (1–10)</a></div>
              <div class="stack-item"><a href="#dp-modal" style="color:inherit;text-decoration:none;">🪟 Modal Page Generation</a></div>
              <div class="stack-item"><a href="#dp-addnew" style="color:inherit;text-decoration:none;">➕ Add New Entity Scripts</a></div>
            </div>
          </div>
          <div class="panel-card">
            <div class="panel-head">
              <div class="panel-title">Save Logic</div>
              <div class="panel-sub">How records are saved</div>
            </div>
            <div class="stack">
              <div class="stack-item"><a href="#dp-save" style="color:inherit;text-decoration:none;">💾 Saving Entity Details</a></div>
              <div class="stack-item"><a href="#dp-save-breakdown" style="color:inherit;text-decoration:none;">🔩 Save Script Breakdown</a></div>
              <div class="stack-item"><a href="#dp-batch" style="color:inherit;text-decoration:none;">📦 Batch Save</a></div>
            </div>
          </div>
          <div class="panel-card">
            <div class="panel-head">
              <div class="panel-title">Field Types</div>
              <div class="panel-sub">HTML controls used in the page</div>
            </div>
            <div class="stack">
              <div class="stack-item"><a href="#dp-textfields" style="color:inherit;text-decoration:none;">✏️ Text Fields</a></div>
              <div class="stack-item"><a href="#dp-numbers" style="color:inherit;text-decoration:none;">🔢 Number Fields</a></div>
              <div class="stack-item"><a href="#dp-dates" style="color:inherit;text-decoration:none;">📅 Datepickers (Flatpickr)</a></div>
              <div class="stack-item"><a href="#dp-dropdowns" style="color:inherit;text-decoration:none;">🔽 Dropdown Fields</a></div>
              <div class="stack-item"><a href="#dp-textareas" style="color:inherit;text-decoration:none;">📝 Text Areas</a></div>
              <div class="stack-item"><a href="#dp-richtext" style="color:inherit;text-decoration:none;">🖊️ Rich Text Editors</a></div>
              <div class="stack-item"><a href="#dp-fileupload" style="color:inherit;text-decoration:none;">🖼️ File Upload / Images</a></div>
              <div class="stack-item"><a href="#dp-combined" style="color:inherit;text-decoration:none;">⚙️ Combined Fields</a></div>
            </div>
          </div>
          <div class="panel-card">
            <div class="panel-head">
              <div class="panel-title">UI Controls</div>
              <div class="panel-sub">Interactive components</div>
            </div>
            <div class="stack">
              <div class="stack-item"><a href="#dp-buttons" style="color:inherit;text-decoration:none;">🔘 Buttons</a></div>
              <div class="stack-item"><a href="#dp-segmented" style="color:inherit;text-decoration:none;">🎛️ Segmented Controls</a></div>
              <div class="stack-item"><a href="#dp-toggles" style="color:inherit;text-decoration:none;">🔀 Toggle Switches</a></div>
            </div>
          </div>
          <div class="panel-card">
            <div class="panel-head">
              <div class="panel-title">Script Naming</div>
              <div class="panel-sub">Conventions</div>
            </div>
            <div class="stack">
              <div class="stack-item" style="font-family:ui-monospace,monospace;font-size:11px;">+++ &lt;Entity&gt; Details Page</div>
              <div class="stack-item" style="font-family:ui-monospace,monospace;font-size:11px;">Save &lt;Entity&gt; Details</div>
              <div class="stack-item" style="font-family:ui-monospace,monospace;font-size:11px;">Add New &lt;Entity&gt;</div>
              <div class="stack-item" style="font-family:ui-monospace,monospace;font-size:11px;">Add &lt;Entity&gt; (Modal)</div>
            </div>
          </div>
          <div class="panel-card">
            <div class="panel-head">
              <div class="panel-title">Quick Links</div>
            </div>
            <div class="side-grid">
              <a class="side-pill" href="https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/Build%20Apps%20With%20CauferoAppStarter.html">Full Docs</a>
              <a class="side-pill" href="https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/Get%20Value%20List.html">Value Lists</a>
              <a class="side-pill" href="https://caufero.github.io/projects/Apps/CauferoAppStarter/_Misc/+++Entity%20List%20Page.html">List Page</a>
              <a class="side-pill" href="https://caufero.github.io/projects/_Misc/_/AI%20Prompts/How%20To%20Go%20About%20Some%20Development%20Task.html">How To</a>
            </div>
          </div>
        </div>
        <div class="rail-bottom">
          <div class="rail-foot">
            <span class="rail-foot-dot"></span>
            <span>Details Page Reference</span>
          </div>
        </div>
      </aside>
    </div>
  </div>

<script>
    (function(){
      var root = document.querySelector(".page");
      var btnTheme = document.getElementById("btnTheme");
      var btnMenu = document.getElementById("btnMenu");
      var railLeft = document.getElementById("railLeft");
      var railRight = document.getElementById("railRight");
      var navSearch = document.getElementById("navSearch");
      var navClear = document.getElementById("navClear");
      var navTree = document.getElementById("navTree");

      function setTheme(mode){
        if (!root) return;
        root.setAttribute("data-theme", mode);
        try{ localStorage.setItem("cwf_theme", mode); } catch(e){}
      }
      function getTheme(){
        try{ return localStorage.getItem("cwf_theme") || "auto"; } catch(e){ return "auto"; }
      }
      function toggleTheme(){
        var cur = root.getAttribute("data-theme") || "auto";
        if (cur === "auto") return setTheme("dark");
        if (cur === "dark") return setTheme("light");
        return setTheme("auto");
      }
      function toggleLeftRail(){
        if (!railLeft) return;
        railLeft.classList.toggle("open");
      }
      function closest(el, sel){
        while(el && el !== document.documentElement){
          if (el.matches && el.matches(sel)) return el;
          el = el.parentNode;
        }
        return null;
      }
      function setOpen(panelEl, open){
        if (!panelEl) return;
        if (open) panelEl.classList.add("open");
        else panelEl.classList.remove("open");
      }
      function filterNav(q){
        if (!navTree) return;
        var query = (q || "").trim().toLowerCase();
        var items = navTree.querySelectorAll("[data-label]");
        for (var i=0;i<items.length;i++){
          var el = items[i];
          var label = (el.getAttribute("data-label") || "").toLowerCase();
          var hit = !query || label.indexOf(query) !== -1;
          el.classList.toggle("is-hit", hit);
          el.classList.toggle("is-dim", !!query && !hit);
        }
      }
      function wireDisclosure(){
        document.addEventListener("click", function(e){
          var head = closest(e.target, "[data-toggle='group'], [data-toggle='subgroup']");
          if (!head) return;
          var wrap = head.parentNode;
          if (!wrap) return;
          wrap.classList.toggle("open");
        });
      }
      function closeMobileRailsOnOutsideClick(e){
        var isMobile = window.matchMedia("(max-width: 980px)").matches;
        if (!isMobile) return;
        if (!railLeft || !railRight) return;
        var t = e.target;
        var insideLeft = !!closest(t, "#railLeft");
        var insideRight = !!closest(t, "#railRight");
        var insideBtn = !!closest(t, "#btnMenu");
        if (!insideLeft && !insideRight && !insideBtn){
          setOpen(railLeft, false);
          setOpen(railRight, false);
        }
      }

      function init(){
        setTheme(getTheme());
        wireDisclosure();
        if (btnTheme) btnTheme.addEventListener("click", toggleTheme);
        if (btnMenu) btnMenu.addEventListener("click", function(){
          var isMobile = window.matchMedia("(max-width: 980px)").matches;
          if (isMobile){
            toggleLeftRail();
          } else {
            document.body.classList.toggle("compact-rails");
          }
        });
        if (navClear) navClear.addEventListener("click", function(){
          if (!navSearch) return;
          navSearch.value = "";
          filterNav("");
          navSearch.focus();
        });
        if (navSearch) navSearch.addEventListener("input", function(){
          filterNav(navSearch.value || "");
        });
        document.addEventListener("click", closeMobileRailsOnOutsideClick, true);
        filterNav("");
      }
      if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", init);
      else init();
    })();
  

    function openInVSCode() {
      const githubBase = "https://caufero.github.io";
      const localBase = "file:///Users/cyril/Documents/Caufero%20Apps";
      
      const currentURL = window.location.href;
      const localPath = currentURL.replace(githubBase, localBase);
      
      // Convert file:// path to vscode:// path
      const vscodePath = localPath.replace("file://", "vscode://file/");
      
      window.location.href = vscodePath;
    }
  </script>

  <style>
    :root{
      --slate-950:#0b1220;
      --slate-900:#0f172a;
      --slate-800:#1f2937;
      --slate-700:#334155;
      --slate-600:#475569;
      --slate-500:#64748b;
      --slate-400:#94a3b8;
      --slate-300:#cbd5e1;
      --slate-200:#e2e8f0;
      --slate-100:#f1f5f9;
      --slate-50:#f8fafc;

      --caufero-900:#0b2a36;
      --caufero-800:#0e3344;
      --caufero-700:#124458;

      --teal-700:#0f5e5b;
      --teal-600:#147a74;
      --teal-500:#1a9a93;

      --sky-600:#2c97b9;
      --sky-500:#41c5e0;

      --violet-600:#5b49c8;
      --amber-600:#b7791f;
      --copper-600:#d8743d;
      --rose-700:#b4233a;
      --danger:#d5432e;

      --bg:var(--slate-50);
      --surface:rgba(255,255,255,.88);
      --surface2:rgba(255,255,255,.78);
      --elev:rgba(255,255,255,.70);

      --line:rgba(15,23,42,.10);
      --line2:rgba(15,23,42,.16);

      --shadow-1:0 1px 0 rgba(15,23,42,.06),0 10px 22px rgba(15,23,42,.06);
      --shadow-2:0 2px 0 rgba(15,23,42,.08),0 18px 36px rgba(15,23,42,.10);

      --r-xs:8px;
      --r-sm:10px;
      --r-md:12px;
      --r-lg:14px;
      --r-xl:18px;

      --topbarH:56px;
      --railW:288px;
      --railWCompact:228px;
      --contentMax:1200px;
    }

    *{box-sizing:border-box;}
    html,body{height:100%;}
    body{
      margin:0;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
      background:var(--bg);
      color:var(--slate-900);
      line-height:1.45;
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    a{color:var(--caufero-800);text-decoration:none;}
    a:hover{text-decoration:underline;}
    img{max-width:100%;}

    .page{min-height:100vh;position:relative;}
    .bg{
      position:fixed;
      inset:0;
      z-index:-1;
      background:
        radial-gradient(900px 480px at 12% -10%, rgba(14,51,68,.14), transparent 58%),
        radial-gradient(860px 520px at 100% 10%, rgba(216,116,61,.12), transparent 58%),
        radial-gradient(900px 520px at 60% 110%, rgba(95,164,161,.10), transparent 60%),
        var(--bg);
    }

    /* Dark theme */
    .page[data-theme="dark"]{
      --bg:#070a12;
      --surface:rgba(10,14,26,.82);
      --surface2:rgba(10,14,26,.68);
      --elev:rgba(10,14,26,.60);
      --line:rgba(148,163,184,.14);
      --line2:rgba(148,163,184,.22);
      color:var(--slate-100);
    }
    .page[data-theme="dark"] a{color:#a7d7e3;}
    .page[data-theme="dark"] .bg{
      background:
        radial-gradient(900px 480px at 12% -10%, rgba(65,197,224,.14), transparent 60%),
        radial-gradient(860px 520px at 100% 10%, rgba(216,116,61,.10), transparent 60%),
        radial-gradient(900px 520px at 60% 110%, rgba(95,164,161,.10), transparent 62%),
        var(--bg);
    }

    /* Topbar */
    .topbar{
      position:fixed;top:0;left:0;right:0;height:var(--topbarH);z-index:50;
      border-bottom:1px solid var(--line);backdrop-filter:saturate(140%) blur(10px);
      background:linear-gradient(to bottom, rgba(248,250,252,.82), rgba(248,250,252,.62));
    }
    .page[data-theme="dark"] .topbar{background:linear-gradient(to bottom, rgba(10,14,26,.84), rgba(10,14,26,.62));}
    .topbar-inner{
      height:100%;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;
      gap:12px;padding:0 14px;
      max-width:calc(var(--contentMax) + (var(--railW) * 2) + 72px);margin:0 auto;
    }
    .brand{display:flex;align-items:center;gap:10px;min-width:0;text-decoration:none;}
    .brand:hover{text-decoration:none;}
    .brand-text{min-width:0;}
    .brand-name{font-weight:750;font-size:14px;color:inherit;line-height:1.1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .brand-sub{font-size:12px;color:var(--slate-600);margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .page[data-theme="dark"] .brand-sub{color:rgba(241,245,249,.68);}
    .topbar-left,.topbar-center,.topbar-right{display:flex;align-items:center;}
    .topbar-left{justify-content:flex-start;min-width:0;}
    .topbar-center{justify-content:center;}
    .topbar-right{justify-content:flex-end;gap:8px;}
    .page-chip{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);background:var(--surface2);padding:7px 10px;border-radius:999px;box-shadow:0 1px 0 rgba(15,23,42,.04);}
    .page-chip-dot{width:8px;height:8px;border-radius:999px;background:linear-gradient(180deg, var(--copper-600), var(--teal-600));box-shadow:0 0 0 3px rgba(216,116,61,.12);}
    .page-chip-text{font-size:12px;font-weight:650;letter-spacing:.1px;}
    .icon-btn{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:12px;border:1px solid var(--line);background:var(--surface);color:inherit;box-shadow:0 1px 0 rgba(15,23,42,.04);cursor:pointer;user-select:none;}
    .icon-btn:hover{text-decoration:none;box-shadow:var(--shadow-1);transform:translateY(-1px);transition:transform .12s ease, box-shadow .12s ease;}
    .icon-btn:active{transform:translateY(0px);}
    .icon-btn.ghost{background:transparent;border:1px solid var(--line);}
    .icon-btn.brand{border-color:rgba(14,51,68,.22);background:linear-gradient(180deg, rgba(14,51,68,.10), rgba(14,51,68,.06));}
    .icon-btn-text{font-size:12px;font-weight:650;}
    .ico{width:18px;height:18px;display:block;}
    .ico.sm{width:16px;height:16px;}

    /* Shell */
    .shell{
      padding-top:var(--topbarH);display:grid;
      grid-template-columns:var(--railW) 1fr var(--railW);
      min-height:100vh;gap:14px;
      max-width:calc(var(--contentMax) + (var(--railW) * 2) + 72px);
      margin:0 auto;padding-left:14px;padding-right:14px;
    }
    body.compact-rails .shell{grid-template-columns:var(--railWCompact) 1fr var(--railWCompact);}

    /* Rails */
    .rail{
      position:sticky;top:calc(var(--topbarH) + 14px);
      height:calc(100vh - var(--topbarH) - 28px);
      border:1px solid var(--line);background:var(--surface);border-radius:var(--r-xl);
      box-shadow:var(--shadow-1);overflow:hidden;display:flex;flex-direction:column;
    }
    .rail-top{padding:14px 14px 12px 14px;border-bottom:1px solid var(--line);background:linear-gradient(180deg, rgba(255,255,255,.65), rgba(255,255,255,0));}
    .page[data-theme="dark"] .rail-top{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));}
    .rail-title{font-size:12px;font-weight:750;letter-spacing:.12px;}
    .rail-sub{font-size:12px;color:var(--slate-600);margin-top:2px;}
    .page[data-theme="dark"] .rail-sub{color:rgba(241,245,249,.70);}
    .rail-search{margin-top:10px;display:flex;align-items:center;gap:8px;border:1px solid var(--line);background:var(--surface2);border-radius:12px;padding:8px 10px;}
    .rail-search input{width:100%;border:0;outline:none;background:transparent;color:inherit;font-size:12px;}
    .xbtn{border:0;background:transparent;color:inherit;padding:4px;border-radius:10px;cursor:pointer;opacity:.75;}
    .xbtn:hover{opacity:1;background:rgba(15,23,42,.06);}
    .page[data-theme="dark"] .xbtn:hover{background:rgba(241,245,249,.08);}
    .rail-hint{margin-top:10px;font-size:11px;color:var(--slate-500);}
    .page[data-theme="dark"] .rail-hint{color:rgba(241,245,249,.58);}
    .rail-body{padding:10px;overflow:auto;overscroll-behavior:contain;}
    .rail-bottom{padding:10px 12px;border-top:1px solid var(--line);background:linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,.62));}
    .page[data-theme="dark"] .rail-bottom{background:linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,.06));}
    .rail-foot{display:flex;align-items:center;gap:10px;color:var(--slate-600);font-size:11px;justify-content:center;}
    .page[data-theme="dark"] .rail-foot{color:rgba(241,245,249,.64);}
    .rail-foot-dot{width:8px;height:8px;border-radius:999px;background:rgba(14,51,68,.55);box-shadow:0 0 0 3px rgba(14,51,68,.10);}
    .rail-foot-dot.right{background:rgba(216,116,61,.70);box-shadow:0 0 0 3px rgba(216,116,61,.10);}
    .rail-actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px;}
    .rail-btn{display:inline-flex;align-items:center;justify-content:center;padding:8px 10px;border-radius:12px;border:1px solid var(--line);background:var(--surface2);font-size:12px;font-weight:800;color:inherit;text-decoration:none;}
    .rail-btn:hover{text-decoration:none;box-shadow:0 1px 0 rgba(15,23,42,.04);}

    /* Nav */
    .nav-item,.nav-group-head,.nav-subgroup-head{width:100%;display:flex;align-items:center;gap:10px;padding:9px 10px;border-radius:12px;border:1px solid transparent;color:inherit;background:transparent;cursor:pointer;user-select:none;text-align:left;}
    .nav-item:hover,.nav-group-head:hover,.nav-subgroup-head:hover{background:rgba(15,23,42,.04);border-color:rgba(15,23,42,.06);text-decoration:none;}
    .page[data-theme="dark"] .nav-item:hover,.page[data-theme="dark"] .nav-group-head:hover,.page[data-theme="dark"] .nav-subgroup-head:hover{background:rgba(241,245,249,.06);border-color:rgba(241,245,249,.08);}
    .nav-item.active{background:linear-gradient(180deg, rgba(14,51,68,.10), rgba(14,51,68,.06));border-color:rgba(14,51,68,.20);}
    .page[data-theme="dark"] .nav-item.active{background:linear-gradient(180deg, rgba(65,197,224,.10), rgba(65,197,224,.06));border-color:rgba(65,197,224,.22);}
    .nav-item.sub{padding-left:34px;}
    .nav-item.sub .dot{width:6px;height:6px;border-radius:999px;background:rgba(100,116,139,.55);flex:0 0 auto;}
    .nav-item.sub.danger .dot{background:rgba(213,67,46,.70);}
    .nav-item.sub.muted{opacity:.65;cursor:default;}
    .nav-ico{display:inline-flex;align-items:center;justify-content:center;color:inherit;opacity:.9;}
    .nav-text{flex:1 1 auto;font-size:12.5px;font-weight:650;letter-spacing:.05px;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
    .chev{opacity:.65;display:inline-flex;align-items:center;justify-content:center;flex:0 0 auto;transition:transform .14s ease;}
    .nav-group,.nav-subgroup{margin-top:6px;}
    .nav-group-body,.nav-subgroup-body{padding-left:6px;margin-top:6px;display:none;}
    .nav-group.open > .nav-group-body{display:block;}
    .nav-subgroup.open > .nav-subgroup-body{display:block;}
    .nav-group.open > .nav-group-head .chev,.nav-subgroup.open > .nav-subgroup-head .chev{transform:rotate(90deg);}
    .nav-subgroup-head{padding-left:12px;gap:10px;}
    .nav-subgroup-head.inner{padding-left:22px;}
    .mini-pill{font-size:10px;font-weight:800;letter-spacing:.3px;padding:3px 7px;border-radius:999px;border:1px solid var(--line);background:rgba(15,23,42,.02);color:var(--slate-700);flex:0 0 auto;}
    .page[data-theme="dark"] .mini-pill{background:rgba(241,245,249,.06);color:rgba(241,245,249,.78);}
    .mini-pill.teal{border-color:rgba(20,122,116,.25);background:rgba(20,122,116,.10);color:var(--teal-700);}
    .mini-pill.violet{border-color:rgba(91,73,200,.22);background:rgba(91,73,200,.10);color:var(--violet-600);}
    .mini-pill.amber{border-color:rgba(183,121,31,.22);background:rgba(183,121,31,.10);color:var(--amber-600);}
    .mini-pill.slate{border-color:rgba(71,85,105,.22);background:rgba(71,85,105,.08);color:var(--slate-700);}
    .mini-pill.rose{border-color:rgba(180,35,58,.22);background:rgba(180,35,58,.10);color:var(--rose-700);}
    .is-dim{opacity:.35;filter:saturate(.9);}
    .is-hidden{display: none !important;}
    .forced-open > .nav-group-body,.forced-open > .nav-subgroup-body{display:block;}

    /* Content */
    .content{min-width:0;padding:14px 0 22px 0;}
    .content-inner{max-width:var(--contentMax);margin:0 auto;display:flex;flex-direction:column;gap:14px;}

    /* Hero */
    .hero{border:1px solid var(--line);background:linear-gradient(180deg, rgba(255,255,255,.86), rgba(255,255,255,.70));border-radius:var(--r-xl);box-shadow:var(--shadow-2);position:relative;overflow:hidden;}
    .page[data-theme="dark"] .hero{background:linear-gradient(180deg, rgba(10,14,26,.88), rgba(10,14,26,.66));}
    .hero-glow{position:absolute;inset:-80px -120px auto -120px;height:220px;background:radial-gradient(closest-side, rgba(65,197,224,.20), transparent 68%);opacity:.9;pointer-events:none;}
    .hero-inner{padding:18px 18px 16px 18px;position:relative;}
    .hero-top{display:flex;flex-direction:column;gap:6px;}
    .hero-title{font-size:18px;font-weight:850;letter-spacing:.2px;}
    .hero-sub{font-size:13px;color:var(--slate-600);max-width:100ch;}
    .page[data-theme="dark"] .hero-sub{color:rgba(241,245,249,.68);}
    .hero-actions{margin-top:14px;display:flex;flex-wrap:wrap;gap:10px;}
    .cta{display:inline-flex;align-items:center;gap:10px;padding:10px 12px;border-radius:14px;border:1px solid rgba(14,51,68,.18);background:linear-gradient(180deg, rgba(14,51,68,.12), rgba(14,51,68,.06));color:inherit;font-weight:750;font-size:12.5px;box-shadow:0 1px 0 rgba(15,23,42,.04);cursor:pointer;}
    .cta:hover{text-decoration:none;box-shadow:var(--shadow-1);transform:translateY(-1px);transition:transform .12s ease, box-shadow .12s ease;}
    .cta:active{transform:translateY(0px);}
    .cta-ico{display:inline-flex;align-items:center;justify-content:center;}
    .hero-meta{margin-top:14px;display:flex;flex-wrap:wrap;gap:8px;}
    .chip{display:inline-flex;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,.55);font-size:11px;font-weight:750;color:var(--slate-700);}
    .page[data-theme="dark"] .chip{background:rgba(255,255,255,.06);color:rgba(241,245,249,.78);}
    .chip.teal{border-color:rgba(20,122,116,.22);background:rgba(20,122,116,.10);color:var(--teal-700);}
    .chip.amber{border-color:rgba(183,121,31,.22);background:rgba(183,121,31,.10);color:var(--amber-600);}
    .chip.copper{border-color:rgba(216,116,61,.22);background:rgba(216,116,61,.10);color:var(--copper-600);}
    .chip.violet{border-color:rgba(91,73,200,.22);background:rgba(91,73,200,.10);color:var(--violet-600);}

    /* Card / Section */
    .card{border:1px solid var(--line);background:var(--surface);border-radius:var(--r-xl);box-shadow:var(--shadow-1);}
    .section{padding:16px;}
    .section-head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;}
    .section-title{display:flex;align-items:center;gap:10px;font-weight:850;letter-spacing:.12px;font-size:14px;min-width:0;}
    .section-emoji{font-size:18px;}
    .section-sub{font-size:12px;color:var(--slate-600);font-weight:650;}
    .page[data-theme="dark"] .section-sub{color:rgba(241,245,249,.68);}
    .section-actions{display:flex;gap:8px;flex-wrap:wrap;align-items:center;}

    /* Buttons */
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:9px 12px;border-radius:12px;border:1px solid var(--line);background:var(--surface2);font-size:12px;font-weight:750;color:inherit;text-decoration:none;cursor:pointer;}
    .btn:hover{text-decoration:none;box-shadow:var(--shadow-1);transform:translateY(-1px);transition:transform .12s ease, box-shadow .12s ease;}
    .btn:active{transform:translateY(0px);}
    .btn.ghost{background:transparent;}
    .btn.primary{border-color:rgba(14,51,68,.22);background:linear-gradient(180deg, rgba(14,51,68,.16), rgba(14,51,68,.08));}
    .copy-status{font-size:12px;font-weight:750;color:var(--teal-600);min-height:16px;}

    /* Option Toggle */
    .opt-toggle{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:12px;}
    .opt-btn{
      display:flex;align-items:center;gap:12px;padding:12px 14px;
      border-radius:14px;border:1px solid var(--line);background:var(--surface2);
      cursor:pointer;text-align:left;color:inherit;width:100%;
      transition:border-color .14s ease, background .14s ease, box-shadow .14s ease;
    }
    .opt-btn:hover{border-color:var(--line2);box-shadow:var(--shadow-1);}
    .opt-btn.active{
      border-color:rgba(14,51,68,.24);
      background:linear-gradient(180deg, rgba(14,51,68,.12), rgba(14,51,68,.06));
      box-shadow:0 1px 0 rgba(15,23,42,.06), 0 6px 18px rgba(14,51,68,.10);
    }
    .page[data-theme="dark"] .opt-btn.active{
      border-color:rgba(65,197,224,.28);
      background:linear-gradient(180deg, rgba(65,197,224,.10), rgba(65,197,224,.06));
    }
    .opt-num{
      width:30px;height:30px;border-radius:10px;
      background:rgba(15,23,42,.07);
      display:flex;align-items:center;justify-content:center;
      font-weight:900;font-size:14px;flex:0 0 auto;
      transition:background .14s ease, color .14s ease;
    }
    .page[data-theme="dark"] .opt-num{background:rgba(241,245,249,.10);}
    .opt-btn.active .opt-num{
      background:linear-gradient(135deg, var(--caufero-800), var(--teal-600));
      color:#fff;
      box-shadow:0 4px 12px rgba(14,51,68,.22);
    }
    .opt-text{min-width:0;}
    .opt-label{font-size:13px;font-weight:850;letter-spacing:.05px;}
    .opt-sub{font-size:11px;color:var(--slate-600);margin-top:2px;}
    .page[data-theme="dark"] .opt-sub{color:rgba(241,245,249,.62);}

    /* Option description strip */
    .opt-desc-strip{
      display:flex;align-items:flex-start;gap:10px;
      padding:10px 12px;border-radius:12px;margin-bottom:12px;
      border:1px solid rgba(65,197,224,.22);
      background:rgba(65,197,224,.06);
      font-size:12.5px;line-height:1.55;
      color:var(--slate-700);
    }
    .page[data-theme="dark"] .opt-desc-strip{
      border-color:rgba(65,197,224,.20);
      background:rgba(65,197,224,.08);
      color:rgba(241,245,249,.80);
    }
    .opt-strip-ico{flex:0 0 auto;margin-top:1px;opacity:.8;}
    .opt-desc-strip code{
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;
      font-size:11px;padding:2px 5px;border-radius:6px;
      background:rgba(65,197,224,.12);border:1px solid rgba(65,197,224,.20);
    }
    .page[data-theme="dark"] .opt-desc-strip code{background:rgba(65,197,224,.15);border-color:rgba(65,197,224,.25);}

    /* Textarea */
    .prompt-wrap{margin-top:4px;}
    .prompt-box{
      width:100%;height:310px;min-height:200px;resize:vertical;
      border-radius:16px;border:1px solid rgba(15,23,42,.12);
      background:linear-gradient(to bottom, rgba(2,6,23,.92), rgba(2,6,23,.86));
      color:#e5e7eb;padding:14px 14px;
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:12px;line-height:1.55;outline:none;
      box-shadow:0 14px 34px rgba(2,6,23,.18);overflow:auto;white-space:pre;
    }
    .prompt-box.editable{cursor:text;}
    .prompt-box::selection{background:rgba(65,197,224,.35);}
    .prompt-box:focus{
      border-color:rgba(65,197,224,.40);
      box-shadow:0 14px 34px rgba(2,6,23,.18), 0 0 0 3px rgba(65,197,224,.12);
    }

    /* FM Script Box */
    .fm-script-wrap{margin-top:12px;}
    .fm-script-box{
      width:100%;height:450px;min-height:300px;resize:vertical;
      border-radius:16px;border:1px solid rgba(15,23,42,.12);
      background:linear-gradient(to bottom, rgba(2,6,23,.92), rgba(2,6,23,.86));
      color:#e5e7eb;padding:14px 14px;
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:12px;line-height:1.55;outline:none;
      box-shadow:0 14px 34px rgba(2,6,23,.18);overflow:auto;white-space:pre;
      cursor:default;
    }
    .fm-script-box::selection{background:rgba(65,197,224,.35);}

    /* Attachments */
    .attach-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
    .attach-grid.single{grid-template-columns:1fr;max-width:560px;}
    .attach-item{
      display:flex;align-items:flex-start;gap:12px;padding:14px;
      border:1px solid var(--line);border-radius:14px;
      background:linear-gradient(180deg, rgba(255,255,255,.70), rgba(255,255,255,.50));
      text-decoration:none;color:inherit;
      transition:border-color .14s ease, box-shadow .14s ease, transform .12s ease;
      position:relative;
    }
    .page[data-theme="dark"] .attach-item{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));}
    .attach-item:hover{text-decoration:none;border-color:rgba(14,51,68,.22);box-shadow:var(--shadow-1);transform:translateY(-1px);}
    .page[data-theme="dark"] .attach-item:hover{border-color:rgba(65,197,224,.28);}
    .attach-icon{
      width:34px;height:34px;border-radius:10px;flex:0 0 auto;
      display:grid;place-items:center;
      background:linear-gradient(135deg, rgba(14,51,68,.12), rgba(20,122,116,.12));
      border:1px solid rgba(14,51,68,.12);
    }
    .attach-name{font-size:13px;font-weight:850;letter-spacing:.05px;}
    .attach-desc{font-size:11.5px;color:var(--slate-600);margin-top:3px;line-height:1.45;}
    .page[data-theme="dark"] .attach-desc{color:rgba(241,245,249,.65);}
    .attach-badge{
      position:absolute;top:10px;right:10px;
      font-size:10px;font-weight:900;letter-spacing:.3px;
      padding:3px 8px;border-radius:999px;
      border:1px solid var(--line);background:var(--surface2);color:var(--slate-600);
    }
    .page[data-theme="dark"] .attach-badge{color:rgba(241,245,249,.60);}

    /* Right panel cards */
    .panel-card{border:1px solid var(--line);background:linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.60));border-radius:16px;padding:14px;box-shadow:0 1px 0 rgba(15,23,42,.04);margin-bottom:12px;}
    .page[data-theme="dark"] .panel-card{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.04));}
    .panel-head{display:flex;flex-direction:column;gap:4px;margin-bottom:10px;}
    .panel-title{font-weight:950;letter-spacing:.15px;display:flex;align-items:center;gap:10px;}
    .panel-sub{font-size:12px;color:var(--slate-600);line-height:1.35;}
    .page[data-theme="dark"] .panel-sub{color:rgba(241,245,249,.66);}
    .pill-row{display:flex;flex-wrap:wrap;gap:8px;}
    .pill2{font-size:11px;font-weight:850;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:var(--surface2);color:inherit;}
    .side-grid{display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));gap:10px;}
    .side-pill{display:flex;align-items:center;justify-content:center;text-align:center;padding:10px;border-radius:14px;border:1px solid var(--line);background:var(--surface2);font-size:12px;font-weight:850;color:inherit;text-decoration:none;min-height:42px;}
    .side-pill:hover{text-decoration:none;box-shadow:0 1px 0 rgba(15,23,42,.04);transform:translateY(-1px);transition:transform .12s ease;}
    .stack{display:flex;flex-direction:column;gap:8px;}
    .stack-item{border:1px solid var(--line);background:var(--surface2);border-radius:14px;padding:10px 12px;font-size:12.5px;font-weight:800;color:inherit;line-height:1.45;}

    /* Footer */
    .footer{border:1px solid var(--line);background:var(--surface);border-radius:var(--r-xl);box-shadow:var(--shadow-1);padding:14px 16px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;}
    .footer-title{font-weight:950;letter-spacing:.2px;}
    .footer-sub{font-size:12px;color:var(--slate-600);margin-top:2px;}
    .page[data-theme="dark"] .footer-sub{color:rgba(241,245,249,.66);}
    .footer-right{display:flex;gap:12px;flex-wrap:wrap;}
    .footer-link{font-size:12px;font-weight:800;color:inherit;text-decoration:none;padding:7px 10px;border-radius:12px;border:1px solid transparent;}
    .footer-link:hover{text-decoration:none;border-color:var(--line);background:var(--surface2);}

    /* Keyword highlights */
    mark.kw{padding:2px 6px;border-radius:999px;background:rgba(216,116,61,.14);border:1px solid rgba(216,116,61,.18);color:inherit;font-weight:900;}
    .page[data-theme="dark"] mark.kw{background:rgba(65,197,224,.12);border-color:rgba(65,197,224,.18);}

    /* Focus */
    :focus{outline:none;}
    :focus-visible{box-shadow:0 0 0 3px rgba(14,51,68,.22), 0 0 0 6px rgba(255,255,255,.12);border-radius:12px;}
    .page[data-theme="dark"] :focus-visible{box-shadow:0 0 0 3px rgba(65,197,224,.22), 0 0 0 6px rgba(10,14,26,.40);}

    /* Responsive */
    @media (max-width: 980px){
      .shell{grid-template-columns:1fr;gap:12px;}
      .rail{position:fixed;top:var(--topbarH);height:calc(100vh - var(--topbarH));border-radius:18px;z-index:60;width:min(92vw, 340px);box-shadow:var(--shadow-2);transform:translateX(-110%);transition:transform .18s ease;}
      .rail-right{right:12px;left:auto;transform:translateX(110%);}
      .rail-left{left:12px;right:auto;}
      .rail.open{transform:translateX(0%);}
  </style>
</body>
</html>